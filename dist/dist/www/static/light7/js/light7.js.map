{"version":3,"sources":["../../../../../www/static/light7/js/light7.js"],"names":["_typeof2","require","_typeof3","_interopRequireDefault","_stringify","_stringify2","obj","__esModule","default","$","defaults","autoInit","showPageLoadingIndicator","router","swipePanel","swipePanelOnlyClose","pushAnimationDuration","smConfig","extend","config","device","ua","navigator","userAgent","android","match","ipad","ipod","iphone","ios","androidChrome","os","osVersion","toLowerCase","indexOf","replace","split","webView","osVersionArr","minimalUi","length","attr","windowWidth","window","width","windowHeight","height","statusBar","screen","classNames","pixelRatio","devicePixelRatio","push","Math","floor","major","parseInt","i","removeClass","addClass","join","compareVersion","a","b","as","bs","x","y","getTouchPosition","e","originalEvent","type","targetTouches","pageX","pageY","detect","platform","browser","webkit","osx","webos","win","test","wp","touchpad","kindle","silk","blackberry","bb10","rimtabletos","playbook","chrome","firefox","firefoxos","ie","webview","safari","version","tablet","phone","call","__detect","forEach","dimension","Dimension","m","toUpperCase","fn","margin","elem","size","sides","side","css","noop","support","touch","DocumentTouch","document","touchEvents","start","move","end","getTranslate","el","axis","matrix","curTransform","curStyle","transformMatrix","getComputedStyle","WebKitCSSMatrix","webkitTransform","MozTransform","OTransform","MsTransform","msTransform","transform","getPropertyValue","toString","m41","parseFloat","m42","requestAnimationFrame","callback","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","cancelAnimationFrame","id","webkitCancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","transitionEnd","events","dom","fireCallBack","target","off","on","dataset","dataKey","attributes","name","toCamelCase","value","key","undefined","data","getAttribute","smElementDataStorage","animationEnd","transition","duration","elStyle","style","webkitTransitionDuration","MsTransitionDuration","msTransitionDuration","MozTransitionDuration","OTransitionDuration","transitionDuration","prevAll","selector","prevEls","previousElementSibling","prev","is","nextAll","nextEls","nextElementSibling","next","show","elementDisplay","defaultDisplay","nodeName","element","display","createElement","body","appendChild","parentNode","removeChild","each","scrollHeight","FastClick","layer","options","oldOnClick","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","tapDelay","tapTimeout","notNeeded","bind","method","context","apply","arguments","methods","l","deviceIsAndroid","addEventListener","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","prototype","stopImmediatePropagation","removeEventListener","capture","rmv","Node","hijacked","adv","event","propagationStopped","onclick","deviceIsWindowsPhone","deviceIsIOS","deviceIsIOS4","deviceIsIOSWithBadTarget","deviceIsBlackBerry10","needsClick","disabled","className","needsFocus","readOnly","sendClick","clickEvent","activeElement","blur","changedTouches","createEvent","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","focus","setSelectionRange","updateScrollParent","scrollParent","parentElement","fastClickScrollParent","contains","offsetHeight","fastClickLastScrollTop","scrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","selection","getSelection","rangeCount","isCollapsed","identifier","preventDefault","timeStamp","lastClickTime","touchHasMoved","boundary","abs","findControl","labelElement","control","htmlFor","getElementById","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","top","parent","find","click","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","blackberryVersion","firefoxVersion","ontouchstart","exec","content","documentElement","scrollWidth","outerWidth","msTouchAction","touchAction","attach","Template7","t7","isArray","arr","Object","isObject","isFunction","func","cache","helperToSlices","string","helperParts","slices","shiftIndex","j","part","hashParts","hashName","hashContent","hash","stringToBlocks","blocks","k","_blocks","block","contextName","helperSlices","helperName","helperContext","helperHash","slice","helperStartIndex","helperContent","elseContent","toSkip","foundClosed","foundElse","foundClosedElse","depth","inverseContent","template","t","getCompileFn","compile","getCompileInverse","getCompileVar","ctx","variable","parts","levelsUp","initialCtx","newDepth","isFinite","getCompiledArguments","contextArray","Error","resultString","compiledArguments","helpers","eval","compiled","_if","inverse","unless","ret","reverse","first","last","index","_with","delimiter","delimeter","js","expression","js_compare","condition","instance","rendered","registerHelper","unregisterHelper","getCurrentPage","showTab","tab","tabLink","force","newTab","activeClass","hasClass","trigger","tabs","oldTab","children","oldTabLink","oldTabId","old","noConflict","clicked","$target","currentTarget","highlight","pageId","$tab","showToolbar","_modalTemplateTempDiv","modalStack","modalStackClearQueue","shift","modal","params","modalHTML","modalTemplate","_compiledTemplates","buttonsHTML","buttons","bold","text","titleHTML","title","textHTML","afterTextHTML","afterText","noButtons","verticalButtons","innerHTML","modalContainer","append","close","closeModal","openModal","alert","callbackOk","modalTitle","modalButtonOk","confirm","callbackCancel","modalButtonCancel","prompt","val","modalLogin","modalUsernamePlaceholder","modalPasswordPlaceholder","username","password","modalPassword","showPreloader","modalPreloaderTitle","hidePreloader","showIndicator","hideIndicator","remove","actions","toPopover","groupSelector","buttonSelector","actionsToPopoverTemplate","modalActionsToPopoverTemplate","actionsToPopover","popoverHTML","popover","modalActionsTemplate","button","buttonClass","label","color","bg","groups","groupIndex","buttonIndex","buttonParams","clickTarget","removeOnClose","_modal","trim","childNodes","classList","add","sizePopover","left","modalWidth","modalHeight","modalAngle","modalAngleSize","modalAngleLeft","modalAngleTop","targetWidth","targetHeight","outerHeight","targetOffset","offset","targetParentPage","parents","modalTop","modalLeft","diff","modalPosition","max","min","viewClass","sizeNavbars","popup","pickerModal","loginScreen","toast","msg","time","$toast","appendTo","closePrevious","isModal","isPopover","isPopup","isLoginScreen","isPickerModal","isToast","marginTop","round","marginLeft","overlay","clientLeft","hide","handleClicks","url","clickedData","modalCloseByOutside","actionsCloseByOutside","popupCloseByOutside","rtl","Calendar","p","def","initialized","inline","container","isH","direction","inverter","animating","convertToPopover","onlyInPopover","input","inPopover","opened","formatDate","date","Date","year","getFullYear","month","getMonth","month1","day","getDate","weekDay","getDay","dateFormat","substring","monthNames","monthNamesShort","dayNames","dayNamesShort","addValue","multiple","inValuesIndex","getTime","splice","updateValue","setValue","arrValues","wrapper","inputValue","valueDate","onChange","map","formatValue","initCalendarEvents","col","allowItemClick","isTouched","isMoved","touchCurrentX","touchCurrentY","touchStartTime","touchEndTime","startTranslate","currentTranslate","wrapperWidth","wrapperHeight","percentage","touchesDiff","isScrolling","handleTouchStart","position","monthsTranslate","handleTouchMove","offsetWidth","handleTouchEnd","resetMonth","nextMonth","prevMonth","handleDayClick","dateYear","dateMonth","dateDay","onDayClick","closeOnSelect","prevYear","nextYear","touchMove","f7DestroyCalendarEvents","destroyCalendarEvents","colContainer","daysInMonth","d","monthHTML","daysInPrevMonth","firstDayOfMonthIndex","dayDate","currentValues","rows","cols","dayIndex","firstDay","today","setHours","minDate","maxDate","rowHTML","row","dayNumber","weekendDays","dayYear","dayMonth","updateCurrentMonthYear","dir","currentMonth","months","eq","currentYear","onMonthChangeStart","currentIndex","onMonthYearChangeStart","onMonthChangeEnd","rebuildBoth","nextMonthHTML","prevMonthHTML","newMonthHTML","prepend","setMonthsTranslate","onMonthAdd","onMonthYearChangeEnd","translate","prevMonthTranslate","currentMonthTranslate","nextMonthTranslate","animate","nextDate","nextDateTime","transitionEndCallback","prevDate","prevDateTime","setYearMonth","targetDate","currentDate","prevTranslate","monthTranslate","wrapperTranslate","layout","pickerHTML","pickerClass","layoutDate","currentMonthHTML","monthsHTML","weekHeaderHTML","weekHeader","weekDayIndex","dayName","cssClass","toolbarHTML","toolbar","toolbarTemplate","toolbarCloseText","monthPicker","monthPickerTemplate","yearPicker","yearPickerTemplate","openOnInput","open","scrollToInput","pageContent","paddingTop","paddingBottom","pageHeight","pageScrollHeight","newPaddingBottom","inputTop","closeOnHTMLClick","inputReadOnly","prop","onPickerClose","onClose","f7Calendar","onOpen","calendar","$this","initCalendar","$content","Picker","updateValuesOnMomentum","updateValuesOnTouchmove","rotateEffect","momentumRatio","freeMode","originBug","valueIndex","divider","newValue","newDisplayValue","displayValue","initPickerCol","colElement","updateItems","colIndex","items","itemHeight","itemsHeight","minTranslate","maxTranslate","replaceValues","values","displayValues","destroyEvents","newItemsHTML","columnHTML","html","calcSize","initEvents","colWidth","colHeight","item","activeIndex","animationFrameId","valueCallbacks","newActiveIndex","newTranslate","updateDuringScroll","previousActiveIndex","selectedItem","itemOffsetTop","translateOffset","itemOffset","itemsFit","ceil","angle","returnTo","velocityTranslate","velocityTime","pow","velocity","handleClick","detach","f7DestroyPickerCol","destroyPickerCol","resizeCols","onlyItems","columnItemsHTML","textAlign","colsHTML","f7Picker","pickerToClose","picker","args","Array","datetimePicker","getDays","days","getDaysByMonthAndYear","int_d","formatNumber","n","initMonthes","initYears","getHours","getMinutes","currentValue","concat","initPullToRefresh","pageContainer","eventsTarget","touchesStart","refresh","useTranslate","wasScrolled","triggerDistance","dynamicTriggerDistance","done","pullToRefreshDone","destroyPullToRefresh","pullToRefreshTrigger","pullToRefreshContent","handleInfiniteScroll","inf","distance","virtualListContainer","virtualList","onTop","f7VirtualList","reachEnd","attachInfiniteScroll","infiniteContent","detachInfiniteScroll","initInfiniteScroll","detachEvents","noti","timeout","diffX","diffY","touchStart","sqrt","touchEnd","closeNotification","attachEvents","notification","tpl","startTimeout","media","Index","indexListTemplate","render","list","draw","indexList","titles","titleSelector","titleTexts","toArray","indexes","proxy","pageOffsetTop","touching","li","getElementOnTouch","titleTop","result","initIndexList","$input","$btn","allowPanelOpen","openPanel","panel","closePanel","effect","transitionEndTarget","openedTriggered","panelTransitionEnd","activePanel","panelPosition","initSwipePanels","swipePanelCloseOpposite","swipePanelActiveArea","swipePanelThreshold","swipePanelNoFollow","panelOverlay","panelWidth","currentPage","innerWidth","f7PreventPanelSwipe","timeDiff","threshold","action","edge","CustomEvent","initCustomEvent","bubbles","Router","state","sessionStorage","setItem","getItem","stack","extras","init","xhr","location","genRandomID","newCurrentPage","history","genStateID","replaceState","href","setCurrentStateID","self","onpopstate","loadPage","noAnimation","reload","param","getPage","page","extra","pageid","getCurrentStateID","animation","forward","JSON","parse","$page","pageExtra","duplicatePage","insertBefore","forwardStack","animatePages","replacePage","reloadPage","leftPage","rightPage","leftToRight","noTransition","removeClasses","afterAnimation","back","_back","h","popBack","newPage","pushForward","_forward","popForward","pushBack","pushState","dispatch","readyState","onreadystatechange","abort","ajax","success","s","parseXHR","$extra","error","complete","response","responseText","tmp","replaceBack","pop","reloadBack","hasAttribute","initPage","initSwiper","initSwipeout"],"mappings":"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","file":"light7.js","sourcesContent":["\"use strict\";\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * =====================================================\n * light7 V0.4.3 - http://light7.org/\n *\n * =====================================================\n */\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    //\n\n    var defaults = {\n        autoInit: false, //\n        showPageLoadingIndicator: true, //push.js\n        router: true, //router\n        swipePanel: \"left\", //\n        swipePanelOnlyClose: false, //\n        pushAnimationDuration: 400 // animationEnd bug\n    };\n\n    $.smConfig = $.extend(defaults, $.config);\n}($);\n\n/*===========================\nDevice/OS Detection\n===========================*/\n/* global $:true */\n;\n(function ($) {\n    \"use strict\";\n\n    var device = {};\n    var ua = navigator.userAgent;\n\n    var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n    var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n    var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n    var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\n    device.ios = device.android = device.iphone = device.ipad = device.androidChrome = false;\n\n    // Android\n    if (android) {\n        device.os = 'android';\n        device.osVersion = android[2];\n        device.android = true;\n        device.androidChrome = ua.toLowerCase().indexOf('chrome') >= 0;\n    }\n    if (ipad || iphone || ipod) {\n        device.os = 'ios';\n        device.ios = true;\n    }\n    // iOS\n    if (iphone && !ipod) {\n        device.osVersion = iphone[2].replace(/_/g, '.');\n        device.iphone = true;\n    }\n    if (ipad) {\n        device.osVersion = ipad[2].replace(/_/g, '.');\n        device.ipad = true;\n    }\n    if (ipod) {\n        device.osVersion = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n        device.iphone = true;\n    }\n    // iOS 8+ changed UA\n    if (device.ios && device.osVersion && ua.indexOf('Version/') >= 0) {\n        if (device.osVersion.split('.')[0] === '10') {\n            device.osVersion = ua.toLowerCase().split('version/')[1].split(' ')[0];\n        }\n    }\n\n    // Webview\n    device.webView = (iphone || ipad || ipod) && ua.match(/.*AppleWebKit(?!.*Safari)/i);\n\n    // Minimal UI\n    if (device.os && device.os === 'ios') {\n        var osVersionArr = device.osVersion.split('.');\n        device.minimalUi = !device.webView && (ipod || iphone) && (osVersionArr[0] * 1 === 7 ? osVersionArr[1] * 1 >= 1 : osVersionArr[0] * 1 > 7) && $('meta[name=\"viewport\"]').length > 0 && $('meta[name=\"viewport\"]').attr('content').indexOf('minimal-ui') >= 0;\n    }\n\n    // Check for status bar and fullscreen app mode\n    var windowWidth = $(window).width();\n    var windowHeight = $(window).height();\n    device.statusBar = false;\n    if (device.webView && windowWidth * windowHeight === screen.width * screen.height) {\n        device.statusBar = true;\n    } else {\n        device.statusBar = false;\n    }\n\n    // Classes\n    var classNames = [];\n\n    // Pixel Ratio\n    device.pixelRatio = window.devicePixelRatio || 1;\n    classNames.push('pixel-ratio-' + Math.floor(device.pixelRatio));\n    if (device.pixelRatio >= 2) {\n        classNames.push('retina');\n    }\n\n    // OS classes\n    if (device.os) {\n        classNames.push(device.os, device.os + '-' + device.osVersion.split('.')[0], device.os + '-' + device.osVersion.replace(/\\./g, '-'));\n        if (device.os === 'ios') {\n            var major = parseInt(device.osVersion.split('.')[0], 10);\n            for (var i = major - 1; i >= 6; i--) {\n                classNames.push('ios-gt-' + i);\n            }\n        }\n    }\n    // Status bar classes\n    if (device.statusBar) {\n        classNames.push('with-statusbar-overlay');\n    } else {\n        $('html').removeClass('with-statusbar-overlay');\n    }\n\n    // Add html classes\n    if (classNames.length > 0) $('html').addClass(classNames.join(' '));\n\n    $.device = device;\n})($);\n\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    //\n    //a > b === 1\n    //a = b === 0\n    //a < b === -1\n\n    $.compareVersion = function (a, b) {\n        var as = a.split('.');\n        var bs = b.split('.');\n        if (a === b) return 0;\n\n        for (var i = 0; i < as.length; i++) {\n            var x = parseInt(as[i]);\n            if (!bs[i]) return 1;\n            var y = parseInt(bs[i]);\n            if (x < y) return -1;\n            if (x > y) return 1;\n        }\n        return 1;\n    };\n\n    $.getTouchPosition = function (e) {\n        e = e.originalEvent || e; //jquery wrap the originevent\n        if (e.type === 'touchstart' || e.type === 'touchmove' || e.type === 'touchend') {\n            return {\n                x: e.targetTouches[0].pageX,\n                y: e.targetTouches[0].pageY\n            };\n        } else {\n            return {\n                x: e.pageX,\n                y: e.pageY\n            };\n        }\n    };\n}($);\n\n//     Zepto.js\n//     (c) 2010-2015 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n+function ($) {\n    \"use strict\";\n\n    function detect(ua, platform) {\n        var os = this.os = {},\n            // jshint ignore:line\n        browser = this.browser = {},\n            // jshint ignore:line\n        webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/),\n            android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/),\n            osx = !!ua.match(/\\(Macintosh\\; Intel /),\n            ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/),\n            ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/),\n            iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/),\n            webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/),\n            win = /Win\\d{2}|Windows/.test(platform),\n            wp = ua.match(/Windows Phone ([\\d.]+)/),\n            touchpad = webos && ua.match(/TouchPad/),\n            kindle = ua.match(/Kindle\\/([\\d.]+)/),\n            silk = ua.match(/Silk\\/([\\d._]+)/),\n            blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/),\n            bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/),\n            rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/),\n            playbook = ua.match(/PlayBook/),\n            chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/),\n            firefox = ua.match(/Firefox\\/([\\d.]+)/),\n            firefoxos = ua.match(/\\((?:Mobile|Tablet); rv:([\\d.]+)\\).*Firefox\\/[\\d.]+/),\n            ie = ua.match(/MSIE\\s([\\d.]+)/) || ua.match(/Trident\\/[\\d](?=[^\\?]+).*rv:([0-9.].)/),\n            webview = !chrome && ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),\n            safari = webview || ua.match(/Version\\/([\\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);\n\n        // Todo: clean this up with a better OS/browser seperation:\n        // - discern (more) between multiple browsers on android\n        // - decide if kindle fire in silk mode is android or not\n        // - Firefox on Android doesn't specify the Android version\n        // - possibly devide in os, device and browser hashes\n\n        if (browser.webkit = !!webkit) browser.version = webkit[1]; // jshint ignore:line\n\n        if (android) os.android = true, os.version = android[2];\n        if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n        if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n        if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n        if (wp) os.wp = true, os.version = wp[1];\n        if (webos) os.webos = true, os.version = webos[2];\n        if (touchpad) os.touchpad = true;\n        if (blackberry) os.blackberry = true, os.version = blackberry[2];\n        if (bb10) os.bb10 = true, os.version = bb10[2];\n        if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n        if (playbook) browser.playbook = true;\n        if (kindle) os.kindle = true, os.version = kindle[1];\n        if (silk) browser.silk = true, browser.version = silk[1];\n        if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n        if (chrome) browser.chrome = true, browser.version = chrome[1];\n        if (firefox) browser.firefox = true, browser.version = firefox[1];\n        if (firefoxos) os.firefoxos = true, os.version = firefoxos[1];\n        if (ie) browser.ie = true, browser.version = ie[1];\n        if (safari && (osx || os.ios || win)) {\n            browser.safari = true;\n            if (!os.ios) browser.version = safari[1];\n        }\n        if (webview) browser.webview = true;\n\n        os.tablet = !!(ipad || playbook || android && !ua.match(/Mobile/) || firefox && ua.match(/Tablet/) || ie && !ua.match(/Phone/) && ua.match(/Touch/));\n        os.phone = !!(!os.tablet && !os.ipod && (android || iphone || webos || blackberry || bb10 || chrome && ua.match(/Android/) || chrome && ua.match(/CriOS\\/([\\d.]+)/) || firefox && ua.match(/Mobile/) || ie && ua.match(/Touch/)));\n    }\n\n    detect.call($, navigator.userAgent, navigator.platform);\n    // make available to unit tests\n    $.__detect = detect;\n}($); // jshint ignore:line\n\n/* global $:true */\n/* global WebKitCSSMatrix:true */\n\n(function ($) {\n    \"use strict\";\n\n    ['width', 'height'].forEach(function (dimension) {\n        var Dimension = dimension.replace(/./, function (m) {\n            return m[0].toUpperCase();\n        });\n        $.fn['outer' + Dimension] = function (margin) {\n            var elem = this;\n            if (elem) {\n                var size = elem[dimension]();\n                var sides = {\n                    'width': ['left', 'right'],\n                    'height': ['top', 'bottom']\n                };\n                sides[dimension].forEach(function (side) {\n                    if (margin) size += parseInt(elem.css('margin-' + side), 10);\n                });\n                return size;\n            } else {\n                return null;\n            }\n        };\n    });\n\n    $.noop = function () {};\n\n    //support\n    $.support = function () {\n        var support = {\n            touch: !!('ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch)\n        };\n        return support;\n    }();\n\n    $.touchEvents = {\n        start: $.support.touch ? 'touchstart' : 'mousedown',\n        move: $.support.touch ? 'touchmove' : 'mousemove',\n        end: $.support.touch ? 'touchend' : 'mouseup'\n    };\n\n    $.getTranslate = function (el, axis) {\n        var matrix, curTransform, curStyle, transformMatrix;\n\n        // automatic axis detection\n        if (typeof axis === 'undefined') {\n            axis = 'x';\n        }\n\n        curStyle = window.getComputedStyle(el, null);\n        if (window.WebKitCSSMatrix) {\n            // Some old versions of Webkit choke when 'none' is passed; pass\n            // empty string instead in this case\n            transformMatrix = new WebKitCSSMatrix(curStyle.webkitTransform === 'none' ? '' : curStyle.webkitTransform);\n        } else {\n            transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n            matrix = transformMatrix.toString().split(',');\n        }\n\n        if (axis === 'x') {\n            //Latest Chrome and webkits Fix\n            if (window.WebKitCSSMatrix) curTransform = transformMatrix.m41;\n            //Crazy IE10 Matrix\n            else if (matrix.length === 16) curTransform = parseFloat(matrix[12]);\n                //Normal Browsers\n                else curTransform = parseFloat(matrix[4]);\n        }\n        if (axis === 'y') {\n            //Latest Chrome and webkits Fix\n            if (window.WebKitCSSMatrix) curTransform = transformMatrix.m42;\n            //Crazy IE10 Matrix\n            else if (matrix.length === 16) curTransform = parseFloat(matrix[13]);\n                //Normal Browsers\n                else curTransform = parseFloat(matrix[5]);\n        }\n\n        return curTransform || 0;\n    };\n    $.requestAnimationFrame = function (callback) {\n        if (window.requestAnimationFrame) return window.requestAnimationFrame(callback);else if (window.webkitRequestAnimationFrame) return window.webkitRequestAnimationFrame(callback);else if (window.mozRequestAnimationFrame) return window.mozRequestAnimationFrame(callback);else {\n            return window.setTimeout(callback, 1000 / 60);\n        }\n    };\n\n    $.cancelAnimationFrame = function (id) {\n        if (window.cancelAnimationFrame) return window.cancelAnimationFrame(id);else if (window.webkitCancelAnimationFrame) return window.webkitCancelAnimationFrame(id);else if (window.mozCancelAnimationFrame) return window.mozCancelAnimationFrame(id);else {\n            return window.clearTimeout(id);\n        }\n    };\n\n    $.fn.transitionEnd = function (callback) {\n        var events = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'],\n            i,\n            dom = this;\n\n        function fireCallBack(e) {\n            /*jshint validthis:true */\n            if (e.target !== this) return;\n            callback.call(this, e);\n            for (i = 0; i < events.length; i++) {\n                dom.off(events[i], fireCallBack);\n            }\n        }\n        if (callback) {\n            for (i = 0; i < events.length; i++) {\n                dom.on(events[i], fireCallBack);\n            }\n        }\n        return this;\n    };\n    $.fn.dataset = function () {\n        var el = this[0];\n        if (el) {\n            var dataset = {};\n            if (el.dataset) {\n\n                for (var dataKey in el.dataset) {\n                    // jshint ignore:line\n                    dataset[dataKey] = el.dataset[dataKey];\n                }\n            } else {\n                for (var i = 0; i < el.attributes.length; i++) {\n                    var attr = el.attributes[i];\n                    if (attr.name.indexOf('data-') >= 0) {\n                        dataset[$.toCamelCase(attr.name.split('data-')[1])] = attr.value;\n                    }\n                }\n            }\n            for (var key in dataset) {\n                if (dataset[key] === 'false') dataset[key] = false;else if (dataset[key] === 'true') dataset[key] = true;else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] = dataset[key] * 1;\n            }\n            return dataset;\n        } else return undefined;\n    };\n    $.fn.data = function (key, value) {\n        if (typeof value === 'undefined') {\n            // Get value\n            if (this[0] && this[0].getAttribute) {\n                var dataKey = this[0].getAttribute('data-' + key);\n\n                if (dataKey) {\n                    return dataKey;\n                } else if (this[0].smElementDataStorage && key in this[0].smElementDataStorage) {\n\n                    return this[0].smElementDataStorage[key];\n                } else {\n                    return undefined;\n                }\n            } else return undefined;\n        } else {\n            // Set value\n            for (var i = 0; i < this.length; i++) {\n                var el = this[i];\n                if (!el.smElementDataStorage) el.smElementDataStorage = {};\n                el.smElementDataStorage[key] = value;\n            }\n            return this;\n        }\n    };\n    $.fn.animationEnd = function (callback) {\n        var events = ['webkitAnimationEnd', 'OAnimationEnd', 'MSAnimationEnd', 'animationend'],\n            i,\n            dom = this;\n\n        function fireCallBack(e) {\n            callback(e);\n            for (i = 0; i < events.length; i++) {\n                dom.off(events[i], fireCallBack);\n            }\n        }\n        if (callback) {\n            for (i = 0; i < events.length; i++) {\n                dom.on(events[i], fireCallBack);\n            }\n        }\n        return this;\n    };\n    $.fn.transition = function (duration) {\n        if (typeof duration !== 'string') {\n            duration = duration + 'ms';\n        }\n        for (var i = 0; i < this.length; i++) {\n            var elStyle = this[i].style;\n            elStyle.webkitTransitionDuration = elStyle.MsTransitionDuration = elStyle.msTransitionDuration = elStyle.MozTransitionDuration = elStyle.OTransitionDuration = elStyle.transitionDuration = duration;\n        }\n        return this;\n    };\n    $.fn.transform = function (transform) {\n        for (var i = 0; i < this.length; i++) {\n            var elStyle = this[i].style;\n            elStyle.webkitTransform = elStyle.MsTransform = elStyle.msTransform = elStyle.MozTransform = elStyle.OTransform = elStyle.transform = transform;\n        }\n        return this;\n    };\n    $.fn.prevAll = function (selector) {\n        var prevEls = [];\n        var el = this[0];\n        if (!el) return $([]);\n        while (el.previousElementSibling) {\n            var prev = el.previousElementSibling;\n            if (selector) {\n                if ($(prev).is(selector)) prevEls.push(prev);\n            } else prevEls.push(prev);\n            el = prev;\n        }\n        return $(prevEls);\n    };\n    $.fn.nextAll = function (selector) {\n        var nextEls = [];\n        var el = this[0];\n        if (!el) return $([]);\n        while (el.nextElementSibling) {\n            var next = el.nextElementSibling;\n            if (selector) {\n                if ($(next).is(selector)) nextEls.push(next);\n            } else nextEls.push(next);\n            el = next;\n        }\n        return $(nextEls);\n    };\n\n    //zeptoshow show  opacity \n    $.fn.show = function () {\n        var elementDisplay = {};\n\n        function defaultDisplay(nodeName) {\n            var element, display;\n            if (!elementDisplay[nodeName]) {\n                element = document.createElement(nodeName);\n                document.body.appendChild(element);\n                display = getComputedStyle(element, '').getPropertyValue(\"display\");\n                element.parentNode.removeChild(element);\n                display === \"none\" && (display = \"block\");\n                elementDisplay[nodeName] = display;\n            }\n            return elementDisplay[nodeName];\n        }\n\n        return this.each(function () {\n            this.style.display === \"none\" && (this.style.display = '');\n            if (getComputedStyle(this, '').getPropertyValue(\"display\") === \"none\") ;\n            this.style.display = defaultDisplay(this.nodeName);\n        });\n    };\n\n    $.fn.scrollHeight = function () {\n        return this[0].scrollHeight;\n    };\n})($);\n\n/* global $:true */\n;\n(function ($) {\n    'use strict';\n\n    /**\n     * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\n     *\n     * @codingstandard ftlabs-jsv2\n     * @copyright The Financial Times Limited [All Rights Reserved]\n     * @license MIT License (see LICENSE.txt)\n     */\n\n    /*jslint browser:true, node:true, elision:true*/\n    /*global Event, Node*/\n\n    /**\n     * Instantiate fast-clicking listeners on the specified layer.\n     *\n     * @constructor\n     * @param {Element} layer The layer to listen on\n     * @param {Object} [options={}] The options to override the defaults\n     */\n\n    function FastClick(layer, options) {\n        var oldOnClick;\n\n        options = options || {};\n\n        /**\n         * Whether a click is currently being tracked.\n         *\n         * @type boolean\n         */\n        this.trackingClick = false;\n\n        /**\n         * Timestamp for when click tracking started.\n         *\n         * @type number\n         */\n        this.trackingClickStart = 0;\n\n        /**\n         * The element being tracked for a click.\n         *\n         * @type EventTarget\n         */\n        this.targetElement = null;\n\n        /**\n         * X-coordinate of touch start event.\n         *\n         * @type number\n         */\n        this.touchStartX = 0;\n\n        /**\n         * Y-coordinate of touch start event.\n         *\n         * @type number\n         */\n        this.touchStartY = 0;\n\n        /**\n         * ID of the last touch, retrieved from Touch.identifier.\n         *\n         * @type number\n         */\n        this.lastTouchIdentifier = 0;\n\n        /**\n         * Touchmove boundary, beyond which a click will be cancelled.\n         *\n         * @type number\n         */\n        this.touchBoundary = options.touchBoundary || 10;\n\n        /**\n         * The FastClick layer.\n         *\n         * @type Element\n         */\n        this.layer = layer;\n\n        /**\n         * The minimum time between tap(touchstart and touchend) events\n         *\n         * @type number\n         */\n        this.tapDelay = options.tapDelay || 200;\n\n        /**\n         * The maximum time for a tap\n         *\n         * @type number\n         */\n        this.tapTimeout = options.tapTimeout || 700;\n\n        if (FastClick.notNeeded(layer)) {\n            return;\n        }\n\n        // Some old versions of Android don't have Function.prototype.bind\n        function bind(method, context) {\n            return function () {\n                return method.apply(context, arguments);\n            };\n        }\n\n        var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];\n        var context = this;\n        for (var i = 0, l = methods.length; i < l; i++) {\n            context[methods[i]] = bind(context[methods[i]], context);\n        }\n\n        // Set up event handlers as required\n        if (deviceIsAndroid) {\n            layer.addEventListener('mouseover', this.onMouse, true);\n            layer.addEventListener('mousedown', this.onMouse, true);\n            layer.addEventListener('mouseup', this.onMouse, true);\n        }\n\n        layer.addEventListener('click', this.onClick, true);\n        layer.addEventListener('touchstart', this.onTouchStart, false);\n        layer.addEventListener('touchmove', this.onTouchMove, false);\n        layer.addEventListener('touchend', this.onTouchEnd, false);\n        layer.addEventListener('touchcancel', this.onTouchCancel, false);\n\n        // Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n        // which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\n        // layer when they are cancelled.\n        if (!Event.prototype.stopImmediatePropagation) {\n            layer.removeEventListener = function (type, callback, capture) {\n                var rmv = Node.prototype.removeEventListener;\n                if (type === 'click') {\n                    rmv.call(layer, type, callback.hijacked || callback, capture);\n                } else {\n                    rmv.call(layer, type, callback, capture);\n                }\n            };\n\n            layer.addEventListener = function (type, callback, capture) {\n                var adv = Node.prototype.addEventListener;\n                if (type === 'click') {\n                    adv.call(layer, type, callback.hijacked || (callback.hijacked = function (event) {\n                        if (!event.propagationStopped) {\n                            callback(event);\n                        }\n                    }), capture);\n                } else {\n                    adv.call(layer, type, callback, capture);\n                }\n            };\n        }\n\n        // If a handler is already declared in the element's onclick attribute, it will be fired before\n        // FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\n        // adding it as listener.\n        if (typeof layer.onclick === 'function') {\n\n            // Android browser on at least 3.2 requires a new reference to the function in layer.onclick\n            // - the old one won't work if passed to addEventListener directly.\n            oldOnClick = layer.onclick;\n            layer.addEventListener('click', function (event) {\n                oldOnClick(event);\n            }, false);\n            layer.onclick = null;\n        }\n    }\n\n    /**\n     * Windows Phone 8.1 fakes user agent string to look like Android and iPhone.\n     *\n     * @type boolean\n     */\n    var deviceIsWindowsPhone = navigator.userAgent.indexOf(\"Windows Phone\") >= 0;\n\n    /**\n     * Android requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;\n\n    /**\n     * iOS requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;\n\n    /**\n     * iOS 4 requires an exception for select elements.\n     *\n     * @type boolean\n     */\n    var deviceIsIOS4 = deviceIsIOS && /OS 4_\\d(_\\d)?/.test(navigator.userAgent);\n\n    /**\n     * iOS 6.0-7.* requires the target element to be manually derived\n     *\n     * @type boolean\n     */\n    var deviceIsIOSWithBadTarget = deviceIsIOS && /OS [6-7]_\\d/.test(navigator.userAgent);\n\n    /**\n     * BlackBerry requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;\n\n    /**\n     * Determine whether a given element requires a native click.\n     *\n     * @param {EventTarget|Element} target Target DOM element\n     * @returns {boolean} Returns true if the element needs a native click\n     */\n    FastClick.prototype.needsClick = function (target) {\n\n        switch (target.nodeName.toLowerCase()) {\n\n            // Don't send a synthetic click to disabled inputs (issue #62)\n            case 'button':\n            case 'select':\n            case 'textarea':\n                if (target.disabled) {\n                    return true;\n                }\n\n                break;\n            case 'input':\n\n                // File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\n                if (deviceIsIOS && target.type === 'file' || target.disabled) {\n                    return true;\n                }\n\n                break;\n            case 'label':\n            case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames\n            case 'video':\n                return true;\n            default:\n        }\n\n        return (/\\bneedsclick\\b/.test(target.className)\n        );\n    };\n\n    /**\n     * Determine whether a given element requires a call to focus to simulate click into element.\n     *\n     * @param {EventTarget|Element} target Target DOM element\n     * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\n     */\n    FastClick.prototype.needsFocus = function (target) {\n        switch (target.nodeName.toLowerCase()) {\n            case 'textarea':\n                return true;\n            case 'select':\n                return !deviceIsAndroid;\n            case 'input':\n                switch (target.type) {\n                    case 'button':\n                    case 'checkbox':\n                    case 'file':\n                    case 'image':\n                    case 'radio':\n                    case 'submit':\n                        return false;\n                }\n\n                // No point in attempting to focus disabled inputs\n                return !target.disabled && !target.readOnly;\n            default:\n                return (/\\bneedsfocus\\b/.test(target.className)\n                );\n        }\n    };\n\n    /**\n     * Send a click event to the specified element.\n     *\n     * @param {EventTarget|Element} targetElement\n     * @param {Event} event\n     */\n    FastClick.prototype.sendClick = function (targetElement, event) {\n        var clickEvent, touch;\n\n        // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\n        if (document.activeElement && document.activeElement !== targetElement) {\n            document.activeElement.blur();\n        }\n\n        touch = event.changedTouches[0];\n\n        // Synthesise a click event, with an extra attribute so it can be tracked\n        clickEvent = document.createEvent('MouseEvents');\n        clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n        clickEvent.forwardedTouchEvent = true;\n        targetElement.dispatchEvent(clickEvent);\n    };\n\n    FastClick.prototype.determineEventType = function (targetElement) {\n\n        //Issue #159: Android Chrome Select Box does not open with a synthetic click event\n        if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\n            return 'mousedown';\n        }\n\n        return 'click';\n    };\n\n    /**\n     * @param {EventTarget|Element} targetElement\n     */\n    FastClick.prototype.focus = function (targetElement) {\n        var length;\n\n        // Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\n        if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {\n            length = targetElement.value.length;\n            targetElement.setSelectionRange(length, length);\n        } else {\n            targetElement.focus();\n        }\n    };\n\n    /**\n     * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\n     *\n     * @param {EventTarget|Element} targetElement\n     */\n    FastClick.prototype.updateScrollParent = function (targetElement) {\n        var scrollParent, parentElement;\n\n        scrollParent = targetElement.fastClickScrollParent;\n\n        // Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\n        // target element was moved to another parent.\n        if (!scrollParent || !scrollParent.contains(targetElement)) {\n            parentElement = targetElement;\n            do {\n                if (parentElement.scrollHeight > parentElement.offsetHeight) {\n                    scrollParent = parentElement;\n                    targetElement.fastClickScrollParent = parentElement;\n                    break;\n                }\n\n                parentElement = parentElement.parentElement;\n            } while (parentElement);\n        }\n\n        // Always update the scroll top tracker if possible.\n        if (scrollParent) {\n            scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\n        }\n    };\n\n    /**\n     * @param {EventTarget} targetElement\n     * @returns {Element|EventTarget}\n     */\n    FastClick.prototype.getTargetElementFromEventTarget = function (eventTarget) {\n\n        // On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\n        if (eventTarget.nodeType === Node.TEXT_NODE) {\n            return eventTarget.parentNode;\n        }\n\n        return eventTarget;\n    };\n\n    /**\n     * On touch start, record the position and scroll offset.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchStart = function (event) {\n        var targetElement, touch, selection;\n\n        // Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\n        if (event.targetTouches.length > 1) {\n            return true;\n        }\n\n        targetElement = this.getTargetElementFromEventTarget(event.target);\n        touch = event.targetTouches[0];\n\n        if (deviceIsIOS) {\n\n            // Only trusted events will deselect text on iOS (issue #49)\n            selection = window.getSelection();\n            if (selection.rangeCount && !selection.isCollapsed) {\n                return true;\n            }\n\n            if (!deviceIsIOS4) {\n\n                // Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\n                // when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\n                // with the same identifier as the touch event that previously triggered the click that triggered the alert.\n                // Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\n                // immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.\n                // Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,\n                // which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,\n                // random integers, it's safe to to continue if the identifier is 0 here.\n                if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {\n                    event.preventDefault();\n                    return false;\n                }\n\n                this.lastTouchIdentifier = touch.identifier;\n\n                // If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\n                // 1) the user does a fling scroll on the scrollable layer\n                // 2) the user stops the fling scroll with another tap\n                // then the event.target of the last 'touchend' event will be the element that was under the user's finger\n                // when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\n                // is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\n                this.updateScrollParent(targetElement);\n            }\n        }\n\n        this.trackingClick = true;\n        this.trackingClickStart = event.timeStamp;\n        this.targetElement = targetElement;\n\n        this.touchStartX = touch.pageX;\n        this.touchStartY = touch.pageY;\n\n        // Prevent phantom clicks on fast double-tap (issue #36)\n        if (event.timeStamp - this.lastClickTime < this.tapDelay) {\n            event.preventDefault();\n        }\n\n        return true;\n    };\n\n    /**\n     * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.touchHasMoved = function (event) {\n        var touch = event.changedTouches[0],\n            boundary = this.touchBoundary;\n\n        if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     * Update the last position.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchMove = function (event) {\n        if (!this.trackingClick) {\n            return true;\n        }\n\n        // If the touch has moved, cancel the click tracking\n        if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\n            this.trackingClick = false;\n            this.targetElement = null;\n        }\n\n        return true;\n    };\n\n    /**\n     * Attempt to find the labelled control for the given label element.\n     *\n     * @param {EventTarget|HTMLLabelElement} labelElement\n     * @returns {Element|null}\n     */\n    FastClick.prototype.findControl = function (labelElement) {\n\n        // Fast path for newer browsers supporting the HTML5 control attribute\n        if (labelElement.control !== undefined) {\n            return labelElement.control;\n        }\n\n        // All browsers under test that support touch events also support the HTML5 htmlFor attribute\n        if (labelElement.htmlFor) {\n            return document.getElementById(labelElement.htmlFor);\n        }\n\n        // If no for attribute exists, attempt to retrieve the first labellable descendant element\n        // the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\n        return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\n    };\n\n    /**\n     * On touch end, determine whether to send a click event at once.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchEnd = function (event) {\n        var forElement,\n            trackingClickStart,\n            targetTagName,\n            scrollParent,\n            touch,\n            targetElement = this.targetElement;\n\n        if (!this.trackingClick) {\n            return true;\n        }\n\n        // Prevent phantom clicks on fast double-tap (issue #36)\n        if (event.timeStamp - this.lastClickTime < this.tapDelay) {\n            this.cancelNextClick = true;\n            return true;\n        }\n\n        if (event.timeStamp - this.trackingClickStart > this.tapTimeout) {\n            return true;\n        }\n\n        // Reset to prevent wrong click cancel on input (issue #156).\n        this.cancelNextClick = false;\n\n        this.lastClickTime = event.timeStamp;\n\n        trackingClickStart = this.trackingClickStart;\n        this.trackingClick = false;\n        this.trackingClickStart = 0;\n\n        // On some iOS devices, the targetElement supplied with the event is invalid if the layer\n        // is performing a transition or scroll, and has to be re-detected manually. Note that\n        // for this to function correctly, it must be called *after* the event target is checked!\n        // See issue #57; also filed as rdar://13048589 .\n        if (deviceIsIOSWithBadTarget) {\n            touch = event.changedTouches[0];\n\n            // In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\n            targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\n            targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\n        }\n\n        targetTagName = targetElement.tagName.toLowerCase();\n        if (targetTagName === 'label') {\n            forElement = this.findControl(targetElement);\n            if (forElement) {\n                this.focus(targetElement);\n                if (deviceIsAndroid) {\n                    return false;\n                }\n\n                targetElement = forElement;\n            }\n        } else if (this.needsFocus(targetElement)) {\n\n            // Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\n            // Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\n            if (event.timeStamp - trackingClickStart > 100 || deviceIsIOS && window.top !== window && targetTagName === 'input') {\n                this.targetElement = null;\n                return false;\n            }\n\n            this.focus(targetElement);\n            this.sendClick(targetElement, event);\n\n            // Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\n            // Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)\n            if (!deviceIsIOS || targetTagName !== 'select') {\n                this.targetElement = null;\n                event.preventDefault();\n            }\n\n            return false;\n        } else {\n            var parent = targetElement;\n            while (parent && parent.tagName.toUpperCase() !== \"BODY\") {\n                if (parent.tagName.toUpperCase() === \"LABEL\") {\n                    $(parent).find(\"input\").click();\n                }\n                parent = parent.parentNode;\n            }\n        }\n\n        if (deviceIsIOS && !deviceIsIOS4) {\n\n            // Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\n            // and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\n            scrollParent = targetElement.fastClickScrollParent;\n            if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\n                return true;\n            }\n        }\n\n        // Prevent the actual click from going though - unless the target node is marked as requiring\n        // real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\n        if (!this.needsClick(targetElement)) {\n            event.preventDefault();\n            this.sendClick(targetElement, event);\n        }\n\n        return false;\n    };\n\n    /**\n     * On touch cancel, stop tracking the click.\n     *\n     * @returns {void}\n     */\n    FastClick.prototype.onTouchCancel = function () {\n        this.trackingClick = false;\n        this.targetElement = null;\n    };\n\n    /**\n     * Determine mouse events which should be permitted.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onMouse = function (event) {\n\n        // If a target element was never set (because a touch event was never fired) allow the event\n        if (!this.targetElement) {\n            return true;\n        }\n\n        if (event.forwardedTouchEvent) {\n            return true;\n        }\n\n        // Programmatically generated events targeting a specific element should be permitted\n        if (!event.cancelable) {\n            return true;\n        }\n\n        // Derive and check the target element to see whether the mouse event needs to be permitted;\n        // unless explicitly enabled, prevent non-touch click events from triggering actions,\n        // to prevent ghost/doubleclicks.\n        if (!this.needsClick(this.targetElement) || this.cancelNextClick) {\n\n            // Prevent any user-added listeners declared on FastClick element from being fired.\n            if (event.stopImmediatePropagation) {\n                event.stopImmediatePropagation();\n            } else {\n\n                // Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n                event.propagationStopped = true;\n            }\n\n            // Cancel the event\n            event.stopPropagation();\n            event.preventDefault();\n\n            return false;\n        }\n\n        // If the mouse event is permitted, return true for the action to go through.\n        return true;\n    };\n\n    /**\n     * On actual clicks, determine whether this is a touch-generated click, a click action occurring\n     * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\n     * an actual click which should be permitted.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onClick = function (event) {\n        var permitted;\n\n        // It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\n        if (this.trackingClick) {\n            this.targetElement = null;\n            this.trackingClick = false;\n            return true;\n        }\n\n        // Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\n        if (event.target.type === 'submit' && event.detail === 0) {\n            return true;\n        }\n\n        permitted = this.onMouse(event);\n\n        // Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\n        if (!permitted) {\n            this.targetElement = null;\n        }\n\n        // If clicks are permitted, return true for the action to go through.\n        return permitted;\n    };\n\n    /**\n     * Remove all FastClick's event listeners.\n     *\n     * @returns {void}\n     */\n    FastClick.prototype.destroy = function () {\n        var layer = this.layer;\n\n        if (deviceIsAndroid) {\n            layer.removeEventListener('mouseover', this.onMouse, true);\n            layer.removeEventListener('mousedown', this.onMouse, true);\n            layer.removeEventListener('mouseup', this.onMouse, true);\n        }\n\n        layer.removeEventListener('click', this.onClick, true);\n        layer.removeEventListener('touchstart', this.onTouchStart, false);\n        layer.removeEventListener('touchmove', this.onTouchMove, false);\n        layer.removeEventListener('touchend', this.onTouchEnd, false);\n        layer.removeEventListener('touchcancel', this.onTouchCancel, false);\n    };\n\n    /**\n     * Check whether FastClick is needed.\n     *\n     * @param {Element} layer The layer to listen on\n     */\n    FastClick.notNeeded = function (layer) {\n        var metaViewport;\n        var chromeVersion;\n        var blackberryVersion;\n        var firefoxVersion;\n\n        // Devices that don't support touch don't need FastClick\n        if (typeof window.ontouchstart === 'undefined') {\n            return true;\n        }\n\n        // Chrome version - zero for other browsers\n        chromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];\n\n        if (chromeVersion) {\n\n            if (deviceIsAndroid) {\n                metaViewport = document.querySelector('meta[name=viewport]');\n\n                if (metaViewport) {\n                    // Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\n                    if (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n                        return true;\n                    }\n                    // Chrome 32 and above with width=device-width or less don't need FastClick\n                    if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {\n                        return true;\n                    }\n                }\n\n                // Chrome desktop doesn't need FastClick (issue #15)\n            } else {\n                return true;\n            }\n        }\n\n        if (deviceIsBlackBerry10) {\n            blackberryVersion = navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/);\n\n            // BlackBerry 10.3+ does not require Fastclick library.\n            // https://github.com/ftlabs/fastclick/issues/251\n            if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {\n                metaViewport = document.querySelector('meta[name=viewport]');\n\n                if (metaViewport) {\n                    // user-scalable=no eliminates click delay.\n                    if (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n                        return true;\n                    }\n                    // width=device-width (or less than device-width) eliminates click delay.\n                    if (document.documentElement.scrollWidth <= window.outerWidth) {\n                        return true;\n                    }\n                }\n            }\n        }\n\n        // IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)\n        if (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {\n            return true;\n        }\n\n        // Firefox version - zero for other browsers\n        firefoxVersion = +(/Firefox\\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];\n\n        if (firefoxVersion >= 27) {\n            // Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896\n\n            metaViewport = document.querySelector('meta[name=viewport]');\n            if (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {\n                return true;\n            }\n        }\n\n        // IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version\n        // http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx\n        if (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     * Factory method for creating a FastClick object\n     *\n     * @param {Element} layer The layer to listen on\n     * @param {Object} [options={}] The options to override the defaults\n     */\n    FastClick.attach = function (layer, options) {\n        return new FastClick(layer, options);\n    };\n\n    //\n    $(function () {\n        FastClick.attach(document.body);\n    });\n})($);\n\n/*===========================\n  Template7 Template engine\n  ===========================*/\n/* global $:true */\n/* jshint unused:false */\n/* jshint forin:false */\n+function ($) {\n    \"use strict\";\n\n    $.Template7 = $.t7 = function () {\n        function isArray(arr) {\n            return Object.prototype.toString.apply(arr) === '[object Array]';\n        }\n\n        function isObject(obj) {\n            return obj instanceof Object;\n        }\n\n        function isFunction(func) {\n            return typeof func === 'function';\n        }\n        var cache = {};\n\n        function helperToSlices(string) {\n            var helperParts = string.replace(/[{}#}]/g, '').split(' ');\n            var slices = [];\n            var shiftIndex, i, j;\n            for (i = 0; i < helperParts.length; i++) {\n                var part = helperParts[i];\n                if (i === 0) slices.push(part);else {\n                    if (part.indexOf('\"') === 0) {\n                        // Plain String\n                        if (part.match(/\"/g).length === 2) {\n                            // One word string\n                            slices.push(part);\n                        } else {\n                            // Find closed Index\n                            shiftIndex = 0;\n                            for (j = i + 1; j < helperParts.length; j++) {\n                                part += ' ' + helperParts[j];\n                                if (helperParts[j].indexOf('\"') >= 0) {\n                                    shiftIndex = j;\n                                    slices.push(part);\n                                    break;\n                                }\n                            }\n                            if (shiftIndex) i = shiftIndex;\n                        }\n                    } else {\n                        if (part.indexOf('=') > 0) {\n                            // Hash\n                            var hashParts = part.split('=');\n                            var hashName = hashParts[0];\n                            var hashContent = hashParts[1];\n                            if (hashContent.match(/\"/g).length !== 2) {\n                                shiftIndex = 0;\n                                for (j = i + 1; j < helperParts.length; j++) {\n                                    hashContent += ' ' + helperParts[j];\n                                    if (helperParts[j].indexOf('\"') >= 0) {\n                                        shiftIndex = j;\n                                        break;\n                                    }\n                                }\n                                if (shiftIndex) i = shiftIndex;\n                            }\n                            var hash = [hashName, hashContent.replace(/\"/g, '')];\n                            slices.push(hash);\n                        } else {\n                            // Plain variable\n                            slices.push(part);\n                        }\n                    }\n                }\n            }\n            return slices;\n        }\n\n        function stringToBlocks(string) {\n            var blocks = [],\n                i,\n                j,\n                k;\n            if (!string) return [];\n            var _blocks = string.split(/({{[^{^}]*}})/);\n            for (i = 0; i < _blocks.length; i++) {\n                var block = _blocks[i];\n                if (block === '') continue;\n                if (block.indexOf('{{') < 0) {\n                    blocks.push({\n                        type: 'plain',\n                        content: block\n                    });\n                } else {\n                    if (block.indexOf('{/') >= 0) {\n                        continue;\n                    }\n                    if (block.indexOf('{#') < 0 && block.indexOf(' ') < 0 && block.indexOf('else') < 0) {\n                        // Simple variable\n                        blocks.push({\n                            type: 'variable',\n                            contextName: block.replace(/[{}]/g, '')\n                        });\n                        continue;\n                    }\n                    // Helpers\n                    var helperSlices = helperToSlices(block);\n                    var helperName = helperSlices[0];\n                    var helperContext = [];\n                    var helperHash = {};\n                    for (j = 1; j < helperSlices.length; j++) {\n                        var slice = helperSlices[j];\n                        if (isArray(slice)) {\n                            // Hash\n                            helperHash[slice[0]] = slice[1] === 'false' ? false : slice[1];\n                        } else {\n                            helperContext.push(slice);\n                        }\n                    }\n\n                    if (block.indexOf('{#') >= 0) {\n                        // Condition/Helper\n                        var helperStartIndex = i;\n                        var helperContent = '';\n                        var elseContent = '';\n                        var toSkip = 0;\n                        var shiftIndex;\n                        var foundClosed = false,\n                            foundElse = false,\n                            foundClosedElse = false,\n                            depth = 0;\n                        for (j = i + 1; j < _blocks.length; j++) {\n                            if (_blocks[j].indexOf('{{#') >= 0) {\n                                depth++;\n                            }\n                            if (_blocks[j].indexOf('{{/') >= 0) {\n                                depth--;\n                            }\n                            if (_blocks[j].indexOf('{{#' + helperName) >= 0) {\n                                helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                                toSkip++;\n                            } else if (_blocks[j].indexOf('{{/' + helperName) >= 0) {\n                                if (toSkip > 0) {\n                                    toSkip--;\n                                    helperContent += _blocks[j];\n                                    if (foundElse) elseContent += _blocks[j];\n                                } else {\n                                    shiftIndex = j;\n                                    foundClosed = true;\n                                    break;\n                                }\n                            } else if (_blocks[j].indexOf('else') >= 0 && depth === 0) {\n                                foundElse = true;\n                            } else {\n                                if (!foundElse) helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                            }\n                        }\n                        if (foundClosed) {\n                            if (shiftIndex) i = shiftIndex;\n                            blocks.push({\n                                type: 'helper',\n                                helperName: helperName,\n                                contextName: helperContext,\n                                content: helperContent,\n                                inverseContent: elseContent,\n                                hash: helperHash\n                            });\n                        }\n                    } else if (block.indexOf(' ') > 0) {\n                        blocks.push({\n                            type: 'helper',\n                            helperName: helperName,\n                            contextName: helperContext,\n                            hash: helperHash\n                        });\n                    }\n                }\n            }\n            return blocks;\n        }\n        var Template7 = function Template7(template) {\n            var t = this;\n            t.template = template;\n\n            function getCompileFn(block, depth) {\n                if (block.content) return compile(block.content, depth);else return function () {\n                    return '';\n                };\n            }\n\n            function getCompileInverse(block, depth) {\n                if (block.inverseContent) return compile(block.inverseContent, depth);else return function () {\n                    return '';\n                };\n            }\n\n            function getCompileVar(name, ctx) {\n                var variable,\n                    parts,\n                    levelsUp = 0,\n                    initialCtx = ctx;\n                if (name.indexOf('../') === 0) {\n                    levelsUp = name.split('../').length - 1;\n                    var newDepth = ctx.split('_')[1] - levelsUp;\n                    ctx = 'ctx_' + (newDepth >= 1 ? newDepth : 1);\n                    parts = name.split('../')[levelsUp].split('.');\n                } else if (name.indexOf('@global') === 0) {\n                    ctx = '$.Template7.global';\n                    parts = name.split('@global.')[1].split('.');\n                } else if (name.indexOf('@root') === 0) {\n                    ctx = 'ctx_1';\n                    parts = name.split('@root.')[1].split('.');\n                } else {\n                    parts = name.split('.');\n                }\n                variable = ctx;\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    if (part.indexOf('@') === 0) {\n                        if (i > 0) {\n                            variable += '[(data && data.' + part.replace('@', '') + ')]';\n                        } else {\n                            variable = '(data && data.' + name.replace('@', '') + ')';\n                        }\n                    } else {\n                        if (isFinite(part)) {\n                            variable += '[' + part + ']';\n                        } else {\n                            if (part.indexOf('this') === 0) {\n                                variable = part.replace('this', ctx);\n                            } else {\n                                variable += '.' + part;\n                            }\n                        }\n                    }\n                }\n\n                return variable;\n            }\n\n            function getCompiledArguments(contextArray, ctx) {\n                var arr = [];\n                for (var i = 0; i < contextArray.length; i++) {\n                    if (contextArray[i].indexOf('\"') === 0) arr.push(contextArray[i]);else {\n                        arr.push(getCompileVar(contextArray[i], ctx));\n                    }\n                }\n                return arr.join(', ');\n            }\n\n            function compile(template, depth) {\n                depth = depth || 1;\n                template = template || t.template;\n                if (typeof template !== 'string') {\n                    throw new Error('Template7: Template must be a string');\n                }\n                var blocks = stringToBlocks(template);\n                if (blocks.length === 0) {\n                    return function () {\n                        return '';\n                    };\n                }\n                var ctx = 'ctx_' + depth;\n                var resultString = '(function (' + ctx + ', data) {\\n';\n                if (depth === 1) {\n                    resultString += 'function isArray(arr){return Object.prototype.toString.apply(arr) === \\'[object Array]\\';}\\n';\n                    resultString += 'function isFunction(func){return (typeof func === \\'function\\');}\\n';\n                    resultString += 'function c(val, ctx) {if (typeof val !== \"undefined\") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return \"\";}\\n';\n                }\n                resultString += 'var r = \\'\\';\\n';\n                var i, j, context;\n                for (i = 0; i < blocks.length; i++) {\n                    var block = blocks[i];\n                    // Plain block\n                    if (block.type === 'plain') {\n                        resultString += 'r +=\\'' + block.content.replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/'/g, '\\\\' + '\\'') + '\\';';\n                        continue;\n                    }\n                    var variable, compiledArguments;\n                    // Variable block\n                    if (block.type === 'variable') {\n                        variable = getCompileVar(block.contextName, ctx);\n                        resultString += 'r += c(' + variable + ', ' + ctx + ');';\n                    }\n                    // Helpers block\n                    if (block.type === 'helper') {\n                        if (block.helperName in t.helpers) {\n                            compiledArguments = getCompiledArguments(block.contextName, ctx);\n                            resultString += 'r += ($.Template7.helpers.' + block.helperName + ').call(' + ctx + ', ' + (compiledArguments && compiledArguments + ', ') + '{hash:' + (0, _stringify2.default)(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                        } else {\n                            if (block.contextName.length > 0) {\n                                throw new Error('Template7: Missing helper: \"' + block.helperName + '\"');\n                            } else {\n                                variable = getCompileVar(block.helperName, ctx);\n                                resultString += 'if (' + variable + ') {';\n                                resultString += 'if (isArray(' + variable + ')) {';\n                                resultString += 'r += ($.Template7.helpers.each).call(' + ctx + ', ' + variable + ', {hash:' + (0, _stringify2.default)(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                                resultString += '}else {';\n                                resultString += 'r += ($.Template7.helpers.with).call(' + ctx + ', ' + variable + ', {hash:' + (0, _stringify2.default)(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                                resultString += '}}';\n                            }\n                        }\n                    }\n                }\n                resultString += '\\nreturn r;})';\n                return eval.call(window, resultString);\n            }\n            t.compile = function (template) {\n                if (!t.compiled) {\n                    t.compiled = compile(template);\n                }\n                return t.compiled;\n            };\n        };\n        Template7.prototype = {\n            options: {},\n            helpers: {\n                'if': function _if(context, options) {\n                    if (isFunction(context)) {\n                        context = context.call(this);\n                    }\n                    if (context) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'unless': function unless(context, options) {\n                    if (isFunction(context)) {\n                        context = context.call(this);\n                    }\n                    if (!context) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'each': function each(context, options) {\n                    var ret = '',\n                        i = 0;\n                    if (isFunction(context)) {\n                        context = context.call(this);\n                    }\n                    if (isArray(context)) {\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                        for (i = 0; i < context.length; i++) {\n                            ret += options.fn(context[i], { first: i === 0, last: i === context.length - 1, index: i });\n                        }\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                    } else {\n                        for (var key in context) {\n                            i++;\n                            ret += options.fn(context[key], { key: key });\n                        }\n                    }\n                    if (i > 0) return ret;else return options.inverse(this);\n                },\n                'with': function _with(context, options) {\n                    if (isFunction(context)) {\n                        context = context.call(this);\n                    }\n                    return options.fn(context);\n                },\n                'join': function join(context, options) {\n                    if (isFunction(context)) {\n                        context = context.call(this);\n                    }\n                    return context.join(options.hash.delimiter || options.hash.delimeter);\n                },\n                'js': function js(expression, options) {\n                    var func;\n                    if (expression.indexOf('return') >= 0) {\n                        func = '(function(){' + expression + '})';\n                    } else {\n                        func = '(function(){return (' + expression + ')})';\n                    }\n                    return eval.call(this, func).call(this);\n                },\n                'js_compare': function js_compare(expression, options) {\n                    var func;\n                    if (expression.indexOf('return') >= 0) {\n                        func = '(function(){' + expression + '})';\n                    } else {\n                        func = '(function(){return (' + expression + ')})';\n                    }\n                    var condition = eval.call(this, func).call(this);\n                    if (condition) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                }\n            }\n        };\n        var t7 = function t7(template, data) {\n            if (arguments.length === 2) {\n                var instance = new Template7(template);\n                var rendered = instance.compile()(data);\n                instance = null;\n                return rendered;\n            } else return new Template7(template);\n        };\n        t7.registerHelper = function (name, fn) {\n            Template7.prototype.helpers[name] = fn;\n        };\n        t7.unregisterHelper = function (name) {\n            Template7.prototype.helpers[name] = undefined;\n            delete Template7.prototype.helpers[name];\n        };\n\n        t7.compile = function (template, options) {\n            var instance = new Template7(template, options);\n            return instance.compile();\n        };\n\n        t7.options = Template7.prototype.options;\n        t7.helpers = Template7.prototype.helpers;\n        return t7;\n    }();\n}($);\n\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    $.getCurrentPage = function () {\n        return $(\".page\")[0] || document.body;\n    };\n}($);\n\n/* ===============================================================================\n************   Tabs   ************\n=============================================================================== */\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    var showTab = function showTab(tab, tabLink, force) {\n        var newTab = $(tab);\n\n        var activeClass = newTab.hasClass(\"page\") ? \"page-current\" : \"active\";\n        if (arguments.length === 2) {\n            if (typeof tabLink === 'boolean') {\n                force = tabLink;\n            }\n        }\n        if (newTab.length === 0) return false;\n        if (newTab.hasClass(activeClass)) {\n            if (force) newTab.trigger('show');\n            return false;\n        }\n        var tabs = newTab.parent('.tabs');\n        if (tabs.length === 0) return false;\n\n        // Animated tabs\n        /*var isAnimatedTabs = tabs.parent().hasClass('tabs-animated-wrap');\n          if (isAnimatedTabs) {\n          tabs.transform('translate3d(' + -newTab.index() * 100 + '%,0,0)');\n          }*/\n\n        // Remove active class from old tabs\n        var oldTab = tabs.children('.tab.' + activeClass).removeClass(activeClass);\n        // Add active class to new tab\n        newTab.addClass(activeClass);\n        // Trigger 'show' event on new tab\n        newTab.trigger('show');\n\n        // Update navbars in new tab\n        /*if (!isAnimatedTabs && newTab.find('.navbar').length > 0) {\n        // Find tab's view\n        var viewContainer;\n        if (newTab.hasClass(app.params.viewClass)) viewContainer = newTab[0];\n        else viewContainer = newTab.parents('.' + app.params.viewClass)[0];\n        app.sizeNavbars(viewContainer);\n        }*/\n\n        // Find related link for new tab\n        if (tabLink) tabLink = $(tabLink);else {\n            // Search by id\n            if (typeof tab === 'string') tabLink = $('.tab-link[href=\"' + tab + '\"]');else tabLink = $('.tab-link[href=\"#' + newTab.attr('id') + '\"]');\n            // Search by data-tab\n            if (!tabLink || tabLink && tabLink.length === 0) {\n                $('[data-tab]').each(function () {\n                    if (newTab.is($(this).attr('data-tab'))) tabLink = $(this);\n                });\n            }\n        }\n        if (tabLink.length === 0) return;\n\n        // Find related link for old tab\n        var oldTabLink;\n        if (oldTab && oldTab.length > 0) {\n            // Search by id\n            var oldTabId = oldTab.attr('id');\n            if (oldTabId) oldTabLink = $('.tab-link[href=\"#' + oldTabId + '\"]');\n            // Search by data-tab\n            if (!oldTabLink || oldTabLink && oldTabLink.length === 0) {\n                $('[data-tab]').each(function () {\n                    if (oldTab.is($(this).attr('data-tab'))) oldTabLink = $(this);\n                });\n            }\n        }\n\n        // Update links' classes\n        if (tabLink && tabLink.length > 0) tabLink.addClass('active');\n        if (oldTabLink && oldTabLink.length > 0) oldTabLink.removeClass('active');\n\n        return true;\n    };\n\n    var old = $.showTab;\n    $.showTab = showTab;\n\n    $.showTab.noConflict = function () {\n        $.showTab = old;\n        return this;\n    };\n\n    $(document).on(\"click\", \".tab-link\", function (e) {\n        e.preventDefault();\n        var clicked = $(this);\n        showTab(clicked.data(\"tab\") || clicked.attr('href'), clicked);\n    });\n}($);\n\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    $(document).on(\"click\", \".tab-item\", function (e) {\n        var $target = $(e.currentTarget);\n        if (!$target.hasClass(\"tab-link\")) {\n            $target.parent().find(\".active\").removeClass(\"active\");\n            $target.addClass(\"active\");\n        }\n    });\n\n    var highlight = function highlight(e, pageId) {\n        var $tab = $(\".bar-tab .tab-item[href='#\" + pageId + \"']\");\n        // $tab.parent().find(\".active\").removeClass(\"active\");\n        // $tab.addClass(\"active\");\n    };\n    $(document).on(\"pageInit\", highlight);\n    $(document).on(\"pageReinit\", highlight);\n\n    $.showToolbar = function (show) {\n        $(document.body)[show ? \"removeClass\" : \"addClass\"](\"tabbar-hidden\");\n    };\n}($);\n\n/*======================================================\n************   Modals   ************\n======================================================*/\n/*jshint unused: false*/\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    var _modalTemplateTempDiv = document.createElement('div');\n\n    $.modalStack = [];\n    var t7 = $.Template7;\n\n    $.modalStackClearQueue = function () {\n        if ($.modalStack.length) {\n            $.modalStack.shift()();\n        }\n    };\n    $.modal = function (params) {\n        params = params || {};\n        var modalHTML = '';\n        if (defaults.modalTemplate) {\n            if (!$._compiledTemplates.modal) $._compiledTemplates.modal = t7.compile(defaults.modalTemplate);\n            modalHTML = $._compiledTemplates.modal(params);\n        } else {\n            var buttonsHTML = '';\n            if (params.buttons && params.buttons.length > 0) {\n                for (var i = 0; i < params.buttons.length; i++) {\n                    buttonsHTML += '<span class=\"modal-button' + (params.buttons[i].bold ? ' modal-button-bold' : '') + '\">' + params.buttons[i].text + '</span>';\n                }\n            }\n            var titleHTML = params.title ? '<div class=\"modal-title\">' + params.title + '</div>' : '';\n            var textHTML = params.text ? '<div class=\"modal-text\">' + params.text + '</div>' : '';\n            var afterTextHTML = params.afterText ? params.afterText : '';\n            var noButtons = !params.buttons || params.buttons.length === 0 ? 'modal-no-buttons' : '';\n            var verticalButtons = params.verticalButtons ? 'modal-buttons-vertical' : '';\n            modalHTML = '<div class=\"modal ' + noButtons + '\"><div class=\"modal-inner\">' + (titleHTML + textHTML + afterTextHTML) + '</div><div class=\"modal-buttons ' + verticalButtons + '\">' + buttonsHTML + '</div></div>';\n        }\n\n        _modalTemplateTempDiv.innerHTML = modalHTML;\n\n        var modal = $(_modalTemplateTempDiv).children();\n\n        $(defaults.modalContainer).append(modal[0]);\n\n        // Add events on buttons\n        modal.find('.modal-button').each(function (index, el) {\n            $(el).on('click', function (e) {\n                if (params.buttons[index].close !== false) $.closeModal(modal);\n                if (params.buttons[index].onClick) params.buttons[index].onClick(modal, e);\n                if (params.onClick) params.onClick(modal, index);\n            });\n        });\n        $.openModal(modal);\n        return modal[0];\n    };\n    $.alert = function (text, title, callbackOk) {\n        if (typeof title === 'function') {\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            buttons: [{ text: defaults.modalButtonOk, bold: true, onClick: callbackOk }]\n        });\n    };\n    $.confirm = function (text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            buttons: [{ text: defaults.modalButtonCancel, onClick: callbackCancel }, { text: defaults.modalButtonOk, bold: true, onClick: callbackOk }]\n        });\n    };\n    $.prompt = function (text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"text\" class=\"modal-text-input\">',\n            buttons: [{\n                text: defaults.modalButtonCancel\n            }, {\n                text: defaults.modalButtonOk,\n                bold: true\n            }],\n            onClick: function onClick(modal, index) {\n                if (index === 0 && callbackCancel) callbackCancel($(modal).find('.modal-text-input').val());\n                if (index === 1 && callbackOk) callbackOk($(modal).find('.modal-text-input').val());\n            }\n        });\n    };\n    $.modalLogin = function (text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"text\" name=\"modal-username\" placeholder=\"' + defaults.modalUsernamePlaceholder + '\" class=\"modal-text-input modal-text-input-double\"><input type=\"password\" name=\"modal-password\" placeholder=\"' + defaults.modalPasswordPlaceholder + '\" class=\"modal-text-input modal-text-input-double\">',\n            buttons: [{\n                text: defaults.modalButtonCancel\n            }, {\n                text: defaults.modalButtonOk,\n                bold: true\n            }],\n            onClick: function onClick(modal, index) {\n                var username = $(modal).find('.modal-text-input[name=\"modal-username\"]').val();\n                var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                if (index === 0 && callbackCancel) callbackCancel(username, password);\n                if (index === 1 && callbackOk) callbackOk(username, password);\n            }\n        });\n    };\n    $.modalPassword = function (text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"password\" name=\"modal-password\" placeholder=\"' + defaults.modalPasswordPlaceholder + '\" class=\"modal-text-input\">',\n            buttons: [{\n                text: defaults.modalButtonCancel\n            }, {\n                text: defaults.modalButtonOk,\n                bold: true\n            }],\n            onClick: function onClick(modal, index) {\n                var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                if (index === 0 && callbackCancel) callbackCancel(password);\n                if (index === 1 && callbackOk) callbackOk(password);\n            }\n        });\n    };\n    $.showPreloader = function (title) {\n        return $.modal({\n            title: title || defaults.modalPreloaderTitle,\n            text: '<div class=\"preloader\"></div>'\n        });\n    };\n    $.hidePreloader = function () {\n        $.closeModal('.modal.modal-in');\n    };\n    $.showIndicator = function () {\n        $(defaults.modalContainer).append('<div class=\"preloader-indicator-overlay\"></div><div class=\"preloader-indicator-modal\"><span class=\"preloader preloader-white\"></span></div>');\n    };\n    $.hideIndicator = function () {\n        $('.preloader-indicator-overlay, .preloader-indicator-modal').remove();\n    };\n    // Action Sheet\n    $.actions = function (target, params) {\n        var toPopover = false,\n            modal,\n            groupSelector,\n            buttonSelector;\n        if (arguments.length === 1) {\n            // Actions\n            params = target;\n        } else {\n            // Popover\n            if ($.device.ios) {\n                if ($.device.ipad) toPopover = true;\n            } else {\n                if ($(window).width() >= 768) toPopover = true;\n            }\n        }\n        params = params || [];\n\n        if (params.length > 0 && !$.isArray(params[0])) {\n            params = [params];\n        }\n        var modalHTML;\n        if (toPopover) {\n            var actionsToPopoverTemplate = defaults.modalActionsToPopoverTemplate || '<div class=\"popover actions-popover\">' + '<div class=\"popover-inner\">' + '{{#each this}}' + '<div class=\"list-block\">' + '<ul>' + '{{#each this}}' + '{{#if label}}' + '<li class=\"actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}\">{{text}}</li>' + '{{else}}' + '<li><a href=\"#\" class=\"item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}\">{{text}}</a></li>' + '{{/if}}' + '{{/each}}' + '</ul>' + '</div>' + '{{/each}}' + '</div>' + '</div>';\n            if (!$._compiledTemplates.actionsToPopover) {\n                $._compiledTemplates.actionsToPopover = t7.compile(actionsToPopoverTemplate);\n            }\n            var popoverHTML = $._compiledTemplates.actionsToPopover(params);\n            modal = $($.popover(popoverHTML, target, true));\n            groupSelector = '.list-block ul';\n            buttonSelector = '.list-button';\n        } else {\n            if (defaults.modalActionsTemplate) {\n                if (!$._compiledTemplates.actions) $._compiledTemplates.actions = t7.compile(defaults.modalActionsTemplate);\n                modalHTML = $._compiledTemplates.actions(params);\n            } else {\n                var buttonsHTML = '';\n                for (var i = 0; i < params.length; i++) {\n                    for (var j = 0; j < params[i].length; j++) {\n                        if (j === 0) buttonsHTML += '<div class=\"actions-modal-group\">';\n                        var button = params[i][j];\n                        var buttonClass = button.label ? 'actions-modal-label' : 'actions-modal-button';\n                        if (button.bold) buttonClass += ' actions-modal-button-bold';\n                        if (button.color) buttonClass += ' color-' + button.color;\n                        if (button.bg) buttonClass += ' bg-' + button.bg;\n                        if (button.disabled) buttonClass += ' disabled';\n                        buttonsHTML += '<span class=\"' + buttonClass + '\">' + button.text + '</span>';\n                        if (j === params[i].length - 1) buttonsHTML += '</div>';\n                    }\n                }\n                modalHTML = '<div class=\"actions-modal\">' + buttonsHTML + '</div>';\n            }\n            _modalTemplateTempDiv.innerHTML = modalHTML;\n            modal = $(_modalTemplateTempDiv).children();\n            $(defaults.modalContainer).append(modal[0]);\n            groupSelector = '.actions-modal-group';\n            buttonSelector = '.actions-modal-button';\n        }\n\n        var groups = modal.find(groupSelector);\n        groups.each(function (index, el) {\n            var groupIndex = index;\n            $(el).children().each(function (index, el) {\n                var buttonIndex = index;\n                var buttonParams = params[groupIndex][buttonIndex];\n                var clickTarget;\n                if (!toPopover && $(el).is(buttonSelector)) clickTarget = $(el);\n                if (toPopover && $(el).find(buttonSelector).length > 0) clickTarget = $(el).find(buttonSelector);\n\n                if (clickTarget) {\n                    clickTarget.on('click', function (e) {\n                        if (buttonParams.close !== false) $.closeModal(modal);\n                        if (buttonParams.onClick) buttonParams.onClick(modal, e);\n                    });\n                }\n            });\n        });\n        if (!toPopover) $.openModal(modal);\n        return modal[0];\n    };\n    $.popover = function (modal, target, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n            var _modal = document.createElement('div');\n            _modal.innerHTML = modal.trim();\n            if (_modal.childNodes.length > 0) {\n                modal = _modal.childNodes[0];\n                if (removeOnClose) modal.classList.add('remove-on-close');\n                $(defaults.modalContainer).append(modal);\n            } else return false; //nothing found\n        }\n        modal = $(modal);\n        target = $(target);\n        if (modal.length === 0 || target.length === 0) return false;\n        if (modal.find('.popover-angle').length === 0) {\n            modal.append('<div class=\"popover-angle\"></div>');\n        }\n        modal.show();\n\n        function sizePopover() {\n            modal.css({ left: '', top: '' });\n            var modalWidth = modal.width();\n            var modalHeight = modal.height(); // 13 - height of angle\n            var modalAngle = modal.find('.popover-angle');\n            var modalAngleSize = modalAngle.width() / 2;\n            var modalAngleLeft, modalAngleTop;\n            modalAngle.removeClass('on-left on-right on-top on-bottom').css({ left: '', top: '' });\n\n            var targetWidth = target.outerWidth();\n            var targetHeight = target.outerHeight();\n            var targetOffset = target.offset();\n            var targetParentPage = target.parents('.page');\n            if (targetParentPage.length > 0) {\n                targetOffset.top = targetOffset.top - targetParentPage[0].scrollTop;\n            }\n\n            var windowHeight = $(window).height();\n            var windowWidth = $(window).width();\n\n            var modalTop = 0;\n            var modalLeft = 0;\n            var diff = 0;\n            // Top Position\n            var modalPosition = 'top';\n\n            if (modalHeight + modalAngleSize < targetOffset.top) {\n                // On top\n                modalTop = targetOffset.top - modalHeight - modalAngleSize;\n            } else if (modalHeight + modalAngleSize < windowHeight - targetOffset.top - targetHeight) {\n                // On bottom\n                modalPosition = 'bottom';\n                modalTop = targetOffset.top + targetHeight + modalAngleSize;\n            } else {\n                // On middle\n                modalPosition = 'middle';\n                modalTop = targetHeight / 2 + targetOffset.top - modalHeight / 2;\n                diff = modalTop;\n                if (modalTop < 0) {\n                    modalTop = 5;\n                } else if (modalTop + modalHeight > windowHeight) {\n                    modalTop = windowHeight - modalHeight - 5;\n                }\n                diff = diff - modalTop;\n            }\n            // Horizontal Position\n            if (modalPosition === 'top' || modalPosition === 'bottom') {\n                modalLeft = targetWidth / 2 + targetOffset.left - modalWidth / 2;\n                diff = modalLeft;\n                if (modalLeft < 5) modalLeft = 5;\n                if (modalLeft + modalWidth > windowWidth) modalLeft = windowWidth - modalWidth - 5;\n                if (modalPosition === 'top') modalAngle.addClass('on-bottom');\n                if (modalPosition === 'bottom') modalAngle.addClass('on-top');\n                diff = diff - modalLeft;\n                modalAngleLeft = modalWidth / 2 - modalAngleSize + diff;\n                modalAngleLeft = Math.max(Math.min(modalAngleLeft, modalWidth - modalAngleSize * 2 - 6), 6);\n                modalAngle.css({ left: modalAngleLeft + 'px' });\n            } else if (modalPosition === 'middle') {\n                modalLeft = targetOffset.left - modalWidth - modalAngleSize;\n                modalAngle.addClass('on-right');\n                if (modalLeft < 5) {\n                    modalLeft = targetOffset.left + targetWidth + modalAngleSize;\n                    modalAngle.removeClass('on-right').addClass('on-left');\n                }\n                if (modalLeft + modalWidth > windowWidth) {\n                    modalLeft = windowWidth - modalWidth - 5;\n                    modalAngle.removeClass('on-right').addClass('on-left');\n                }\n                modalAngleTop = modalHeight / 2 - modalAngleSize + diff;\n                modalAngleTop = Math.max(Math.min(modalAngleTop, modalHeight - modalAngleSize * 2 - 6), 6);\n                modalAngle.css({ top: modalAngleTop + 'px' });\n            }\n\n            // Apply Styles\n            modal.css({ top: modalTop + 'px', left: modalLeft + 'px' });\n        }\n        sizePopover();\n\n        $(window).on('resize', sizePopover);\n        modal.on('close', function () {\n            $(window).off('resize', sizePopover);\n        });\n\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n\n        $.openModal(modal);\n        return modal[0];\n    };\n    $.popup = function (modal, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n            var _modal = document.createElement('div');\n            _modal.innerHTML = modal.trim();\n            if (_modal.childNodes.length > 0) {\n                modal = _modal.childNodes[0];\n                if (removeOnClose) modal.classList.add('remove-on-close');\n                $(defaults.modalContainer).append(modal);\n            } else return false; //nothing found\n        }\n        modal = $(modal);\n        if (modal.length === 0) return false;\n        modal.show();\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n        $.openModal(modal);\n\n        return modal[0];\n    };\n    $.pickerModal = function (pickerModal, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof pickerModal === 'string' && pickerModal.indexOf('<') >= 0) {\n            pickerModal = $(pickerModal);\n            if (pickerModal.length > 0) {\n                if (removeOnClose) pickerModal.addClass('remove-on-close');\n                $(defaults.modalContainer).append(pickerModal[0]);\n            } else return false; //nothing found\n        }\n        pickerModal = $(pickerModal);\n        if (pickerModal.length === 0) return false;\n        pickerModal.show();\n        $.openModal(pickerModal);\n        return pickerModal[0];\n    };\n    $.loginScreen = function (modal) {\n        if (!modal) modal = '.login-screen';\n        modal = $(modal);\n        if (modal.length === 0) return false;\n        modal.show();\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n        $.openModal(modal);\n        return modal[0];\n    };\n    //2\n    $.toast = function (msg, time) {\n        var $toast = $(\"<div class='modal toast'>\" + msg + \"</div>\").appendTo(document.body);\n        $.openModal($toast);\n        setTimeout(function () {\n            $.closeModal($toast);\n        }, time || 2000);\n    };\n    $.openModal = function (modal) {\n        if (defaults.closePrevious) $.closeModal();\n        modal = $(modal);\n        var isModal = modal.hasClass('modal');\n        if ($('.modal.modal-in:not(.modal-out)').length && defaults.modalStack && isModal) {\n            $.modalStack.push(function () {\n                $.openModal(modal);\n            });\n            return;\n        }\n        var isPopover = modal.hasClass('popover');\n        var isPopup = modal.hasClass('popup');\n        var isLoginScreen = modal.hasClass('login-screen');\n        var isPickerModal = modal.hasClass('picker-modal');\n        var isToast = modal.hasClass('toast');\n        if (isModal) {\n            modal.show();\n            modal.css({\n                marginTop: -Math.round(modal.outerHeight() / 2) + 'px'\n            });\n        }\n        if (isToast) {\n            modal.show();\n            modal.css({\n                marginLeft: -Math.round(parseInt(window.getComputedStyle(modal[0]).width) / 2) + 'px' //\n            });\n        }\n\n        var overlay;\n        if (!isLoginScreen && !isPickerModal && !isToast) {\n            if ($('.modal-overlay').length === 0 && !isPopup) {\n                $(defaults.modalContainer).append('<div class=\"modal-overlay\"></div>');\n            }\n            if ($('.popup-overlay').length === 0 && isPopup) {\n                $(defaults.modalContainer).append('<div class=\"popup-overlay\"></div>');\n            }\n            overlay = isPopup ? $('.popup-overlay') : $('.modal-overlay');\n        }\n\n        //Make sure that styles are applied, trigger relayout;\n        var clientLeft = modal[0].clientLeft;\n\n        // Trugger open event\n        modal.trigger('open');\n\n        // Picker modal body class\n        if (isPickerModal) {\n            $(defaults.modalContainer).addClass('with-picker-modal');\n        }\n\n        // Classes for transition in\n        if (!isLoginScreen && !isPickerModal && !isToast) overlay.addClass('modal-overlay-visible');\n        modal.removeClass('modal-out').addClass('modal-in').transitionEnd(function (e) {\n            if (modal.hasClass('modal-out')) modal.trigger('closed');else modal.trigger('opened');\n        });\n        return true;\n    };\n    $.closeModal = function (modal) {\n        modal = $(modal || '.modal-in');\n        if (typeof modal !== 'undefined' && modal.length === 0) {\n            return;\n        }\n        var isModal = modal.hasClass('modal');\n        var isPopover = modal.hasClass('popover');\n        var isPopup = modal.hasClass('popup');\n        var isLoginScreen = modal.hasClass('login-screen');\n        var isPickerModal = modal.hasClass('picker-modal');\n\n        var removeOnClose = modal.hasClass('remove-on-close');\n\n        var overlay = isPopup ? $('.popup-overlay') : $('.modal-overlay');\n        if (isPopup) {\n            if (modal.length === $('.popup.modal-in').length) {\n                overlay.removeClass('modal-overlay-visible');\n            }\n        } else if (!isPickerModal) {\n            overlay.removeClass('modal-overlay-visible');\n        }\n\n        modal.trigger('close');\n\n        // Picker modal body class\n        if (isPickerModal) {\n            $(defaults.modalContainer).removeClass('with-picker-modal');\n            $(defaults.modalContainer).addClass('picker-modal-closing');\n        }\n\n        if (!isPopover) {\n            modal.removeClass('modal-in').addClass('modal-out').transitionEnd(function (e) {\n                if (modal.hasClass('modal-out')) modal.trigger('closed');else modal.trigger('opened');\n\n                if (isPickerModal) {\n                    $(defaults.modalContainer).removeClass('picker-modal-closing');\n                }\n                if (isPopup || isLoginScreen || isPickerModal) {\n                    modal.removeClass('modal-out').hide();\n                    if (removeOnClose && modal.length > 0) {\n                        modal.remove();\n                    }\n                } else {\n                    modal.remove();\n                }\n            });\n            if (isModal && defaults.modalStack) {\n                $.modalStackClearQueue();\n            }\n        } else {\n            modal.removeClass('modal-in modal-out').trigger('closed').hide();\n            if (removeOnClose) {\n                modal.remove();\n            }\n        }\n        return true;\n    };\n\n    function handleClicks(e) {\n        /*jshint validthis:true */\n        var clicked = $(this);\n        var url = clicked.attr('href');\n\n        //Collect Clicked data- attributes\n        var clickedData = clicked.dataset();\n\n        // Popover\n        if (clicked.hasClass('open-popover')) {\n            var popover;\n            if (clickedData.popover) {\n                popover = clickedData.popover;\n            } else popover = '.popover';\n            $.popover(popover, clicked);\n        }\n        if (clicked.hasClass('close-popover')) {\n            $.closeModal('.popover.modal-in');\n        }\n        // Popup\n        var popup;\n        if (clicked.hasClass('open-popup')) {\n            if (clickedData.popup) {\n                popup = clickedData.popup;\n            } else popup = '.popup';\n            $.popup(popup);\n        }\n        if (clicked.hasClass('close-popup')) {\n            if (clickedData.popup) {\n                popup = clickedData.popup;\n            } else popup = '.popup.modal-in';\n            $.closeModal(popup);\n        }\n\n        // Close Modal\n        if (clicked.hasClass('modal-overlay')) {\n            if ($('.modal.modal-in').length > 0 && defaults.modalCloseByOutside) $.closeModal('.modal.modal-in');\n            if ($('.actions-modal.modal-in').length > 0 && defaults.actionsCloseByOutside) $.closeModal('.actions-modal.modal-in');\n\n            if ($('.popover.modal-in').length > 0) $.closeModal('.popover.modal-in');\n        }\n        if (clicked.hasClass('popup-overlay')) {\n            if ($('.popup.modal-in').length > 0 && defaults.popupCloseByOutside) $.closeModal('.popup.modal-in');\n        }\n    }\n\n    var defaults = $.modal.prototype.defaults = {\n        modalButtonOk: 'OK',\n        modalButtonCancel: 'Cancel',\n        modalPreloaderTitle: 'Loading...',\n        modalContainer: document.body,\n        modalCloseByOutside: true,\n        actionsCloseByOutside: false,\n        popupCloseByOutside: true,\n        closePrevious: true //close all previous modal before open\n    };\n\n    $(function () {\n        $(document).on('click', ' .modal-overlay, .popup-overlay, .close-popup, .open-popup, .open-popover, .close-popover, .close-picker', handleClicks);\n        defaults.modalContainer = defaults.modalContainer || document.body; //incase some one include js in head\n    });\n}($);\n\n/*======================================================\n************   Calendar   ************\n======================================================*/\n/* global $:true */\n/*jshint unused: false*/\n+function ($) {\n    \"use strict\";\n\n    var rtl = false;\n    var defaults;\n    var Calendar = function Calendar(params) {\n        var p = this;\n        params = params || {};\n        for (var def in defaults) {\n            if (typeof params[def] === 'undefined') {\n                params[def] = defaults[def];\n            }\n        }\n        p.params = params;\n        p.initialized = false;\n\n        // Inline flag\n        p.inline = p.params.container ? true : false;\n\n        // Is horizontal\n        p.isH = p.params.direction === 'horizontal';\n\n        // RTL inverter\n        var inverter = p.isH ? rtl ? -1 : 1 : 1;\n\n        // Animating flag\n        p.animating = false;\n\n        // Should be converted to popover\n        function isPopover() {\n            var toPopover = false;\n            if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n            if (!p.inline && p.params.input) {\n                if (p.params.onlyInPopover) toPopover = true;else {\n                    if ($.device.ios) {\n                        toPopover = $.device.ipad ? true : false;\n                    } else {\n                        if ($(window).width() >= 768) toPopover = true;\n                    }\n                }\n            }\n            return toPopover;\n        }\n\n        function inPopover() {\n            if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;else return false;\n        }\n\n        // Format date\n        function formatDate(date) {\n            date = new Date(date);\n            var year = date.getFullYear();\n            var month = date.getMonth();\n            var month1 = month + 1;\n            var day = date.getDate();\n            var weekDay = date.getDay();\n            return p.params.dateFormat.replace(/yyyy/g, year).replace(/yy/g, (year + '').substring(2)).replace(/mm/g, month1 < 10 ? '0' + month1 : month1).replace(/m/g, month1).replace(/MM/g, p.params.monthNames[month]).replace(/M/g, p.params.monthNamesShort[month]).replace(/dd/g, day < 10 ? '0' + day : day).replace(/d/g, day).replace(/DD/g, p.params.dayNames[weekDay]).replace(/D/g, p.params.dayNamesShort[weekDay]);\n        }\n\n        // Value\n        p.addValue = function (value) {\n            if (p.params.multiple) {\n                if (!p.value) p.value = [];\n                var inValuesIndex;\n                for (var i = 0; i < p.value.length; i++) {\n                    if (new Date(value).getTime() === new Date(p.value[i]).getTime()) {\n                        inValuesIndex = i;\n                    }\n                }\n                if (typeof inValuesIndex === 'undefined') {\n                    p.value.push(value);\n                } else {\n                    p.value.splice(inValuesIndex, 1);\n                }\n                p.updateValue();\n            } else {\n                p.value = [value];\n                p.updateValue();\n            }\n        };\n        p.setValue = function (arrValues) {\n            p.value = arrValues;\n            p.updateValue();\n        };\n        p.updateValue = function () {\n            p.wrapper.find('.picker-calendar-day-selected').removeClass('picker-calendar-day-selected');\n            var i, inputValue;\n            for (i = 0; i < p.value.length; i++) {\n                var valueDate = new Date(p.value[i]);\n                p.wrapper.find('.picker-calendar-day[data-date=\"' + valueDate.getFullYear() + '-' + valueDate.getMonth() + '-' + valueDate.getDate() + '\"]').addClass('picker-calendar-day-selected');\n            }\n            if (p.params.onChange) {\n                p.params.onChange(p, p.value, p.value.map(formatDate));\n            }\n            if (p.input && p.input.length > 0) {\n                if (p.params.formatValue) inputValue = p.params.formatValue(p, p.value);else {\n                    inputValue = [];\n                    for (i = 0; i < p.value.length; i++) {\n                        inputValue.push(formatDate(p.value[i]));\n                    }\n                    inputValue = inputValue.join(', ');\n                }\n                $(p.input).val(inputValue);\n                $(p.input).trigger('change');\n            }\n        };\n\n        // Columns Handlers\n        p.initCalendarEvents = function () {\n            var col;\n            var allowItemClick = true;\n            var isTouched, isMoved, touchStartX, touchStartY, touchCurrentX, touchCurrentY, touchStartTime, touchEndTime, startTranslate, currentTranslate, wrapperWidth, wrapperHeight, percentage, touchesDiff, isScrolling;\n\n            function handleTouchStart(e) {\n                if (isMoved || isTouched) return;\n                // e.preventDefault();\n                isTouched = true;\n                var position = $.getTouchPosition(e);\n                touchStartX = touchCurrentY = position.x;\n                touchStartY = touchCurrentY = position.y;\n                touchStartTime = new Date().getTime();\n                percentage = 0;\n                allowItemClick = true;\n                isScrolling = undefined;\n                startTranslate = currentTranslate = p.monthsTranslate;\n            }\n\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                var position = $.getTouchPosition(e);\n                touchCurrentX = position.x;\n                touchCurrentY = position.y;\n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n                }\n                if (p.isH && isScrolling) {\n                    isTouched = false;\n                    return;\n                }\n                e.preventDefault();\n                if (p.animating) {\n                    isTouched = false;\n                    return;\n                }\n                allowItemClick = false;\n                if (!isMoved) {\n                    // First move\n                    isMoved = true;\n                    wrapperWidth = p.wrapper[0].offsetWidth;\n                    wrapperHeight = p.wrapper[0].offsetHeight;\n                    p.wrapper.transition(0);\n                }\n                e.preventDefault();\n\n                touchesDiff = p.isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n                percentage = touchesDiff / (p.isH ? wrapperWidth : wrapperHeight);\n                currentTranslate = (p.monthsTranslate * inverter + percentage) * 100;\n\n                // Transform wrapper\n                p.wrapper.transform('translate3d(' + (p.isH ? currentTranslate : 0) + '%, ' + (p.isH ? 0 : currentTranslate) + '%, 0)');\n            }\n\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = isMoved = false;\n                    return;\n                }\n                isTouched = isMoved = false;\n\n                touchEndTime = new Date().getTime();\n                if (touchEndTime - touchStartTime < 300) {\n                    if (Math.abs(touchesDiff) < 10) {\n                        p.resetMonth();\n                    } else if (touchesDiff >= 10) {\n                        if (rtl) p.nextMonth();else p.prevMonth();\n                    } else {\n                        if (rtl) p.prevMonth();else p.nextMonth();\n                    }\n                } else {\n                    if (percentage <= -0.5) {\n                        if (rtl) p.prevMonth();else p.nextMonth();\n                    } else if (percentage >= 0.5) {\n                        if (rtl) p.nextMonth();else p.prevMonth();\n                    } else {\n                        p.resetMonth();\n                    }\n                }\n\n                // Allow click\n                setTimeout(function () {\n                    allowItemClick = true;\n                }, 100);\n            }\n\n            function handleDayClick(e) {\n                if (!allowItemClick) return;\n                var day = $(e.target).parents('.picker-calendar-day');\n                if (day.length === 0 && $(e.target).hasClass('picker-calendar-day')) {\n                    day = $(e.target);\n                }\n                if (day.length === 0) return;\n                if (day.hasClass('picker-calendar-day-selected') && !p.params.multiple) return;\n                if (day.hasClass('picker-calendar-day-disabled')) return;\n                if (day.hasClass('picker-calendar-day-next')) p.nextMonth();\n                if (day.hasClass('picker-calendar-day-prev')) p.prevMonth();\n                var dateYear = day.attr('data-year');\n                var dateMonth = day.attr('data-month');\n                var dateDay = day.attr('data-day');\n                if (p.params.onDayClick) {\n                    p.params.onDayClick(p, day[0], dateYear, dateMonth, dateDay);\n                }\n                p.addValue(new Date(dateYear, dateMonth, dateDay).getTime());\n                if (p.params.closeOnSelect) p.close();\n            }\n\n            p.container.find('.picker-calendar-prev-month').on('click', p.prevMonth);\n            p.container.find('.picker-calendar-next-month').on('click', p.nextMonth);\n            p.container.find('.picker-calendar-prev-year').on('click', p.prevYear);\n            p.container.find('.picker-calendar-next-year').on('click', p.nextYear);\n            p.wrapper.on('click', handleDayClick);\n            if (p.params.touchMove) {\n                p.wrapper.on($.touchEvents.start, handleTouchStart);\n                p.wrapper.on($.touchEvents.move, handleTouchMove);\n                p.wrapper.on($.touchEvents.end, handleTouchEnd);\n            }\n\n            p.container[0].f7DestroyCalendarEvents = function () {\n                p.container.find('.picker-calendar-prev-month').off('click', p.prevMonth);\n                p.container.find('.picker-calendar-next-month').off('click', p.nextMonth);\n                p.container.find('.picker-calendar-prev-year').off('click', p.prevYear);\n                p.container.find('.picker-calendar-next-year').off('click', p.nextYear);\n                p.wrapper.off('click', handleDayClick);\n                if (p.params.touchMove) {\n                    p.wrapper.off($.touchEvents.start, handleTouchStart);\n                    p.wrapper.off($.touchEvents.move, handleTouchMove);\n                    p.wrapper.off($.touchEvents.end, handleTouchEnd);\n                }\n            };\n        };\n        p.destroyCalendarEvents = function (colContainer) {\n            if ('f7DestroyCalendarEvents' in p.container[0]) p.container[0].f7DestroyCalendarEvents();\n        };\n\n        // Calendar Methods\n        p.daysInMonth = function (date) {\n            var d = new Date(date);\n            return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n        };\n        p.monthHTML = function (date, offset) {\n            date = new Date(date);\n            var year = date.getFullYear(),\n                month = date.getMonth(),\n                day = date.getDate();\n            if (offset === 'next') {\n                if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n            }\n            if (offset === 'prev') {\n                if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n            }\n            if (offset === 'next' || offset === 'prev') {\n                month = date.getMonth();\n                year = date.getFullYear();\n            }\n            var daysInPrevMonth = p.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000),\n                daysInMonth = p.daysInMonth(date),\n                firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n            if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n            var dayDate,\n                currentValues = [],\n                i,\n                j,\n                rows = 6,\n                cols = 7,\n                monthHTML = '',\n                dayIndex = 0 + (p.params.firstDay - 1),\n                today = new Date().setHours(0, 0, 0, 0),\n                minDate = p.params.minDate ? new Date(p.params.minDate).getTime() : null,\n                maxDate = p.params.maxDate ? new Date(p.params.maxDate).getTime() : null;\n\n            if (p.value && p.value.length) {\n                for (i = 0; i < p.value.length; i++) {\n                    currentValues.push(new Date(p.value[i]).setHours(0, 0, 0, 0));\n                }\n            }\n\n            for (i = 1; i <= rows; i++) {\n                var rowHTML = '';\n                var row = i;\n                for (j = 1; j <= cols; j++) {\n                    var col = j;\n                    dayIndex++;\n                    var dayNumber = dayIndex - firstDayOfMonthIndex;\n                    var addClass = '';\n                    if (dayNumber < 0) {\n                        dayNumber = daysInPrevMonth + dayNumber + 1;\n                        addClass += ' picker-calendar-day-prev';\n                        dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n                    } else {\n                        dayNumber = dayNumber + 1;\n                        if (dayNumber > daysInMonth) {\n                            dayNumber = dayNumber - daysInMonth;\n                            addClass += ' picker-calendar-day-next';\n                            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n                        } else {\n                            dayDate = new Date(year, month, dayNumber).getTime();\n                        }\n                    }\n                    // Today\n                    if (dayDate === today) addClass += ' picker-calendar-day-today';\n                    // Selected\n                    if (currentValues.indexOf(dayDate) >= 0) addClass += ' picker-calendar-day-selected';\n                    // Weekend\n                    if (p.params.weekendDays.indexOf(col - 1) >= 0) {\n                        addClass += ' picker-calendar-day-weekend';\n                    }\n                    // Disabled\n                    if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n                        addClass += ' picker-calendar-day-disabled';\n                    }\n\n                    dayDate = new Date(dayDate);\n                    var dayYear = dayDate.getFullYear();\n                    var dayMonth = dayDate.getMonth();\n                    rowHTML += '<div data-year=\"' + dayYear + '\" data-month=\"' + dayMonth + '\" data-day=\"' + dayNumber + '\" class=\"picker-calendar-day' + addClass + '\" data-date=\"' + (dayYear + '-' + dayMonth + '-' + dayNumber) + '\"><span>' + dayNumber + '</span></div>';\n                }\n                monthHTML += '<div class=\"picker-calendar-row\">' + rowHTML + '</div>';\n            }\n            monthHTML = '<div class=\"picker-calendar-month\" data-year=\"' + year + '\" data-month=\"' + month + '\">' + monthHTML + '</div>';\n            return monthHTML;\n        };\n        p.animating = false;\n        p.updateCurrentMonthYear = function (dir) {\n            if (typeof dir === 'undefined') {\n                p.currentMonth = parseInt(p.months.eq(1).attr('data-month'), 10);\n                p.currentYear = parseInt(p.months.eq(1).attr('data-year'), 10);\n            } else {\n                p.currentMonth = parseInt(p.months.eq(dir === 'next' ? p.months.length - 1 : 0).attr('data-month'), 10);\n                p.currentYear = parseInt(p.months.eq(dir === 'next' ? p.months.length - 1 : 0).attr('data-year'), 10);\n            }\n            p.container.find('.current-month-value').text(p.params.monthNames[p.currentMonth]);\n            p.container.find('.current-year-value').text(p.currentYear);\n        };\n        p.onMonthChangeStart = function (dir) {\n            p.updateCurrentMonthYear(dir);\n            p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n            var currentIndex = dir === 'next' ? p.months.length - 1 : 0;\n\n            p.months.eq(currentIndex).addClass('picker-calendar-month-current');\n            p.months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'picker-calendar-month-prev' : 'picker-calendar-month-next');\n\n            if (p.params.onMonthYearChangeStart) {\n                p.params.onMonthYearChangeStart(p, p.currentYear, p.currentMonth);\n            }\n        };\n        p.onMonthChangeEnd = function (dir, rebuildBoth) {\n            p.animating = false;\n            var nextMonthHTML, prevMonthHTML, newMonthHTML;\n            p.wrapper.find('.picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)').remove();\n\n            if (typeof dir === 'undefined') {\n                dir = 'next';\n                rebuildBoth = true;\n            }\n            if (!rebuildBoth) {\n                newMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), dir);\n            } else {\n                p.wrapper.find('.picker-calendar-month-next, .picker-calendar-month-prev').remove();\n                prevMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'prev');\n                nextMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'next');\n            }\n            if (dir === 'next' || rebuildBoth) {\n                p.wrapper.append(newMonthHTML || nextMonthHTML);\n            }\n            if (dir === 'prev' || rebuildBoth) {\n                p.wrapper.prepend(newMonthHTML || prevMonthHTML);\n            }\n            p.months = p.wrapper.find('.picker-calendar-month');\n            p.setMonthsTranslate(p.monthsTranslate);\n            if (p.params.onMonthAdd) {\n                p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n            }\n            if (p.params.onMonthYearChangeEnd) {\n                p.params.onMonthYearChangeEnd(p, p.currentYear, p.currentMonth);\n            }\n        };\n        p.setMonthsTranslate = function (translate) {\n            translate = translate || p.monthsTranslate || 0;\n            if (typeof p.monthsTranslate === 'undefined') p.monthsTranslate = translate;\n            p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n            var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n            var currentMonthTranslate = -translate * 100 * inverter;\n            var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n            p.months.eq(0).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n            p.months.eq(1).transform('translate3d(' + (p.isH ? currentMonthTranslate : 0) + '%, ' + (p.isH ? 0 : currentMonthTranslate) + '%, 0)').addClass('picker-calendar-month-current');\n            p.months.eq(2).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n        };\n        p.nextMonth = function (transition) {\n            if (typeof transition === 'undefined' || (typeof transition === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(transition)) === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var nextMonth = parseInt(p.months.eq(p.months.length - 1).attr('data-month'), 10);\n            var nextYear = parseInt(p.months.eq(p.months.length - 1).attr('data-year'), 10);\n            var nextDate = new Date(nextYear, nextMonth);\n            var nextDateTime = nextDate.getTime();\n            var transitionEndCallback = p.animating ? false : true;\n            if (p.params.maxDate) {\n                if (nextDateTime > new Date(p.params.maxDate).getTime()) {\n                    return p.resetMonth();\n                }\n            }\n            p.monthsTranslate--;\n            if (nextMonth === p.currentMonth) {\n                var nextMonthTranslate = -p.monthsTranslate * 100 * inverter;\n                var nextMonthHTML = $(p.monthHTML(nextDateTime, 'next')).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n                p.wrapper.append(nextMonthHTML[0]);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, p.months.eq(p.months.length - 1)[0]);\n                }\n            }\n            p.animating = true;\n            p.onMonthChangeStart('next');\n            var translate = p.monthsTranslate * 100 * inverter;\n\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function () {\n                    p.onMonthChangeEnd('next');\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd('next');\n            }\n        };\n        p.prevMonth = function (transition) {\n            if (typeof transition === 'undefined' || (typeof transition === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(transition)) === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var prevMonth = parseInt(p.months.eq(0).attr('data-month'), 10);\n            var prevYear = parseInt(p.months.eq(0).attr('data-year'), 10);\n            var prevDate = new Date(prevYear, prevMonth + 1, -1);\n            var prevDateTime = prevDate.getTime();\n            var transitionEndCallback = p.animating ? false : true;\n            if (p.params.minDate) {\n                if (prevDateTime < new Date(p.params.minDate).getTime()) {\n                    return p.resetMonth();\n                }\n            }\n            p.monthsTranslate++;\n            if (prevMonth === p.currentMonth) {\n                var prevMonthTranslate = -p.monthsTranslate * 100 * inverter;\n                var prevMonthHTML = $(p.monthHTML(prevDateTime, 'prev')).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n                p.wrapper.prepend(prevMonthHTML[0]);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, p.months.eq(0)[0]);\n                }\n            }\n            p.animating = true;\n            p.onMonthChangeStart('prev');\n            var translate = p.monthsTranslate * 100 * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function () {\n                    p.onMonthChangeEnd('prev');\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd('prev');\n            }\n        };\n        p.resetMonth = function (transition) {\n            if (typeof transition === 'undefined') transition = '';\n            var translate = p.monthsTranslate * 100 * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n        };\n        p.setYearMonth = function (year, month, transition) {\n            if (typeof year === 'undefined') year = p.currentYear;\n            if (typeof month === 'undefined') month = p.currentMonth;\n            if (typeof transition === 'undefined' || (typeof transition === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(transition)) === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var targetDate;\n            if (year < p.currentYear) {\n                targetDate = new Date(year, month + 1, -1).getTime();\n            } else {\n                targetDate = new Date(year, month).getTime();\n            }\n            if (p.params.maxDate && targetDate > new Date(p.params.maxDate).getTime()) {\n                return false;\n            }\n            if (p.params.minDate && targetDate < new Date(p.params.minDate).getTime()) {\n                return false;\n            }\n            var currentDate = new Date(p.currentYear, p.currentMonth).getTime();\n            var dir = targetDate > currentDate ? 'next' : 'prev';\n            var newMonthHTML = p.monthHTML(new Date(year, month));\n            p.monthsTranslate = p.monthsTranslate || 0;\n            var prevTranslate = p.monthsTranslate;\n            var monthTranslate, wrapperTranslate;\n            var transitionEndCallback = p.animating ? false : true;\n            if (targetDate > currentDate) {\n                // To next\n                p.monthsTranslate--;\n                if (!p.animating) p.months.eq(p.months.length - 1).remove();\n                p.wrapper.append(newMonthHTML);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n                p.months.eq(p.months.length - 1).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n            } else {\n                // To prev\n                p.monthsTranslate++;\n                if (!p.animating) p.months.eq(0).remove();\n                p.wrapper.prepend(newMonthHTML);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n                p.months.eq(0).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n            }\n            if (p.params.onMonthAdd) {\n                p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n            }\n            p.animating = true;\n            p.onMonthChangeStart(dir);\n            wrapperTranslate = p.monthsTranslate * 100 * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? wrapperTranslate : 0) + '%, ' + (p.isH ? 0 : wrapperTranslate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function () {\n                    p.onMonthChangeEnd(dir, true);\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd(dir);\n            }\n        };\n        p.nextYear = function () {\n            p.setYearMonth(p.currentYear + 1);\n        };\n        p.prevYear = function () {\n            p.setYearMonth(p.currentYear - 1);\n        };\n\n        // HTML Layout\n        p.layout = function () {\n            var pickerHTML = '';\n            var pickerClass = '';\n            var i;\n\n            var layoutDate = p.value && p.value.length ? p.value[0] : new Date().setHours(0, 0, 0, 0);\n            var prevMonthHTML = p.monthHTML(layoutDate, 'prev');\n            var currentMonthHTML = p.monthHTML(layoutDate);\n            var nextMonthHTML = p.monthHTML(layoutDate, 'next');\n            var monthsHTML = '<div class=\"picker-calendar-months\"><div class=\"picker-calendar-months-wrapper\">' + (prevMonthHTML + currentMonthHTML + nextMonthHTML) + '</div></div>';\n            // Week days header\n            var weekHeaderHTML = '';\n            if (p.params.weekHeader) {\n                for (i = 0; i < 7; i++) {\n                    var weekDayIndex = i + p.params.firstDay > 6 ? i - 7 + p.params.firstDay : i + p.params.firstDay;\n                    var dayName = p.params.dayNamesShort[weekDayIndex];\n                    weekHeaderHTML += '<div class=\"picker-calendar-week-day ' + (p.params.weekendDays.indexOf(weekDayIndex) >= 0 ? 'picker-calendar-week-day-weekend' : '') + '\"> ' + dayName + '</div>';\n                }\n                weekHeaderHTML = '<div class=\"picker-calendar-week-days\">' + weekHeaderHTML + '</div>';\n            }\n            pickerClass = 'picker-modal picker-calendar ' + (p.params.cssClass || '');\n            var toolbarHTML = p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '';\n            if (p.params.toolbar) {\n                toolbarHTML = p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText).replace(/{{monthPicker}}/g, p.params.monthPicker ? p.params.monthPickerTemplate : '').replace(/{{yearPicker}}/g, p.params.yearPicker ? p.params.yearPickerTemplate : '');\n            }\n\n            pickerHTML = '<div class=\"' + pickerClass + '\">' + toolbarHTML + '<div class=\"picker-modal-inner\">' + weekHeaderHTML + monthsHTML + '</div>' + '</div>';\n\n            p.pickerHTML = pickerHTML;\n        };\n\n        // Input Events\n        function openOnInput(e) {\n            e.preventDefault();\n            if (p.opened) return;\n            p.open();\n            if (p.params.scrollToInput && !isPopover()) {\n                var pageContent = p.input.parents('.page-content');\n                if (pageContent.length === 0) return;\n\n                var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                    paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                    pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                    pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                    newPaddingBottom;\n\n                var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                if (inputTop > pageHeight) {\n                    var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                    if (scrollTop + pageHeight > pageScrollHeight) {\n                        newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                        if (pageHeight === pageScrollHeight) {\n                            newPaddingBottom = p.container.height();\n                        }\n                        pageContent.css({ 'padding-bottom': newPaddingBottom + 'px' });\n                    }\n                    pageContent.scrollTop(scrollTop, 300);\n                }\n            }\n        }\n\n        function closeOnHTMLClick(e) {\n            if (inPopover()) return;\n            if (p.input && p.input.length > 0) {\n                if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n            } else {\n                if ($(e.target).parents('.picker-modal').length === 0) p.close();\n            }\n        }\n\n        if (p.params.input) {\n            p.input = $(p.params.input);\n            if (p.input.length > 0) {\n                if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                if (!p.inline) {\n                    p.input.on(\"click\", function (e) {\n                        openOnInput(e);\n                        //readonlybug\n                        if (p.params.inputReadOnly) {\n                            this.focus();\n                            this.blur();\n                        }\n                    });\n                }\n                if (p.params.inputReadOnly) {\n                    p.input.on('focus mousedown', function (e) {\n                        e.preventDefault();\n                    });\n                }\n            }\n        }\n\n        if (!p.inline) $('html').on('click', closeOnHTMLClick);\n\n        // Open\n        function onPickerClose() {\n            p.opened = false;\n            if (p.input && p.input.length > 0) p.input.parents('.page-content').css({ 'padding-bottom': '' });\n            if (p.params.onClose) p.params.onClose(p);\n\n            // Destroy events\n            p.destroyCalendarEvents();\n        }\n\n        p.opened = false;\n        p.open = function () {\n            var toPopover = isPopover();\n            var updateValue = false;\n            if (!p.opened) {\n                // Set date value\n                if (!p.value) {\n                    if (p.params.value) {\n                        p.value = p.params.value;\n                        updateValue = true;\n                    }\n                }\n\n                // Layout\n                p.layout();\n\n                // Append\n                if (toPopover) {\n                    p.pickerHTML = '<div class=\"popover popover-picker-calendar\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                    p.popover = $.popover(p.pickerHTML, p.params.input, true);\n                    p.container = $(p.popover).find('.picker-modal');\n                    $(p.popover).on('close', function () {\n                        onPickerClose();\n                    });\n                } else if (p.inline) {\n                    p.container = $(p.pickerHTML);\n                    p.container.addClass('picker-modal-inline');\n                    $(p.params.container).append(p.container);\n                } else {\n                    p.container = $($.pickerModal(p.pickerHTML));\n                    $(p.container).on('close', function () {\n                        onPickerClose();\n                    });\n                }\n\n                // Store calendar instance\n                p.container[0].f7Calendar = p;\n                p.wrapper = p.container.find('.picker-calendar-months-wrapper');\n\n                // Months\n                p.months = p.wrapper.find('.picker-calendar-month');\n\n                // Update current month and year\n                p.updateCurrentMonthYear();\n\n                // Set initial translate\n                p.monthsTranslate = 0;\n                p.setMonthsTranslate();\n\n                // Init events\n                p.initCalendarEvents();\n\n                // Update input value\n                if (updateValue) p.updateValue();\n            }\n\n            // Set flag\n            p.opened = true;\n            p.initialized = true;\n            if (p.params.onMonthAdd) {\n                p.months.each(function () {\n                    p.params.onMonthAdd(p, this);\n                });\n            }\n            if (p.params.onOpen) p.params.onOpen(p);\n        };\n\n        // Close\n        p.close = function () {\n            if (!p.opened || p.inline) return;\n            if (inPopover()) {\n                $.closeModal(p.popover);\n                return;\n            } else {\n                $.closeModal(p.container);\n                return;\n            }\n        };\n\n        // Destroy\n        p.destroy = function () {\n            p.close();\n            if (p.params.input && p.input.length > 0) {\n                p.input.off('click focus', openOnInput);\n            }\n            $('html').off('click', closeOnHTMLClick);\n        };\n\n        if (p.inline) {\n            p.open();\n        }\n\n        return p;\n    };\n    $.fn.calendar = function (params) {\n        return this.each(function () {\n            var $this = $(this);\n            if (!$this[0]) return;\n            var calendar = $this.data(\"calendar\");\n            if (!calendar) {\n                var p = {};\n                if ($this[0].tagName.toUpperCase() === \"INPUT\") {\n                    p.input = $this;\n                } else {\n                    p.container = $this;\n                }\n                $this.data(\"calendar\", new Calendar($.extend(p, params)));\n            }\n        });\n    };\n\n    defaults = $.fn.calendar.prototype.defaults = {\n        monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n        monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n        firstDay: 1, // First day of the week, Monday\n        weekendDays: [0, 6], // Sunday and Saturday\n        multiple: false,\n        dateFormat: 'yyyy-mm-dd',\n        direction: 'horizontal', // or 'vertical'\n        minDate: null,\n        maxDate: null,\n        touchMove: true,\n        animate: true,\n        closeOnSelect: true,\n        monthPicker: true,\n        monthPickerTemplate: '<div class=\"picker-calendar-month-picker\">' + '<a href=\"#\" class=\"link icon-only picker-calendar-prev-month\"><i class=\"icon icon-prev\"></i></a>' + '<div class=\"current-month-value\"></div>' + '<a href=\"#\" class=\"link icon-only picker-calendar-next-month\"><i class=\"icon icon-next\"></i></a>' + '</div>',\n        yearPicker: true,\n        yearPickerTemplate: '<div class=\"picker-calendar-year-picker\">' + '<a href=\"#\" class=\"link icon-only picker-calendar-prev-year\"><i class=\"icon icon-prev\"></i></a>' + '<span class=\"current-year-value\"></span>' + '<a href=\"#\" class=\"link icon-only picker-calendar-next-year\"><i class=\"icon icon-next\"></i></a>' + '</div>',\n        weekHeader: true,\n        // Common settings\n        scrollToInput: true,\n        inputReadOnly: true,\n        convertToPopover: true,\n        onlyInPopover: false,\n        toolbar: true,\n        toolbarCloseText: 'Done',\n        toolbarTemplate: '<div class=\"toolbar\">' + '<div class=\"toolbar-inner\">' + '{{monthPicker}}' + '{{yearPicker}}' +\n        // '<a href=\"#\" class=\"link close-picker\">{{closeText}}</a>' +\n        '</div>' + '</div>'\n    };\n\n    $.initCalendar = function (content) {\n        var $content = content ? $(content) : $(document.body);\n        $content.find(\"[data-toggle='date']\").each(function () {\n            $(this).calendar();\n        });\n    };\n}($);\n\n/*======================================================\n************   Picker   ************\n======================================================*/\n/* global $:true */\n/* jshint unused:false */\n/* jshint multistr:true */\n+function ($) {\n    \"use strict\";\n\n    var Picker = function Picker(params) {\n        var p = this;\n        var defaults = {\n            updateValuesOnMomentum: false,\n            updateValuesOnTouchmove: true,\n            rotateEffect: false,\n            momentumRatio: 7,\n            freeMode: false,\n            // Common settings\n            scrollToInput: true,\n            inputReadOnly: true,\n            convertToPopover: true,\n            onlyInPopover: false,\n            toolbar: true,\n            toolbarCloseText: 'OK',\n            toolbarTemplate: '<header class=\"bar bar-nav\">\\\n          <button class=\"button button-link pull-right close-picker\">OK</button>\\\n          <h1 class=\"title\"></h1>\\\n          </header>'\n        };\n        params = params || {};\n        for (var def in defaults) {\n            if (typeof params[def] === 'undefined') {\n                params[def] = defaults[def];\n            }\n        }\n        p.params = params;\n        p.cols = [];\n        p.initialized = false;\n\n        // Inline flag\n        p.inline = p.params.container ? true : false;\n\n        // 3D Transforms origin bug, only on safari\n        var originBug = $.device.ios || navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') < 0 && !$.device.android;\n\n        // Should be converted to popover\n        function isPopover() {\n            var toPopover = false;\n            if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n            if (!p.inline && p.params.input) {\n                if (p.params.onlyInPopover) toPopover = true;else {\n                    if ($.device.ios) {\n                        toPopover = $.device.ipad ? true : false;\n                    } else {\n                        if ($(window).width() >= 768) toPopover = true;\n                    }\n                }\n            }\n            return toPopover;\n        }\n\n        function inPopover() {\n            if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;else return false;\n        }\n\n        // Value\n        p.setValue = function (arrValues, transition) {\n            var valueIndex = 0;\n            for (var i = 0; i < p.cols.length; i++) {\n                if (p.cols[i] && !p.cols[i].divider) {\n                    p.cols[i].setValue(arrValues[valueIndex], transition);\n                    valueIndex++;\n                }\n            }\n        };\n        p.updateValue = function () {\n            var newValue = [];\n            var newDisplayValue = [];\n            for (var i = 0; i < p.cols.length; i++) {\n                if (!p.cols[i].divider) {\n                    newValue.push(p.cols[i].value);\n                    newDisplayValue.push(p.cols[i].displayValue);\n                }\n            }\n            if (newValue.indexOf(undefined) >= 0) {\n                return;\n            }\n            p.value = newValue;\n            p.displayValue = newDisplayValue;\n            if (p.params.onChange) {\n                p.params.onChange(p, p.value, p.displayValue);\n            }\n            if (p.input && p.input.length > 0) {\n                $(p.input).val(p.params.formatValue ? p.params.formatValue(p, p.value, p.displayValue) : p.value.join(' '));\n                $(p.input).trigger('change');\n            }\n        };\n\n        // Columns Handlers\n        p.initPickerCol = function (colElement, updateItems) {\n            var colContainer = $(colElement);\n            var colIndex = colContainer.index();\n            var col = p.cols[colIndex];\n            if (col.divider) return;\n            col.container = colContainer;\n            col.wrapper = col.container.find('.picker-items-col-wrapper');\n            col.items = col.wrapper.find('.picker-item');\n\n            var i, j;\n            var wrapperHeight, itemHeight, itemsHeight, minTranslate, maxTranslate;\n            col.replaceValues = function (values, displayValues) {\n                col.destroyEvents();\n                col.values = values;\n                col.displayValues = displayValues;\n                var newItemsHTML = p.columnHTML(col, true);\n                col.wrapper.html(newItemsHTML);\n                col.items = col.wrapper.find('.picker-item');\n                col.calcSize();\n                col.setValue(col.values[0], 0, true);\n                col.initEvents();\n            };\n            col.calcSize = function () {\n                if (p.params.rotateEffect) {\n                    col.container.removeClass('picker-items-col-absolute');\n                    if (!col.width) col.container.css({ width: '' });\n                }\n                var colWidth, colHeight;\n                colWidth = 0;\n                colHeight = col.container[0].offsetHeight;\n                wrapperHeight = col.wrapper[0].offsetHeight;\n                itemHeight = col.items[0].offsetHeight;\n                itemsHeight = itemHeight * col.items.length;\n                minTranslate = colHeight / 2 - itemsHeight + itemHeight / 2;\n                maxTranslate = colHeight / 2 - itemHeight / 2;\n                if (col.width) {\n                    colWidth = col.width;\n                    if (parseInt(colWidth, 10) === colWidth) colWidth = colWidth + 'px';\n                    col.container.css({ width: colWidth });\n                }\n                if (p.params.rotateEffect) {\n                    if (!col.width) {\n                        col.items.each(function () {\n                            var item = $(this);\n                            item.css({ width: 'auto' });\n                            colWidth = Math.max(colWidth, item[0].offsetWidth);\n                            item.css({ width: '' });\n                        });\n                        col.container.css({ width: colWidth + 2 + 'px' });\n                    }\n                    col.container.addClass('picker-items-col-absolute');\n                }\n            };\n            col.calcSize();\n\n            col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)').transition(0);\n\n            var activeIndex = 0;\n            var animationFrameId;\n\n            // Set Value Function\n            col.setValue = function (newValue, transition, valueCallbacks) {\n                if (typeof transition === 'undefined') transition = '';\n                var newActiveIndex = col.wrapper.find('.picker-item[data-picker-value=\"' + newValue + '\"]').index();\n                if (typeof newActiveIndex === 'undefined' || newActiveIndex === -1) {\n                    return;\n                }\n                var newTranslate = -newActiveIndex * itemHeight + maxTranslate;\n                // Update wrapper\n                col.wrapper.transition(transition);\n                col.wrapper.transform('translate3d(0,' + newTranslate + 'px,0)');\n\n                // Watch items\n                if (p.params.updateValuesOnMomentum && col.activeIndex && col.activeIndex !== newActiveIndex) {\n                    $.cancelAnimationFrame(animationFrameId);\n                    col.wrapper.transitionEnd(function () {\n                        $.cancelAnimationFrame(animationFrameId);\n                    });\n                    updateDuringScroll();\n                }\n\n                // Update items\n                col.updateItems(newActiveIndex, newTranslate, transition, valueCallbacks);\n            };\n\n            col.updateItems = function (activeIndex, translate, transition, valueCallbacks) {\n                if (typeof translate === 'undefined') {\n                    translate = $.getTranslate(col.wrapper[0], 'y');\n                }\n                if (typeof activeIndex === 'undefined') activeIndex = -Math.round((translate - maxTranslate) / itemHeight);\n                if (activeIndex < 0) activeIndex = 0;\n                if (activeIndex >= col.items.length) activeIndex = col.items.length - 1;\n                var previousActiveIndex = col.activeIndex;\n                col.activeIndex = activeIndex;\n                /*\n                col.wrapper.find('.picker-selected, .picker-after-selected, .picker-before-selected').removeClass('picker-selected picker-after-selected picker-before-selected');\n                 col.items.transition(transition);\n                var selectedItem = col.items.eq(activeIndex).addClass('picker-selected').transform('');\n                var prevItems = selectedItem.prevAll().addClass('picker-before-selected');\n                var nextItems = selectedItem.nextAll().addClass('picker-after-selected');\n                */\n                // .picker-after-selected, .picker-before-selected \n                col.wrapper.find('.picker-selected').removeClass('picker-selected');\n                if (p.params.rotateEffect) {\n                    col.items.transition(transition);\n                }\n                var selectedItem = col.items.eq(activeIndex).addClass('picker-selected').transform('');\n\n                if (valueCallbacks || typeof valueCallbacks === 'undefined') {\n                    // Update values\n                    col.value = selectedItem.attr('data-picker-value');\n                    col.displayValue = col.displayValues ? col.displayValues[activeIndex] : col.value;\n                    // On change callback\n                    if (previousActiveIndex !== activeIndex) {\n                        if (col.onChange) {\n                            col.onChange(p, col.value, col.displayValue);\n                        }\n                        p.updateValue();\n                    }\n                }\n\n                // Set 3D rotate effect\n                if (!p.params.rotateEffect) {\n                    return;\n                }\n                var percentage = (translate - (Math.floor((translate - maxTranslate) / itemHeight) * itemHeight + maxTranslate)) / itemHeight;\n\n                col.items.each(function () {\n                    var item = $(this);\n                    var itemOffsetTop = item.index() * itemHeight;\n                    var translateOffset = maxTranslate - translate;\n                    var itemOffset = itemOffsetTop - translateOffset;\n                    var percentage = itemOffset / itemHeight;\n\n                    var itemsFit = Math.ceil(col.height / itemHeight / 2) + 1;\n\n                    var angle = -18 * percentage;\n                    if (angle > 180) angle = 180;\n                    if (angle < -180) angle = -180;\n                    // Far class\n                    if (Math.abs(percentage) > itemsFit) item.addClass('picker-item-far');else item.removeClass('picker-item-far');\n                    // Set transform\n                    item.transform('translate3d(0, ' + (-translate + maxTranslate) + 'px, ' + (originBug ? -110 : 0) + 'px) rotateX(' + angle + 'deg)');\n                });\n            };\n\n            function updateDuringScroll() {\n                animationFrameId = $.requestAnimationFrame(function () {\n                    col.updateItems(undefined, undefined, 0);\n                    updateDuringScroll();\n                });\n            }\n\n            // Update items on init\n            if (updateItems) col.updateItems(0, maxTranslate, 0);\n\n            var allowItemClick = true;\n            var isTouched, isMoved, touchStartY, touchCurrentY, touchStartTime, touchEndTime, startTranslate, returnTo, currentTranslate, prevTranslate, velocityTranslate, velocityTime;\n\n            function handleTouchStart(e) {\n                if (isMoved || isTouched) return;\n                e.preventDefault();\n                isTouched = true;\n                var position = $.getTouchPosition(e);\n                touchStartY = touchCurrentY = position.y;\n                touchStartTime = new Date().getTime();\n\n                allowItemClick = true;\n                startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n            }\n\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                e.preventDefault();\n                allowItemClick = false;\n                var position = $.getTouchPosition(e);\n                touchCurrentY = position.y;\n                if (!isMoved) {\n                    // First move\n                    $.cancelAnimationFrame(animationFrameId);\n                    isMoved = true;\n                    startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n                    col.wrapper.transition(0);\n                }\n                e.preventDefault();\n\n                var diff = touchCurrentY - touchStartY;\n                currentTranslate = startTranslate + diff;\n                returnTo = undefined;\n\n                // Normalize translate\n                if (currentTranslate < minTranslate) {\n                    currentTranslate = minTranslate - Math.pow(minTranslate - currentTranslate, 0.8);\n                    returnTo = 'min';\n                }\n                if (currentTranslate > maxTranslate) {\n                    currentTranslate = maxTranslate + Math.pow(currentTranslate - maxTranslate, 0.8);\n                    returnTo = 'max';\n                }\n                // Transform wrapper\n                col.wrapper.transform('translate3d(0,' + currentTranslate + 'px,0)');\n\n                // Update items\n                col.updateItems(undefined, currentTranslate, 0, p.params.updateValuesOnTouchmove);\n\n                // Calc velocity\n                velocityTranslate = currentTranslate - prevTranslate || currentTranslate;\n                velocityTime = new Date().getTime();\n                prevTranslate = currentTranslate;\n            }\n\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = isMoved = false;\n                    return;\n                }\n                isTouched = isMoved = false;\n                col.wrapper.transition('');\n                if (returnTo) {\n                    if (returnTo === 'min') {\n                        col.wrapper.transform('translate3d(0,' + minTranslate + 'px,0)');\n                    } else col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)');\n                }\n                touchEndTime = new Date().getTime();\n                var velocity, newTranslate;\n                if (touchEndTime - touchStartTime > 300) {\n                    newTranslate = currentTranslate;\n                } else {\n                    velocity = Math.abs(velocityTranslate / (touchEndTime - velocityTime));\n                    newTranslate = currentTranslate + velocityTranslate * p.params.momentumRatio;\n                }\n\n                newTranslate = Math.max(Math.min(newTranslate, maxTranslate), minTranslate);\n\n                // Active Index\n                var activeIndex = -Math.floor((newTranslate - maxTranslate) / itemHeight);\n\n                // Normalize translate\n                if (!p.params.freeMode) newTranslate = -activeIndex * itemHeight + maxTranslate;\n\n                // Transform wrapper\n                col.wrapper.transform('translate3d(0,' + parseInt(newTranslate, 10) + 'px,0)');\n\n                // Update items\n                col.updateItems(activeIndex, newTranslate, '', true);\n\n                // Watch items\n                if (p.params.updateValuesOnMomentum) {\n                    updateDuringScroll();\n                    col.wrapper.transitionEnd(function () {\n                        $.cancelAnimationFrame(animationFrameId);\n                    });\n                }\n\n                // Allow click\n                setTimeout(function () {\n                    allowItemClick = true;\n                }, 100);\n            }\n\n            function handleClick(e) {\n                if (!allowItemClick) return;\n                $.cancelAnimationFrame(animationFrameId);\n                /*jshint validthis:true */\n                var value = $(this).attr('data-picker-value');\n                col.setValue(value);\n            }\n\n            col.initEvents = function (detach) {\n                var method = detach ? 'off' : 'on';\n                col.container[method]($.touchEvents.start, handleTouchStart);\n                col.container[method]($.touchEvents.move, handleTouchMove);\n                col.container[method]($.touchEvents.end, handleTouchEnd);\n                col.items[method]('click', handleClick);\n            };\n            col.destroyEvents = function () {\n                col.initEvents(true);\n            };\n\n            col.container[0].f7DestroyPickerCol = function () {\n                col.destroyEvents();\n            };\n\n            col.initEvents();\n        };\n        p.destroyPickerCol = function (colContainer) {\n            colContainer = $(colContainer);\n            if ('f7DestroyPickerCol' in colContainer[0]) colContainer[0].f7DestroyPickerCol();\n        };\n        // Resize cols\n        function resizeCols() {\n            if (!p.opened) return;\n            for (var i = 0; i < p.cols.length; i++) {\n                if (!p.cols[i].divider) {\n                    p.cols[i].calcSize();\n                    p.cols[i].setValue(p.cols[i].value, 0, false);\n                }\n            }\n        }\n        $(window).on('resize', resizeCols);\n\n        // HTML Layout\n        p.columnHTML = function (col, onlyItems) {\n            var columnItemsHTML = '';\n            var columnHTML = '';\n            if (col.divider) {\n                columnHTML += '<div class=\"picker-items-col picker-items-col-divider ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\">' + col.content + '</div>';\n            } else {\n                for (var j = 0; j < col.values.length; j++) {\n                    columnItemsHTML += '<div class=\"picker-item\" data-picker-value=\"' + col.values[j] + '\">' + (col.displayValues ? col.displayValues[j] : col.values[j]) + '</div>';\n                }\n                columnHTML += '<div class=\"picker-items-col ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\"><div class=\"picker-items-col-wrapper\">' + columnItemsHTML + '</div></div>';\n            }\n            return onlyItems ? columnItemsHTML : columnHTML;\n        };\n        p.layout = function () {\n            var pickerHTML = '';\n            var pickerClass = '';\n            var i;\n            p.cols = [];\n            var colsHTML = '';\n            for (i = 0; i < p.params.cols.length; i++) {\n                var col = p.params.cols[i];\n                colsHTML += p.columnHTML(p.params.cols[i]);\n                p.cols.push(col);\n            }\n            pickerClass = 'picker-modal picker-columns ' + (p.params.cssClass || '') + (p.params.rotateEffect ? ' picker-3d' : '');\n            pickerHTML = '<div class=\"' + pickerClass + '\">' + (p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '') + '<div class=\"picker-modal-inner picker-items\">' + colsHTML + '<div class=\"picker-center-highlight\"></div>' + '</div>' + '</div>';\n\n            p.pickerHTML = pickerHTML;\n        };\n\n        // Input Events\n        function openOnInput(e) {\n            e.preventDefault();\n            if (p.opened) return;\n            p.open();\n            if (p.params.scrollToInput && !isPopover()) {\n                var pageContent = p.input.parents('.content');\n                if (pageContent.length === 0) return;\n\n                var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                    paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                    pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                    pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                    newPaddingBottom;\n                var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                if (inputTop > pageHeight) {\n                    var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                    if (scrollTop + pageHeight > pageScrollHeight) {\n                        newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                        if (pageHeight === pageScrollHeight) {\n                            newPaddingBottom = p.container.height();\n                        }\n                        pageContent.css({ 'padding-bottom': newPaddingBottom + 'px' });\n                    }\n                    pageContent.scrollTop(scrollTop, 300);\n                }\n            }\n        }\n\n        function closeOnHTMLClick(e) {\n            if (inPopover()) return;\n            if (p.input && p.input.length > 0) {\n                if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n            } else {\n                if ($(e.target).parents('.picker-modal').length === 0) p.close();\n            }\n        }\n\n        if (p.params.input) {\n            p.input = $(p.params.input);\n            if (p.input.length > 0) {\n                if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                if (!p.inline) {\n                    p.input.on(\"click\", function (e) {\n                        openOnInput(e);\n                        //readonlybug\n                        if (p.params.inputReadOnly) {\n                            this.focus();\n                            this.blur();\n                        }\n                    });\n                }\n                if (p.params.inputReadOnly) {\n                    p.input.on('focus mousedown', function (e) {\n                        e.preventDefault();\n                    });\n                }\n            }\n        }\n\n        if (!p.inline) $('html').on('click', closeOnHTMLClick);\n\n        // Open\n        function onPickerClose() {\n            p.opened = false;\n            if (p.input && p.input.length > 0) p.input.parents('.page-content').css({ 'padding-bottom': '' });\n            if (p.params.onClose) p.params.onClose(p);\n\n            // Destroy events\n            p.container.find('.picker-items-col').each(function () {\n                p.destroyPickerCol(this);\n            });\n        }\n\n        p.opened = false;\n        p.open = function () {\n            var toPopover = isPopover();\n\n            if (!p.opened) {\n\n                // Layout\n                p.layout();\n\n                // Append\n                if (toPopover) {\n                    p.pickerHTML = '<div class=\"popover popover-picker-columns\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                    p.popover = $.popover(p.pickerHTML, p.params.input, true);\n                    p.container = $(p.popover).find('.picker-modal');\n                    $(p.popover).on('close', function () {\n                        onPickerClose();\n                    });\n                } else if (p.inline) {\n                    p.container = $(p.pickerHTML);\n                    p.container.addClass('picker-modal-inline');\n                    $(p.params.container).append(p.container);\n                } else {\n                    p.container = $($.pickerModal(p.pickerHTML));\n                    $(p.container).on('close', function () {\n                        onPickerClose();\n                    });\n                }\n\n                // Store picker instance\n                p.container[0].f7Picker = p;\n\n                // Init Events\n                p.container.find('.picker-items-col').each(function () {\n                    var updateItems = true;\n                    if (!p.initialized && p.params.value || p.initialized && p.value) updateItems = false;\n                    p.initPickerCol(this, updateItems);\n                });\n\n                // Set value\n                if (!p.initialized) {\n                    if (p.params.value) {\n                        p.setValue(p.params.value, 0);\n                    }\n                } else {\n                    if (p.value) p.setValue(p.value, 0);\n                }\n            }\n\n            // Set flag\n            p.opened = true;\n            p.initialized = true;\n\n            if (p.params.onOpen) p.params.onOpen(p);\n        };\n\n        // Close\n        p.close = function () {\n            if (!p.opened || p.inline) return;\n            if (inPopover()) {\n                $.closeModal(p.popover);\n                return;\n            } else {\n                $.closeModal(p.container);\n                return;\n            }\n        };\n\n        // Destroy\n        p.destroy = function () {\n            p.close();\n            if (p.params.input && p.input.length > 0) {\n                p.input.off('click focus', openOnInput);\n            }\n            $('html').off('click', closeOnHTMLClick);\n            $(window).off('resize', resizeCols);\n        };\n\n        if (p.inline) {\n            p.open();\n        }\n\n        return p;\n    };\n\n    $(document).on(\"click\", \".close-picker\", function () {\n        var pickerToClose = $('.picker-modal.modal-in');\n        if (pickerToClose.length > 0) {\n            $.closeModal(pickerToClose);\n        } else {\n            pickerToClose = $('.popover.modal-in .picker-modal');\n            if (pickerToClose.length > 0) {\n                $.closeModal(pickerToClose.parents('.popover'));\n            }\n        }\n    });\n\n    //pickerbug\n    $(document).on($.touchEvents.move, \".picker-modal-inner\", function (e) {\n        e.preventDefault();\n    });\n\n    $.fn.picker = function (params) {\n        var args = arguments;\n        return this.each(function () {\n            if (!this) return;\n            var $this = $(this);\n\n            var picker = $this.data(\"picker\");\n            if (!picker) {\n                params = params || {};\n                var inputValue = $this.val();\n                if (params.value === undefined && inputValue !== \"\") {\n                    params.value = params.cols.length > 1 ? inputValue.split(\" \") : [inputValue];\n                }\n                var p = $.extend({ input: this }, params);\n                picker = new Picker(p);\n                $this.data(\"picker\", picker);\n            }\n            if ((typeof params === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(params)) === (0, _typeof3.default)(\"a\")) {\n                picker[params].apply(picker, Array.prototype.slice.call(args, 1));\n            }\n        });\n    };\n}($);\n\n/* global $:true */\n/* jshint unused:false*/\n\n+function ($) {\n    \"use strict\";\n\n    $.fn.datetimePicker = function (params) {\n        return this.each(function () {\n\n            if (!this) return;\n\n            var today = new Date();\n\n            var getDays = function getDays(max) {\n                var days = [];\n                for (var i = 1; i <= (max || 31); i++) {\n                    days.push(i < 10 ? \"0\" + i : i);\n                }\n                return days;\n            };\n\n            var getDaysByMonthAndYear = function getDaysByMonthAndYear(month, year) {\n                var int_d = new Date(year, parseInt(month) + 1 - 1, 1);\n                var d = new Date(int_d - 1);\n                return getDays(d.getDate());\n            };\n\n            var formatNumber = function formatNumber(n) {\n                return n < 10 ? \"0\" + n : n;\n            };\n\n            var initMonthes = '01 02 03 04 05 06 07 08 09 10 11 12'.split(' ');\n\n            var initYears = function () {\n                var arr = [];\n                for (var i = 1950; i <= 2030; i++) {\n                    arr.push(i);\n                }\n                return arr;\n            }();\n\n            var defaults = {\n\n                rotateEffect: false, //\n\n                value: [today.getFullYear(), formatNumber(today.getMonth() + 1), today.getDate(), formatNumber(today.getHours()), formatNumber(today.getMinutes())],\n\n                onChange: function onChange(picker, values, displayValues) {\n                    var days = getDaysByMonthAndYear(picker.cols[1].value, picker.cols[0].value);\n                    var currentValue = picker.cols[2].value;\n                    if (currentValue > days.length) currentValue = days.length;\n                    picker.cols[2].setValue(currentValue);\n                },\n\n                formatValue: function formatValue(p, values, displayValues) {\n                    return displayValues[0] + '-' + values[1] + '-' + values[2] + ' ' + values[3] + ':' + values[4];\n                },\n\n                cols: [\n                // Years\n                {\n                    values: initYears\n                },\n                // Months\n                {\n                    values: initMonthes\n                },\n                // Days\n                {\n                    values: getDays()\n                },\n\n                // Space divider\n                {\n                    divider: true,\n                    content: '  '\n                },\n                // Hours\n                {\n                    values: function () {\n                        var arr = [];\n                        for (var i = 0; i <= 23; i++) {\n                            arr.push(formatNumber(i));\n                        }\n                        return arr;\n                    }()\n                },\n                // Divider\n                {\n                    divider: true,\n                    content: ':'\n                },\n                // Minutes\n                {\n                    values: function () {\n                        var arr = [];\n                        for (var i = 0; i <= 59; i++) {\n                            arr.push(formatNumber(i));\n                        }\n                        return arr;\n                    }()\n                }]\n            };\n\n            params = params || {};\n            var inputValue = $(this).val();\n            if (params.value === undefined && inputValue !== \"\") {\n                params.value = [].concat(inputValue.split(\" \")[0].split(\"-\"), inputValue.split(\" \")[1].split(\":\"));\n            }\n\n            var p = $.extend(defaults, params);\n            $(this).picker(p);\n        });\n    };\n}($);\n\n+function ($) {\n    'use strict';\n\n    $.initPullToRefresh = function (pageContainer) {\n        var eventsTarget = $(pageContainer);\n        if (!eventsTarget.hasClass('pull-to-refresh-content')) {\n            eventsTarget = eventsTarget.find('.pull-to-refresh-content');\n        }\n        if (!eventsTarget || eventsTarget.length === 0) return;\n\n        var isTouched,\n            isMoved,\n            touchesStart = {},\n            isScrolling,\n            touchesDiff,\n            touchStartTime,\n            container,\n            refresh = false,\n            useTranslate = false,\n            startTranslate = 0,\n            translate,\n            scrollTop,\n            wasScrolled,\n            triggerDistance,\n            dynamicTriggerDistance;\n\n        container = eventsTarget;\n\n        // Define trigger distance\n        if (container.attr('data-ptr-distance')) {\n            dynamicTriggerDistance = true;\n        } else {\n            triggerDistance = 44;\n        }\n\n        function handleTouchStart(e) {\n            if (isTouched) {\n                if ($.os.android) {\n                    if ('targetTouches' in e && e.targetTouches.length > 1) return;\n                } else return;\n            }\n            isMoved = false;\n            isTouched = true;\n            isScrolling = undefined;\n            wasScrolled = undefined;\n            var position = $.getTouchPosition(e);\n            touchesStart.x = position.x;\n            touchesStart.y = position.y;\n            touchStartTime = new Date().getTime();\n            /*jshint validthis:true */\n            container = $(this);\n        }\n\n        function handleTouchMove(e) {\n            if (!isTouched) return;\n            var position = $.getTouchPosition(e);\n            var pageX = position.x;\n            var pageY = position.y;\n            if (typeof isScrolling === 'undefined') {\n                isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n            }\n            if (!isScrolling) {\n                isTouched = false;\n                return;\n            }\n\n            scrollTop = container[0].scrollTop;\n            if (typeof wasScrolled === 'undefined' && scrollTop !== 0) wasScrolled = true;\n\n            if (!isMoved) {\n                /*jshint validthis:true */\n                container.removeClass('transitioning');\n                if (scrollTop > container[0].offsetHeight) {\n                    isTouched = false;\n                    return;\n                }\n                if (dynamicTriggerDistance) {\n                    triggerDistance = container.attr('data-ptr-distance');\n                    if (triggerDistance.indexOf('%') >= 0) triggerDistance = container[0].offsetHeight * parseInt(triggerDistance, 10) / 100;\n                }\n                startTranslate = container.hasClass('refreshing') ? triggerDistance : 0;\n                if (container[0].scrollHeight === container[0].offsetHeight || !$.os.ios) {\n                    useTranslate = true;\n                } else {\n                    useTranslate = false;\n                }\n                useTranslate = true;\n            }\n            isMoved = true;\n            touchesDiff = pageY - touchesStart.y;\n\n            if (touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0) {\n                // iOS 8 fix\n                if ($.os.ios && parseInt($.os.version.split('.')[0], 10) > 7 && scrollTop === 0 && !wasScrolled) useTranslate = true;\n\n                if (useTranslate) {\n                    e.preventDefault();\n                    translate = Math.pow(touchesDiff, 0.85) + startTranslate;\n                    container.transform('translate3d(0,' + translate + 'px,0)');\n                } else {}\n                if (useTranslate && Math.pow(touchesDiff, 0.85) > triggerDistance || !useTranslate && touchesDiff >= triggerDistance * 2) {\n                    refresh = true;\n                    container.addClass('pull-up').removeClass('pull-down');\n                } else {\n                    refresh = false;\n                    container.removeClass('pull-up').addClass('pull-down');\n                }\n            } else {\n\n                container.removeClass('pull-up pull-down');\n                refresh = false;\n                return;\n            }\n        }\n\n        function handleTouchEnd() {\n            if (!isTouched || !isMoved) {\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n            if (translate) {\n                container.addClass('transitioning');\n                translate = 0;\n            }\n            container.transform('');\n            if (refresh) {\n                container.addClass('refreshing');\n                container.trigger('refresh', {\n                    done: function done() {\n                        $.pullToRefreshDone(container);\n                    }\n                });\n            } else {\n                container.removeClass('pull-down');\n            }\n            isTouched = false;\n            isMoved = false;\n        }\n\n        // Attach Events\n        eventsTarget.on($.touchEvents.start, handleTouchStart);\n        eventsTarget.on($.touchEvents.move, handleTouchMove);\n        eventsTarget.on($.touchEvents.end, handleTouchEnd);\n\n        function destroyPullToRefresh() {\n            eventsTarget.off($.touchEvents.start, handleTouchStart);\n            eventsTarget.off($.touchEvents.move, handleTouchMove);\n            eventsTarget.off($.touchEvents.end, handleTouchEnd);\n        }\n        eventsTarget[0].destroyPullToRefresh = destroyPullToRefresh;\n    };\n    $.pullToRefreshDone = function (container) {\n        container = $(container);\n        if (container.length === 0) container = $('.pull-to-refresh-content.refreshing');\n        container.removeClass('refreshing').addClass('transitioning');\n        container.transitionEnd(function () {\n            container.removeClass('transitioning pull-up pull-down');\n        });\n    };\n    $.pullToRefreshTrigger = function (container) {\n        container = $(container);\n        if (container.length === 0) container = $('.pull-to-refresh-content');\n        if (container.hasClass('refreshing')) return;\n        container.addClass('transitioning refreshing');\n        container.trigger('refresh', {\n            done: function done() {\n                $.pullToRefreshDone(container);\n            }\n        });\n    };\n\n    $.destroyPullToRefresh = function (pageContainer) {\n        pageContainer = $(pageContainer);\n        var pullToRefreshContent = pageContainer.hasClass('pull-to-refresh-content') ? pageContainer : pageContainer.find('.pull-to-refresh-content');\n        if (pullToRefreshContent.length === 0) return;\n        if (pullToRefreshContent[0].destroyPullToRefresh) pullToRefreshContent[0].destroyPullToRefresh();\n    };\n}($); //jshint ignore:line\n\n/* global $:true */\n+function ($) {\n    'use strict';\n\n    function handleInfiniteScroll() {\n        /*jshint validthis:true */\n        var inf = $(this);\n        var scrollTop = inf.scrollTop();\n        var scrollHeight = inf.scrollHeight();\n        var height = inf[0].offsetHeight;\n        var distance = inf[0].getAttribute('data-distance');\n        var virtualListContainer = inf.find('.virtual-list');\n        var virtualList;\n        var onTop = inf.hasClass('infinite-scroll-top');\n        if (!distance) distance = 50;\n        if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n            distance = parseInt(distance, 10) / 100 * height;\n        }\n        if (distance > height) distance = height;\n        if (onTop) {\n            if (scrollTop < distance) {\n                inf.trigger('infinite');\n            }\n        } else {\n            if (scrollTop + height >= scrollHeight - distance) {\n                if (virtualListContainer.length > 0) {\n                    virtualList = virtualListContainer[0].f7VirtualList;\n                    if (virtualList && !virtualList.reachEnd) return;\n                }\n                inf.trigger('infinite');\n            }\n        }\n    }\n    $.attachInfiniteScroll = function (infiniteContent) {\n        $(infiniteContent).on('scroll', handleInfiniteScroll);\n    };\n    $.detachInfiniteScroll = function (infiniteContent) {\n        $(infiniteContent).off('scroll', handleInfiniteScroll);\n    };\n\n    $.initInfiniteScroll = function (pageContainer) {\n        pageContainer = $(pageContainer);\n        var infiniteContent = pageContainer.hasClass('infinite-scroll') ? pageContainer : pageContainer.find('.infinite-scroll');\n        if (infiniteContent.length === 0) return;\n        $.attachInfiniteScroll(infiniteContent);\n\n        function detachEvents() {\n            $.detachInfiniteScroll(infiniteContent);\n            pageContainer.off('pageBeforeRemove', detachEvents);\n        }\n        pageContainer.on('pageBeforeRemove', detachEvents);\n    };\n}($);\n\n/* ===============================================================================\n************   Notification ************\n=============================================================================== */\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    var noti, defaults, timeout, start, diffX, diffY;\n\n    var touchStart = function touchStart(e) {\n        var p = $.getTouchPosition(e);\n        start = p;\n        diffX = diffY = 0;\n        noti.addClass(\"touching\");\n    };\n    var touchMove = function touchMove(e) {\n        if (!start) return false;\n        e.preventDefault();\n        e.stopPropagation();\n        var p = $.getTouchPosition(e);\n        diffX = p.x - start.x;\n        diffY = p.y - start.y;\n        if (diffY > 0) {\n            diffY = Math.sqrt(diffY);\n        }\n\n        noti.css(\"transform\", \"translate3d(0, \" + diffY + \"px, 0)\");\n    };\n    var touchEnd = function touchEnd() {\n        noti.removeClass(\"touching\");\n        noti.attr(\"style\", \"\");\n        if (diffY < 0 && Math.abs(diffY) > noti.height() * 0.38) {\n            $.closeNotification();\n        }\n\n        if (Math.abs(diffX) <= 1 && Math.abs(diffY) <= 1) {\n            noti.trigger(\"noti-click\");\n        }\n\n        start = false;\n    };\n\n    var attachEvents = function attachEvents(el) {\n        el.on($.touchEvents.start, touchStart);\n        el.on($.touchEvents.move, touchMove);\n        el.on($.touchEvents.end, touchEnd);\n    };\n\n    $.notification = $.noti = function (params) {\n        params = $.extend({}, defaults, params);\n        noti = $(\".notification\");\n        if (!noti[0]) {\n            // create a new notification\n            noti = $('<div class=\"notification\"></div>').appendTo(document.body);\n            attachEvents(noti);\n        }\n\n        noti.off(\"noti-click\"); //the click event is not correct sometime: it will trigger when user is draging.\n        if (params.onClick) noti.on(\"noti-click\", function () {\n            params.onClick(params.data);\n        });\n\n        noti.html($.t7.compile(params.tpl)(params));\n\n        noti.show();\n\n        noti.addClass(\"notification-in\");\n        noti.data(\"params\", params);\n\n        var startTimeout = function startTimeout() {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n\n            timeout = setTimeout(function () {\n                if (noti.hasClass(\"touching\")) {\n                    startTimeout();\n                } else {\n                    $.closeNotification();\n                }\n            }, params.time);\n        };\n\n        startTimeout();\n    };\n\n    $.closeNotification = function () {\n        timeout && clearTimeout(timeout);\n        timeout = null;\n        var noti = $(\".notification\").removeClass(\"notification-in\").transitionEnd(function () {\n            $(this).remove();\n        });\n\n        if (noti[0]) {\n            var params = $(\".notification\").data(\"params\");\n            if (params && params.onClose) {\n                params.onClose(params.data);\n            }\n        }\n    };\n\n    defaults = $.noti.prototype.defaults = {\n        title: undefined,\n        text: undefined,\n        media: undefined,\n        time: 4000,\n        onClick: undefined,\n        onClose: undefined,\n        data: undefined,\n        tpl: '<div class=\"notification-inner\">' + '{{#if media}}<div class=\"notification-media\">{{media}}</div>{{/if}}' + '<div class=\"notification-content\">' + '{{#if title}}<div class=\"notification-title\">{{title}}</div>{{/if}}' + '{{#if text}}<div class=\"notification-text\">{{text}}</div>{{/if}}' + '</div>' + '<div class=\"notification-handle-bar\"></div>' + '</div>'\n    };\n}($);\n\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    var Index = function Index(params) {\n        this.params = params;\n        this.tpl = $.t7(this.params.indexListTemplate).compile();\n    };\n\n    Index.prototype.render = function (list) {\n        this.list = $(list || \".list\");\n        this.draw();\n    };\n\n    Index.prototype.draw = function () {\n        if (this.indexList) this.indexList.remove();\n        this.titles = this.list.find(this.params.titleSelector);\n        var titleTexts = this.titles.map(function (i, t) {\n            return $(t).data(\"index\") || $(t).text();\n        }).toArray();\n\n        this.indexList = $(\"<ul class='index-list-bar'></ul>\").appendTo(this.list.parents(\".page\"));\n        this.indexList.html(this.tpl({ indexes: titleTexts }));\n        this.indexList.on($.touchEvents.start, $.proxy(this.touchStart, this));\n        this.indexList.on($.touchEvents.start + \" \" + $.touchEvents.move, $.proxy(this.touchMove, this));\n        this.indexList.on($.touchEvents.end, $.proxy(this.touchEnd, this));\n\n        this.content = this.list.parents(\".content\");\n    };\n\n    Index.prototype.touchStart = function () {\n        this.pageOffsetTop = this.content.offset().top;\n        this.touching = true;\n    };\n\n    Index.prototype.touchMove = function (e) {\n        if (!this.touching) return;\n        e.preventDefault();\n        var li = this.getElementOnTouch($.getTouchPosition(e));\n        if (!li) return;\n        var title = this.titles.eq(li.data(\"index\"));\n        var titleTop = title.parent().offset().top; // if a element has class list-group-title, it will be sticky in safari, so it's offset is not correct\n        var top = titleTop - this.pageOffsetTop + this.content.scrollTop();\n        this.content.scrollTop(top);\n    };\n\n    Index.prototype.touchEnd = function () {\n        this.touching = false;\n    };\n\n    Index.prototype.getElementOnTouch = function (position) {\n        var result = null;\n        this.indexList.find(\"li\").each(function () {\n            if (result) return;\n            var $this = $(this);\n            var offset = $this.offset();\n            if (offset.top < position.y && offset.top + $this.outerHeight() > position.y) {\n                result = $this;\n            }\n        });\n        return result;\n    };\n\n    $.fn.indexList = function (params) {\n        return this.each(function () {\n            if (!this) return;\n\n            var list = $(this);\n\n            var index = list.data(\"index\");\n\n            if (!index) {\n                params = $.extend({}, $.fn.indexList.prototype.defaults, params);\n                index = new Index(params).render(list);\n                list.data(\"index\", index);\n            }\n\n            return index;\n        });\n    };\n\n    $.fn.indexList.prototype.defaults = {\n        titleSelector: \".list-group-title\",\n        indexListTemplate: \"{{#indexes}}<li data-index={{@index}}><strong>{{this}}</strong></li>{{/indexes}}\"\n    };\n\n    $.initIndexList = function (selector) {\n        var container = $(selector);\n        if (container.hasClass(\".contacts-block\")) {\n            container.indexList();\n        } else {\n            container.find(\".contacts-block\").indexList();\n        }\n    };\n}($);\n\n/* global $:true */\n+function ($) {\n    \"use strict\";\n\n    $(function () {\n        $(document).on(\"focus\", \".searchbar input\", function (e) {\n            var $input = $(e.target);\n            $input.parents(\".searchbar\").addClass(\"searchbar-active\");\n        });\n        $(document).on(\"click\", \".searchbar-cancel\", function (e) {\n            var $btn = $(e.target);\n            $btn.parents(\".searchbar\").removeClass(\"searchbar-active\");\n        });\n        $(document).on(\"blur\", \".searchbar input\", function (e) {\n            var $input = $(e.target);\n            $input.parents(\".searchbar\").removeClass(\"searchbar-active\");\n        });\n    });\n}($);\n\n/*======================================================\n************   Panels   ************\n======================================================*/\n/* global $:true */\n/*jshint unused: false*/\n+function ($) {\n    \"use strict\";\n\n    $.allowPanelOpen = true;\n    $.openPanel = function (panel) {\n        if (!$.allowPanelOpen) return false;\n        if (panel === 'left' || panel === 'right') panel = \".panel-\" + panel; //\n        panel = panel ? $(panel) : $(\".panel\").eq(0);\n        var direction = panel.hasClass(\"panel-right\") ? \"right\" : \"left\";\n        if (panel.length === 0 || panel.hasClass('active')) return false;\n        $.closePanel(); // Close if some panel is opened\n        $.allowPanelOpen = false;\n        var effect = panel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n        panel.css({ display: 'block' }).addClass('active');\n        panel.trigger('open');\n\n        // Trigger reLayout\n        var clientLeft = panel[0].clientLeft;\n\n        // Transition End;\n        var transitionEndTarget = effect === 'reveal' ? $($.getCurrentPage()) : panel;\n        var openedTriggered = false;\n\n        function panelTransitionEnd() {\n            transitionEndTarget.transitionEnd(function (e) {\n                if (e.target === transitionEndTarget[0]) {\n                    if (panel.hasClass('active')) {\n                        panel.trigger('opened');\n                    } else {\n                        panel.trigger('closed');\n                    }\n                    $.allowPanelOpen = true;\n                } else panelTransitionEnd();\n            });\n        }\n        panelTransitionEnd();\n\n        $(document.body).addClass('with-panel-' + direction + '-' + effect);\n        return true;\n    };\n    $.closePanel = function () {\n        var activePanel = $('.panel.active');\n        if (activePanel.length === 0) return false;\n        var effect = activePanel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n        var panelPosition = activePanel.hasClass('panel-left') ? 'left' : 'right';\n        activePanel.removeClass('active');\n        var transitionEndTarget = effect === 'reveal' ? $('.page') : activePanel;\n        activePanel.trigger('close');\n        $.allowPanelOpen = false;\n\n        transitionEndTarget.transitionEnd(function () {\n            if (activePanel.hasClass('active')) return;\n            activePanel.css({ display: '' });\n            activePanel.trigger('closed');\n            $('body').removeClass('panel-closing');\n            $.allowPanelOpen = true;\n        });\n\n        $('body').addClass('panel-closing').removeClass('with-panel-' + panelPosition + '-' + effect);\n    };\n\n    $(document).on(\"click\", \".open-panel\", function (e) {\n        var panel = $(e.target).data(panel);\n        $.openPanel(panel);\n    });\n    $(document).on(\"click\", \".close-panel, .panel-overlay\", function (e) {\n        $.closePanel();\n    });\n    /*======================================================\n    ************   Swipe panels   ************\n    ======================================================*/\n    $.initSwipePanels = function () {\n        var panel, side;\n        var swipePanel = $.smConfig.swipePanel;\n        var swipePanelOnlyClose = $.smConfig.swipePanelOnlyClose;\n        var swipePanelCloseOpposite = true;\n        var swipePanelActiveArea = false;\n        var swipePanelThreshold = 2;\n        var swipePanelNoFollow = false;\n\n        if (!(swipePanel || swipePanelOnlyClose)) return;\n\n        var panelOverlay = $('.panel-overlay');\n        var isTouched,\n            isMoved,\n            isScrolling,\n            touchesStart = {},\n            touchStartTime,\n            touchesDiff,\n            translate,\n            opened,\n            panelWidth,\n            effect,\n            direction;\n        var currentPage = $($.getCurrentPage());\n\n        function handleTouchStart(e) {\n            currentPage = $($.getCurrentPage()); //page may changed\n            if (!$.allowPanelOpen || !swipePanel && !swipePanelOnlyClose || isTouched) return;\n            if ($('.modal-in, .photo-browser-in').length > 0) return;\n            if (!(swipePanelCloseOpposite || swipePanelOnlyClose)) {\n                if ($('.panel.active').length > 0 && !panel.hasClass('active')) return;\n            }\n            var position = $.getTouchPosition(e);\n            touchesStart.x = position.x;\n            touchesStart.y = position.y;\n            if (swipePanelCloseOpposite || swipePanelOnlyClose) {\n                if ($('.panel.active').length > 0) {\n                    side = $('.panel.active').hasClass('panel-left') ? 'left' : 'right';\n                } else {\n                    if (swipePanelOnlyClose) return;\n                    side = swipePanel;\n                }\n                if (!side) return;\n            }\n            panel = $('.panel.panel-' + side);\n            if (!panel[0]) return;\n            opened = panel.hasClass('active');\n            if (swipePanelActiveArea && !opened) {\n                if (side === 'left') {\n                    if (touchesStart.x > swipePanelActiveArea) return;\n                }\n                if (side === 'right') {\n                    if (touchesStart.x < window.innerWidth - swipePanelActiveArea) return;\n                }\n            }\n            isMoved = false;\n            isTouched = true;\n            isScrolling = undefined;\n\n            touchStartTime = new Date().getTime();\n            direction = undefined;\n        }\n\n        function handleTouchMove(e) {\n            if (!isTouched) return;\n            if (!panel[0]) return;\n            if (e.f7PreventPanelSwipe) return;\n            var position = $.getTouchPosition(e);\n            var pageX = position.x;\n            var pageY = position.y;\n            if (typeof isScrolling === 'undefined') {\n                isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n            }\n            if (isScrolling) {\n                isTouched = false;\n                return;\n            }\n            if (!direction) {\n                if (pageX > touchesStart.x) {\n                    direction = 'to-right';\n                } else {\n                    direction = 'to-left';\n                }\n\n                if (side === 'left' && direction === 'to-left' && !panel.hasClass('active') || side === 'right' && direction === 'to-right' && !panel.hasClass('active')) {\n                    isTouched = false;\n                    return;\n                }\n            }\n\n            if (swipePanelNoFollow) {\n                var timeDiff = new Date().getTime() - touchStartTime;\n                if (timeDiff < 300) {\n                    if (direction === 'to-left') {\n                        if (side === 'right') $.openPanel(side);\n                        if (side === 'left' && panel.hasClass('active')) $.closePanel();\n                    }\n                    if (direction === 'to-right') {\n                        if (side === 'left') $.openPanel(side);\n                        if (side === 'right' && panel.hasClass('active')) $.closePanel();\n                    }\n                }\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n\n            if (!isMoved) {\n                effect = panel.hasClass('panel-cover') ? 'cover' : 'reveal';\n                if (!opened) {\n                    panel.show();\n                    panelOverlay.show();\n                }\n                panelWidth = panel[0].offsetWidth;\n                panel.transition(0);\n                /*\n                if (panel.find('.' + app.params.viewClass).length > 0) {\n                    if (app.sizeNavbars) app.sizeNavbars(panel.find('.' + app.params.viewClass)[0]);\n                }\n                */\n            }\n\n            isMoved = true;\n\n            e.preventDefault();\n            var threshold = opened ? 0 : -swipePanelThreshold;\n            if (side === 'right') threshold = -threshold;\n\n            touchesDiff = pageX - touchesStart.x + threshold;\n\n            if (side === 'right') {\n                translate = touchesDiff - (opened ? panelWidth : 0);\n                if (translate > 0) translate = 0;\n                if (translate < -panelWidth) {\n                    translate = -panelWidth;\n                }\n            } else {\n                translate = touchesDiff + (opened ? panelWidth : 0);\n                if (translate < 0) translate = 0;\n                if (translate > panelWidth) {\n                    translate = panelWidth;\n                }\n            }\n            if (effect === 'reveal') {\n                currentPage.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                panelOverlay.transform('translate3d(' + translate + 'px,0,0)');\n                //app.pluginHook('swipePanelSetTransform', currentPage[0], panel[0], Math.abs(translate / panelWidth));\n            } else {\n                panel.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                //app.pluginHook('swipePanelSetTransform', currentPage[0], panel[0], Math.abs(translate / panelWidth));\n            }\n        }\n\n        function handleTouchEnd(e) {\n            if (!isTouched || !isMoved) {\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n            isTouched = false;\n            isMoved = false;\n            var timeDiff = new Date().getTime() - touchStartTime;\n            var action;\n            var edge = translate === 0 || Math.abs(translate) === panelWidth;\n\n            if (!opened) {\n                if (translate === 0) {\n                    action = 'reset';\n                } else if (timeDiff < 300 && Math.abs(translate) > 0 || timeDiff >= 300 && Math.abs(translate) >= panelWidth / 2) {\n                    action = 'swap';\n                } else {\n                    action = 'reset';\n                }\n            } else {\n                if (translate === -panelWidth) {\n                    action = 'reset';\n                } else if (timeDiff < 300 && Math.abs(translate) >= 0 || timeDiff >= 300 && Math.abs(translate) <= panelWidth / 2) {\n                    if (side === 'left' && translate === panelWidth) action = 'reset';else action = 'swap';\n                } else {\n                    action = 'reset';\n                }\n            }\n            if (action === 'swap') {\n                $.allowPanelOpen = true;\n                if (opened) {\n                    $.closePanel();\n                    if (edge) {\n                        panel.css({ display: '' });\n                        $('body').removeClass('panel-closing');\n                    }\n                } else {\n                    $.openPanel(side);\n                }\n                if (edge) $.allowPanelOpen = true;\n            }\n            if (action === 'reset') {\n                if (opened) {\n                    $.allowPanelOpen = true;\n                    $.openPanel(side);\n                } else {\n                    $.closePanel();\n                    if (edge) {\n                        $.allowPanelOpen = true;\n                        panel.css({ display: '' });\n                    } else {\n                        var target = effect === 'reveal' ? currentPage : panel;\n                        $('body').addClass('panel-closing');\n                        target.transitionEnd(function () {\n                            $.allowPanelOpen = true;\n                            panel.css({ display: '' });\n                            $('body').removeClass('panel-closing');\n                        });\n                    }\n                }\n            }\n            if (effect === 'reveal') {\n                currentPage.transition('');\n                currentPage.transform('');\n            }\n            panel.transition('').transform('');\n            panelOverlay.css({ display: '' }).transform('');\n        }\n        $(document).on($.touchEvents.start, handleTouchStart);\n        $(document).on($.touchEvents.move, handleTouchMove);\n        $(document).on($.touchEvents.end, handleTouchEnd);\n    };\n\n    $.initSwipePanels();\n}($);\n\n// jshint ignore: start\n/*\n * \n */\n+function ($) {\n    \"use strict\";\n\n    if (!window.CustomEvent) {\n        window.CustomEvent = function (type, config) {\n            var e = document.createEvent('CustomEvent');\n            e.initCustomEvent(type, config.bubbles, config.cancelable, config.detail, config.id);\n            return e;\n        };\n    }\n\n    var Router = function Router() {\n        this.state = sessionStorage;\n        this.state.setItem(\"stateid\", parseInt(this.state.getItem(\"stateid\") || 1) + 1);\n        this.state.setItem(\"currentStateID\", this.state.getItem(\"stateid\"));\n        this.stack = sessionStorage;\n        this.stack.setItem(\"back\", \"[]\"); //, {url, pageid, stateid}\n        this.stack.setItem(\"forward\", \"[]\"); //, {url, pageid, stateid}\n        this.extras = {}; //page extra: popup, panel...\n        this.init();\n        this.xhr = null;\n    };\n\n    Router.prototype.defaults = {\n        transition: true\n    };\n\n    Router.prototype.init = function () {\n        var currentPage = this.getCurrentPage();\n        if (!currentPage[0]) currentPage = $(\".page\").eq(0).addClass(\"page-current\");\n        var hash = location.hash;\n        if (currentPage[0] && !currentPage[0].id) currentPage[0].id = hash ? hash.slice(1) : this.genRandomID();\n\n        if (!currentPage[0]) throw new Error(\"can't find .page element\");\n        var newCurrentPage = $(hash);\n\n        if (newCurrentPage[0] && (!currentPage[0] || hash.slice(1) !== currentPage[0].id)) {\n            currentPage.removeClass(\"page-current\");\n            newCurrentPage.addClass(\"page-current\");\n            currentPage = newCurrentPage;\n        }\n\n        //state\n        var state = history.state;\n        if (!state) {\n            var id = this.genStateID();\n            this.replaceState(location.href, id);\n            this.setCurrentStateID(id);\n        }\n\n        var self = this;\n        window.addEventListener('load', function () {\n            //safaribugsafari popstate setTimeout \n            // https://github.com/visionmedia/page.js/pull/239/files\n            setTimeout(function () {\n                window.addEventListener('popstate', $.proxy(self.onpopstate, self));\n            }, 0);\n        }, false);\n    };\n\n    //load new page, and push to history\n    Router.prototype.loadPage = function (url, noAnimation, replace, reload) {\n\n        var param = url;\n\n        if (noAnimation === undefined) {\n            noAnimation = !this.defaults.transition;\n        }\n\n        if ((typeof url === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(url)) === (0, _typeof3.default)(\"a\")) {\n            param = {\n                url: url,\n                noAnimation: noAnimation,\n                replace: replace\n            };\n        }\n\n        var url = param.url,\n            noAnimation = param.noAnimation,\n            replace = param.replace;\n\n        this.getPage(url, function (page, extra) {\n\n            var currentPage = this.getCurrentPage();\n\n            var pageid = currentPage[0].id;\n\n            var action = \"pushBack\";\n            if (replace) action = \"replaceBack\";\n            if (reload) action = \"reloadBack\";\n            this[action]({\n                url: location.href,\n                pageid: \"#\" + pageid,\n                id: this.getCurrentStateID(),\n                animation: !noAnimation\n            });\n\n            //remove all forward page\n            var forward = JSON.parse(this.state.getItem(\"forward\") || \"[]\");\n            var self = this;\n            for (var i = 0; i < forward.length; i++) {\n                $(forward[i].pageid).each(function () {\n                    var $page = $(this);\n                    if ($page.data(\"page-remote\")) {\n                        var pageExtra = self.extras[$page[0].id];\n                        pageExtra && pageExtra.remove();\n                        self.extras[$page[0].id] = undefined;\n                        $page.remove();\n                    }\n                });\n            }\n            this.state.setItem(\"forward\", \"[]\"); //clearforward\n\n            var duplicatePage = $(\"#\" + $(page)[0].id);\n\n            page.insertBefore($(\".page\")[0]);\n\n            if (duplicatePage[0] !== page[0]) duplicatePage.remove(); //if inline mod, the duplicate page is current page\n\n            if (extra) self.extras[page[0].id] = extra.appendTo(document.body);\n\n            var id = this.genStateID();\n            this.setCurrentStateID(id);\n\n            this[replace || reload ? \"replaceState\" : \"pushState\"](url, id);\n\n            this.forwardStack = []; //clear forward stack\n\n            this.animatePages(this.getCurrentPage(), page, null, noAnimation);\n        });\n    };\n\n    //load new page and replace current page inhistory\n    Router.prototype.replacePage = function (url, noAnimation) {\n        return this.loadPage(url, noAnimation, true);\n    };\n\n    //reload current page\n    Router.prototype.reloadPage = function () {\n        return this.loadPage(location.href, true, false, true);\n    };\n\n    Router.prototype.animatePages = function (leftPage, rightPage, leftToRight, noTransition) {\n        var removeClasses = 'page-left page-right page-from-center-to-left page-from-center-to-right page-from-right-to-center page-from-left-to-center';\n        if (noTransition) {\n            if (!leftToRight) {\n                rightPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                leftPage.removeClass(removeClasses).removeClass('page-current');\n                rightPage.removeClass(removeClasses).addClass(\"page-current\");\n                rightPage.trigger(\"pageInitInternal\", [rightPage[0].id, rightPage]);\n\n                if (rightPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n            } else {\n                leftPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                rightPage.removeClass(removeClasses).removeClass('page-current');\n                leftPage.removeClass(removeClasses).addClass(\"page-current\");\n\n                if (leftPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [leftPage[0].id, leftPage]);\n            }\n        } else {\n            if (!leftToRight) {\n                rightPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                leftPage.removeClass(removeClasses).addClass(\"page-from-center-to-left\").removeClass('page-current');\n                rightPage.removeClass(removeClasses).addClass(\"page-from-right-to-center page-current\");\n\n                leftPage.animationEnd(function () {\n                    leftPage.removeClass(removeClasses);\n                });\n                rightPage.animationEnd(function () {\n                    afterAnimation(rightPage);\n                });\n\n                if (rightPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [rightPage[0].id, rightPage]);\n            } else {\n                leftPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                rightPage.removeClass(removeClasses).addClass(\"page-from-center-to-right\").removeClass('page-current');\n                leftPage.removeClass(removeClasses).addClass(\"page-from-left-to-center page-current\");\n\n                leftPage.animationEnd(function () {\n                    afterAnimation(leftPage);\n                });\n                rightPage.animationEnd(function () {\n                    rightPage.removeClass(removeClasses);\n                });\n                if (leftPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [leftPage[0].id, leftPage]);\n            }\n        }\n\n        function afterAnimation(page) {\n            page.removeClass(removeClasses);\n            page.trigger(\"pageAnimationEnd\", [page[0].id, page]);\n        }\n    };\n    Router.prototype.getCurrentPage = function () {\n        return $(\".page-current\");\n    };\n    //url\n    Router.prototype.forward = function (url) {\n        var stack = JSON.parse(this.stack.getItem(\"forward\"));\n        if (stack.length) {\n            history.forward();\n        } else {\n            location.href = url;\n        }\n    };\n    //url\n    Router.prototype.back = function (url) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        if (stack.length) {\n            history.back();\n        } else if (url) {\n            location.href = url;\n        } else {\n            history.back();\n        }\n    };\n\n    //\n    Router.prototype._back = function () {\n        var h = this.popBack();\n        if (!h) return;\n        var currentPage = this.getCurrentPage();\n        var newPage = $(h.pageid);\n        if (!newPage[0]) return;\n        this.pushForward({ url: location.href, pageid: \"#\" + currentPage[0].id, id: this.getCurrentStateID(), animation: h.animation });\n        this.setCurrentStateID(h.id);\n        this.animatePages(newPage, currentPage, true, !h.animation);\n    };\n\n    //\n    Router.prototype._forward = function () {\n        var h = this.popForward();\n        if (!h) return;\n        var currentPage = this.getCurrentPage();\n        var newPage = $(h.pageid);\n        if (!newPage[0]) return;\n        this.pushBack({ url: location.href, pageid: \"#\" + currentPage[0].id, id: this.getCurrentStateID(), animation: h.animation });\n        this.setCurrentStateID(h.id);\n        this.animatePages(currentPage, newPage, false, !h.animation);\n    };\n\n    Router.prototype.pushState = function (url, id) {\n        history.pushState({ url: url, id: id }, '', url);\n    };\n\n    Router.prototype.replaceState = function (url, id) {\n        history.replaceState({ url: url, id: id }, '', url);\n    };\n\n    Router.prototype.onpopstate = function (d) {\n        var state = d.state;\n        if (!state) {\n            return true;\n        }\n\n        if (state.id === this.getCurrentStateID()) {\n            return false;\n        }\n        var forward = state.id > this.getCurrentStateID();\n        if (forward) this._forward();else this._back();\n    };\n\n    //urlDOMajax\n    Router.prototype.getPage = function (url, callback) {\n        if (url[0] === \"#\") return callback.apply(this, [$(url)]);\n\n        this.dispatch(\"pageLoadStart\");\n\n        if (this.xhr && this.xhr.readyState < 4) {\n            this.xhr.onreadystatechange = $.noop;\n            this.xhr.abort();\n            this.dispatch(\"pageLoadCancel\");\n        }\n\n        var self = this;\n\n        this.xhr = $.ajax({\n            url: url,\n            success: $.proxy(function (data, s, xhr) {\n                var html = this.parseXHR(xhr);\n                var $page = html[0];\n                var $extra = html[1];\n                if (!$page[0].id) $page[0].id = this.genRandomID();\n                $page.data(\"page-remote\", 1);\n                callback.apply(this, [$page, $extra]);\n            }, this),\n            error: function error() {\n                self.dispatch(\"pageLoadError\");\n            },\n            complete: function complete() {\n                self.dispatch(\"pageLoadComplete\");\n            }\n        });\n    };\n    Router.prototype.parseXHR = function (xhr) {\n        var response = xhr.responseText;\n        var body = response.match(/<body[^>]*>([\\s\\S.]*)<\\/body>/i);\n        var html = body ? body[1] : response;\n        html = \"<div>\" + html + \"</div>\";\n        var tmp = $(html);\n\n        var $extra = tmp.find(\".popup, .popover, .panel, .panel-overlay\");\n\n        var $page = tmp.find(\".page\");\n        if (!$page[0]) $page = tmp.addClass(\"page\");\n        return [$page, $extra];\n    };\n\n    Router.prototype.genStateID = function () {\n        var id = parseInt(this.state.getItem(\"stateid\")) + 1;\n        this.state.setItem(\"stateid\", id);\n        return id;\n    };\n    Router.prototype.getCurrentStateID = function () {\n        return parseInt(this.state.getItem(\"currentStateID\"));\n    };\n    Router.prototype.setCurrentStateID = function (id) {\n        this.state.setItem(\"currentStateID\", id);\n    };\n    Router.prototype.genRandomID = function () {\n        return \"page-\" + +new Date();\n    };\n\n    Router.prototype.popBack = function () {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        if (!stack.length) return null;\n        var h = stack.splice(stack.length - 1, 1)[0];\n        this.stack.setItem(\"back\", (0, _stringify2.default)(stack));\n        return h;\n    };\n    Router.prototype.pushBack = function (h) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        stack.push(h);\n        this.stack.setItem(\"back\", (0, _stringify2.default)(stack));\n    };\n    Router.prototype.replaceBack = function (h) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        stack.pop();\n        stack.push(h);\n        this.stack.setItem(\"back\", (0, _stringify2.default)(stack));\n    };\n    Router.prototype.reloadBack = function (h) {\n        //do nothing;\n        return;\n    };\n    Router.prototype.popForward = function () {\n        var stack = JSON.parse(this.stack.getItem(\"forward\"));\n        if (!stack.length) return null;\n        var h = stack.splice(stack.length - 1, 1)[0];\n        this.stack.setItem(\"forward\", (0, _stringify2.default)(stack));\n        return h;\n    };\n    Router.prototype.pushForward = function (h) {\n        var stack = JSON.parse(this.stack.getItem(\"forward\"));\n        stack.push(h);\n        this.stack.setItem(\"forward\", (0, _stringify2.default)(stack));\n    };\n\n    Router.prototype.dispatch = function (event) {\n        var e = new CustomEvent(event, {\n            bubbles: true,\n            cancelable: true\n        });\n\n        window.dispatchEvent(e);\n    };\n\n    $(function () {\n        if (!$.smConfig.router) return;\n\n        var router = $.router = new Router();\n        router.defaults = Router.prototype.defaults;\n\n        $(document).on(\"click\", \"a\", function (e) {\n            var $target = $(e.currentTarget);\n            if ($target.hasClass(\"external\") || $target[0].hasAttribute(\"external\") || $target.hasClass(\"tab-link\") || $target.hasClass(\"open-popup\") || $target.hasClass(\"open-panel\")) return;\n            e.preventDefault();\n            var url = $target.attr(\"href\");\n            if ($target.hasClass(\"back\")) {\n                router.back(url);\n                return;\n            }\n\n            if (!url || url === \"#\" || /javascript:.*;/.test(url)) return;\n            router.loadPage(url, $target.hasClass(\"no-transition\") ? true : undefined, $target.hasClass(\"replace\") ? true : undefined); //undefined is different to false\n        });\n    });\n}($);\n// jshint ignore: end\n\n/* global $:true */\n/*jshint unused: false*/\n+function ($) {\n    \"use strict\";\n\n    var getPage = function getPage() {\n        var $page = $(\".page-current\");\n        if (!$page[0]) $page = $(\".page\").addClass(\"page-current\");\n        return $page;\n    };\n\n    //JS\n    $.initPage = function (page) {\n        var $page = page ? $(page) : getPage();\n        if (!$page[0]) $page = $(document.body);\n        var $content = $page.hasClass(\"content\") ? $page : $page.find(\".content\");\n\n        $.initPullToRefresh($content);\n        $.initInfiniteScroll($content);\n        $.initCalendar($content);\n        $.initIndexList($content);\n\n        //extend\n        if ($.initSwiper) $.initSwiper($content);\n        if ($.initSwipeout) $.initSwipeout(); // don't pass $content because the swipeout element is not $content\n    };\n\n    if ($.smConfig.showPageLoadingIndicator) {\n        //  push \n        $(window).on(\"pageLoadStart\", function () {\n            $.showIndicator();\n        });\n        $(document).on(\"pageAnimationStart\", function () {\n            $.hideIndicator();\n        });\n        $(window).on(\"pageLoadCancel\", function () {\n            $.hideIndicator();\n        });\n        $(window).on(\"pageLoadError\", function () {\n            $.hideIndicator();\n            $.toast(\"\");\n        });\n    }\n\n    $.init = function () {\n        var $page = getPage();\n        var id = $page[0].id;\n        if ($page.hasClass(\"page-inited\")) {\n            $page.trigger(\"pageReinit\", [id, $page]);\n        } else {\n            $.initPage();\n            $page.addClass(\"page-inited\");\n            $page.trigger(\"pageInit\", [id, $page]);\n        }\n    };\n\n    $(function () {\n        if ($.smConfig.autoInit) {\n            $.init();\n        }\n\n        $(document).on(\"pageInitInternal\", function (e, id, $page) {\n            $.init();\n        });\n    });\n}($);\n//# sourceMappingURL=light7.js.map"]}
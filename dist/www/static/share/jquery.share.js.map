{"version":3,"sources":["../../../../www/static/share/jquery.share.js"],"names":["$","fn","share","$options","$head","document","head","$defaults","url","location","href","site_url","origin","source","find","attr","title","description","image","prop","imageSelector","undefined","weiboKey","wechatQrcodeTitle","wechatQrcodeHelper","wechatQrcodeSize","mobileSites","sites","disabled","initialized","$globals","extend","$templates","qzone","qq","tencent","weibo","wechat","douban","diandian","linkedin","facebook","twitter","google","$ariaLabels","each","data","$data","map","get","join","$container","addClass","createIcons","createWechat","$sites","getSites","mode","reverse","length","i","$name","$url","makeUrl","$link","prepend","append","$wechat","qrcode","render","size","text","offset","top","isMobileScreen","slice","$disabled","split","runningInWeChat","push","el","removeItemIndex","inArray","splice","$template","$key","hasOwnProperty","$camelCaseKey","replace","$str","toUpperCase","$value","encodeURIComponent","RegExp","test","navigator","userAgent","window","width","jQuery"],"mappings":"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","file":"jquery.share.js","sourcesContent":["/**\n * Share.js\n *\n * @author  overtrue <i@overtrue.me>\n * @license MIT\n *\n * @example\n * <pre>\n * $('.share-components').share();\n *\n * // or\n *\n * $('.share-bar').share({\n *     sites: ['qzone', 'qq', 'weibo','wechat'],\n *     // ...\n * });\n * </pre>\n */\n;(function($){\n    /**\n     * Initialize a share bar.\n     *\n     * @param {Object}        $options globals (optional).\n     *\n     * @return {Void}\n     */\n    $.fn.share = function ($options) {\n        var $head = $(document.head);\n\n        var $defaults = {\n            url: location.href,\n            site_url: location.origin,\n            source: $head.find('[name=site], [name=Site]').attr('content') || document.title,\n            title: $head.find('[name=title], [name=Title]').attr('content') || document.title,\n            description: $head.find('[name=description], [name=Description]').attr('content') || '',\n            image: $('img:first').prop('src') || '',\n            imageSelector: undefined,\n\n            weiboKey: '',\n\n            wechatQrcodeTitle: '微信扫一扫：分享',\n            wechatQrcodeHelper: '<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>',\n            wechatQrcodeSize: 100,\n\n            mobileSites: [],\n            sites: ['weibo','qq','wechat','tencent','douban','qzone','linkedin','diandian','facebook','twitter','google'],\n            disabled: [],\n            initialized: false\n        };\n\n        var $globals = $.extend({}, $defaults, $options);\n\n        var $templates = {\n            qzone       : 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}',\n            qq          : 'http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}',\n            tencent     : 'http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}',\n            weibo       : 'http://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}',\n            wechat      : 'javascript:;',\n            douban      : 'http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11',\n            diandian    : 'http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link',\n            linkedin    : 'http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin',\n            facebook    : 'https://www.facebook.com/sharer/sharer.php?u={{URL}}&title={{TITLE}}&description={{DESCRIPTION}}&caption={{SUBHEAD}}&link={{URL}}&picture={{IMAGE}}',\n            twitter     : 'https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{SITE_URL}}',\n            google      : 'https://plus.google.com/share?url={{URL}}'\n        };\n\n        var $ariaLabels = {\n            qzone: \"QQ空间\",\n            qq: \"QQ\",\n            tencent: \"腾讯微博\",\n            weibo: \"微博\",\n            wechat: \"微信\",\n            douban: \"豆瓣\",\n            diandian: \"点点\",\n            linkedin: \"LinkedIn\",\n            facebook: \"Facebook\",\n            twitter: \"Twitter\",\n            google: \"Google\"\n        };\n\n        this.each(function() {\n            if ($(this).data('initialized')) {\n                return true;\n            }\n\n            var $data      = $.extend({}, $globals, $(this).data());\n            if ($data.imageSelector) {\n                $data.image = $($data.imageSelector).map(function() {\n                    return $(this).prop('src');\n                }).get().join('||');\n            }\n            var $container = $(this).addClass('share-component social-share');\n\n            createIcons($container, $data);\n            createWechat($container, $data);\n\n            $(this).data('initialized', true);\n        });\n\n        /**\n         * Create site icons\n         *\n         * @param {Object|String} $container\n         * @param {Object}        $data\n         */\n        function createIcons ($container, $data) {\n            var $sites = getSites($data);\n\n            $data.mode == 'prepend' ? $sites.reverse() : $sites\n\n            if (!$sites.length) {return;}\n\n            $.each($sites, function (i, $name) {\n                var $url  = makeUrl($name, $data);\n                var $link = $data.initialized ? $container.find('.icon-'+$name) : $('<a class=\"social-share-icon icon-'+$name+'\"></a>');\n\n                if (!$link.length) {\n                    return true;\n                }\n                $link.prop('aria-label', \"分享到 \"+$ariaLabels[$name]);\n\n                $link.prop('href', $url);\n\n                if ($name === 'wechat') {\n                    $link.prop('tabindex', -1);\n                } else {\n                    $link.prop('target', '_blank');\n                }\n\n                if (!$data.initialized) {\n                    $data.mode == 'prepend' ? $container.prepend($link) : $container.append($link);\n                }\n            });\n        }\n\n        /**\n         * Create the wechat icon and QRCode.\n         *\n         * @param {Object|String} $container\n         * @param {Object}        $data\n         */\n        function createWechat ($container, $data) {\n            var $wechat = $container.find('a.icon-wechat');\n\n            if (!$wechat.length) {return;}\n\n            $wechat.append('<div class=\"wechat-qrcode\"><h4>'+$data.wechatQrcodeTitle+'</h4><div class=\"qrcode\"></div><div class=\"help\">'+$data.wechatQrcodeHelper+'</div></div>');\n\n            $wechat.find('.qrcode').qrcode({render: 'image', size: $data.wechatQrcodeSize, text: $data.url});\n\n            if ($wechat.offset().top < 100) {\n                $wechat.find('.wechat-qrcode').addClass('bottom');\n            }\n        }\n\n        /**\n         * Get available site lists.\n         *\n         * @param {Array} $data\n         *\n         * @return {Array}\n         */\n        function getSites ($data) {\n            if ($data['mobileSites'].length === 0 && $data['sites'].length) {\n                $data['mobileSites'] = $data['sites'];\n            };\n\n            var $sites = (isMobileScreen() ? $data['mobileSites'] : ($data['sites'].length ? $data['sites']: [])).slice(0);\n            var $disabled = $data['disabled'];\n\n            if (typeof $sites == 'string') { $sites = $sites.split(/\\s*,\\s*/); }\n            if (typeof $disabled == 'string') { $disabled = $disabled.split(/\\s*,\\s*/); }\n\n            if (runningInWeChat()) {\n                $disabled.push('wechat');\n            }\n            // Remove elements\n            $disabled.length && $.each($disabled, function (i, el) {\n                var removeItemIndex = $.inArray(el, $sites);\n                if (removeItemIndex !== -1) {\n                    $sites.splice(removeItemIndex, 1);\n                }\n            });\n\n            return $sites;\n        }\n\n        /**\n         * Build the url of icon.\n         *\n         * @param {String} $name\n         * @param {Object} $data\n         *\n         * @return {String}\n         */\n        function makeUrl ($name, $data) {\n            var $template = $templates[$name];\n            $data['summary'] = $data['description'];\n\n            for (var $key in $data) {\n                if ($data.hasOwnProperty($key)) {\n                    var $camelCaseKey = $name + $key.replace(/^[a-z]/, function($str){\n                        return $str.toUpperCase();\n                    });\n\n                    var $value = encodeURIComponent($data[$camelCaseKey] === undefined ? $data[$key] : $data[$camelCaseKey]);\n                    $template = $template.replace(new RegExp('{{'+$key.toUpperCase()+'}}', 'g'), $value);\n                }\n            }\n\n            return $template;\n        }\n\n        /**\n         * Detect wechat browser.\n         *\n         * @return {Boolean}\n         */\n        function runningInWeChat() {\n            return /MicroMessenger/i.test(navigator.userAgent);\n        }\n\n        /**\n         * Mobile screen width.\n         *\n         * @return {boolean}\n         */\n        function isMobileScreen () {\n            return $(window).width() <= 768;\n        }\n    };\n\n    // Domready after initialization\n    $(function () {\n        $('.share-component,.social-share').share();\n    });\n})(jQuery);\n"]}
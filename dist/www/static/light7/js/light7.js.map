{"version":3,"sources":["../../../../../www/static/light7/js/light7.js"],"names":["$","defaults","autoInit","showPageLoadingIndicator","router","swipePanel","swipePanelOnlyClose","pushAnimationDuration","smConfig","extend","config","device","ua","navigator","userAgent","android","match","ipad","ipod","iphone","ios","androidChrome","os","osVersion","toLowerCase","indexOf","replace","split","webView","osVersionArr","minimalUi","length","attr","windowWidth","window","width","windowHeight","height","statusBar","screen","classNames","pixelRatio","devicePixelRatio","push","Math","floor","major","parseInt","i","removeClass","addClass","join","compareVersion","a","b","as","bs","x","y","getTouchPosition","e","originalEvent","type","targetTouches","pageX","pageY","detect","platform","browser","webkit","osx","webos","win","test","wp","touchpad","kindle","silk","blackberry","bb10","rimtabletos","playbook","chrome","firefox","firefoxos","ie","webview","safari","version","tablet","phone","call","__detect","forEach","dimension","Dimension","m","toUpperCase","fn","margin","elem","size","sides","side","css","noop","support","touch","DocumentTouch","document","touchEvents","start","move","end","getTranslate","el","axis","matrix","curTransform","curStyle","transformMatrix","getComputedStyle","WebKitCSSMatrix","webkitTransform","MozTransform","OTransform","MsTransform","msTransform","transform","getPropertyValue","toString","m41","parseFloat","m42","requestAnimationFrame","callback","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","cancelAnimationFrame","id","webkitCancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","transitionEnd","events","dom","fireCallBack","target","off","on","dataset","dataKey","attributes","name","toCamelCase","value","key","undefined","data","getAttribute","smElementDataStorage","animationEnd","transition","duration","elStyle","style","webkitTransitionDuration","MsTransitionDuration","msTransitionDuration","MozTransitionDuration","OTransitionDuration","transitionDuration","prevAll","selector","prevEls","previousElementSibling","prev","is","nextAll","nextEls","nextElementSibling","next","show","elementDisplay","defaultDisplay","nodeName","element","display","createElement","body","appendChild","parentNode","removeChild","each","scrollHeight","FastClick","layer","options","oldOnClick","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","tapDelay","tapTimeout","notNeeded","bind","method","context","apply","arguments","methods","l","deviceIsAndroid","addEventListener","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","prototype","stopImmediatePropagation","removeEventListener","capture","rmv","Node","hijacked","adv","event","propagationStopped","onclick","deviceIsWindowsPhone","deviceIsIOS","deviceIsIOS4","deviceIsIOSWithBadTarget","deviceIsBlackBerry10","needsClick","disabled","className","needsFocus","readOnly","sendClick","clickEvent","activeElement","blur","changedTouches","createEvent","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","focus","setSelectionRange","updateScrollParent","scrollParent","parentElement","fastClickScrollParent","contains","offsetHeight","fastClickLastScrollTop","scrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","selection","getSelection","rangeCount","isCollapsed","identifier","preventDefault","timeStamp","lastClickTime","touchHasMoved","boundary","abs","findControl","labelElement","control","htmlFor","getElementById","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","top","parent","find","click","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","blackberryVersion","firefoxVersion","ontouchstart","exec","content","documentElement","scrollWidth","outerWidth","msTouchAction","touchAction","attach","Template7","t7","isArray","arr","Object","isObject","obj","isFunction","func","cache","helperToSlices","string","helperParts","slices","shiftIndex","j","part","hashParts","hashName","hashContent","hash","stringToBlocks","blocks","k","_blocks","block","contextName","helperSlices","helperName","helperContext","helperHash","slice","helperStartIndex","helperContent","elseContent","toSkip","foundClosed","foundElse","foundClosedElse","depth","inverseContent","template","t","getCompileFn","compile","getCompileInverse","getCompileVar","ctx","variable","parts","levelsUp","initialCtx","newDepth","isFinite","getCompiledArguments","contextArray","Error","resultString","compiledArguments","helpers","eval","compiled","inverse","ret","reverse","first","last","index","delimiter","delimeter","expression","condition","instance","rendered","registerHelper","unregisterHelper","getCurrentPage","showTab","tab","tabLink","force","newTab","activeClass","hasClass","trigger","tabs","oldTab","children","oldTabLink","oldTabId","old","noConflict","clicked","$target","currentTarget","highlight","pageId","$tab","showToolbar","_modalTemplateTempDiv","modalStack","modalStackClearQueue","shift","modal","params","modalHTML","modalTemplate","_compiledTemplates","buttonsHTML","buttons","bold","text","titleHTML","title","textHTML","afterTextHTML","afterText","noButtons","verticalButtons","innerHTML","modalContainer","append","close","closeModal","openModal","alert","callbackOk","modalTitle","modalButtonOk","confirm","callbackCancel","modalButtonCancel","prompt","val","modalLogin","modalUsernamePlaceholder","modalPasswordPlaceholder","username","password","modalPassword","showPreloader","modalPreloaderTitle","hidePreloader","showIndicator","hideIndicator","remove","actions","toPopover","groupSelector","buttonSelector","actionsToPopoverTemplate","modalActionsToPopoverTemplate","actionsToPopover","popoverHTML","popover","modalActionsTemplate","button","buttonClass","label","color","bg","groups","groupIndex","buttonIndex","buttonParams","clickTarget","removeOnClose","_modal","trim","childNodes","classList","add","sizePopover","left","modalWidth","modalHeight","modalAngle","modalAngleSize","modalAngleLeft","modalAngleTop","targetWidth","targetHeight","outerHeight","targetOffset","offset","targetParentPage","parents","modalTop","modalLeft","diff","modalPosition","max","min","viewClass","sizeNavbars","popup","pickerModal","loginScreen","toast","msg","time","$toast","appendTo","closePrevious","isModal","isPopover","isPopup","isLoginScreen","isPickerModal","isToast","marginTop","round","marginLeft","overlay","clientLeft","hide","handleClicks","url","clickedData","modalCloseByOutside","actionsCloseByOutside","popupCloseByOutside","rtl","Calendar","p","def","initialized","inline","container","isH","direction","inverter","animating","convertToPopover","onlyInPopover","input","inPopover","opened","formatDate","date","Date","year","getFullYear","month","getMonth","month1","day","getDate","weekDay","getDay","dateFormat","substring","monthNames","monthNamesShort","dayNames","dayNamesShort","addValue","multiple","inValuesIndex","getTime","splice","updateValue","setValue","arrValues","wrapper","inputValue","valueDate","onChange","map","formatValue","initCalendarEvents","col","allowItemClick","isTouched","isMoved","touchCurrentX","touchCurrentY","touchStartTime","touchEndTime","startTranslate","currentTranslate","wrapperWidth","wrapperHeight","percentage","touchesDiff","isScrolling","handleTouchStart","position","monthsTranslate","handleTouchMove","offsetWidth","handleTouchEnd","resetMonth","nextMonth","prevMonth","handleDayClick","dateYear","dateMonth","dateDay","onDayClick","closeOnSelect","prevYear","nextYear","touchMove","f7DestroyCalendarEvents","destroyCalendarEvents","colContainer","daysInMonth","d","monthHTML","daysInPrevMonth","firstDayOfMonthIndex","dayDate","currentValues","rows","cols","dayIndex","firstDay","today","setHours","minDate","maxDate","rowHTML","row","dayNumber","weekendDays","dayYear","dayMonth","updateCurrentMonthYear","dir","currentMonth","months","eq","currentYear","onMonthChangeStart","currentIndex","onMonthYearChangeStart","onMonthChangeEnd","rebuildBoth","nextMonthHTML","prevMonthHTML","newMonthHTML","prepend","setMonthsTranslate","onMonthAdd","onMonthYearChangeEnd","translate","prevMonthTranslate","currentMonthTranslate","nextMonthTranslate","animate","nextDate","nextDateTime","transitionEndCallback","prevDate","prevDateTime","setYearMonth","targetDate","currentDate","prevTranslate","monthTranslate","wrapperTranslate","layout","pickerHTML","pickerClass","layoutDate","currentMonthHTML","monthsHTML","weekHeaderHTML","weekHeader","weekDayIndex","dayName","cssClass","toolbarHTML","toolbar","toolbarTemplate","toolbarCloseText","monthPicker","monthPickerTemplate","yearPicker","yearPickerTemplate","openOnInput","open","scrollToInput","pageContent","paddingTop","paddingBottom","pageHeight","pageScrollHeight","newPaddingBottom","inputTop","closeOnHTMLClick","inputReadOnly","prop","onPickerClose","onClose","f7Calendar","onOpen","calendar","$this","initCalendar","$content","Picker","updateValuesOnMomentum","updateValuesOnTouchmove","rotateEffect","momentumRatio","freeMode","originBug","valueIndex","divider","newValue","newDisplayValue","displayValue","initPickerCol","colElement","updateItems","colIndex","items","itemHeight","itemsHeight","minTranslate","maxTranslate","replaceValues","values","displayValues","destroyEvents","newItemsHTML","columnHTML","html","calcSize","initEvents","colWidth","colHeight","item","activeIndex","animationFrameId","valueCallbacks","newActiveIndex","newTranslate","updateDuringScroll","previousActiveIndex","selectedItem","itemOffsetTop","translateOffset","itemOffset","itemsFit","ceil","angle","returnTo","velocityTranslate","velocityTime","pow","velocity","handleClick","detach","f7DestroyPickerCol","destroyPickerCol","resizeCols","onlyItems","columnItemsHTML","textAlign","colsHTML","f7Picker","pickerToClose","picker","args","Array","datetimePicker","getDays","days","getDaysByMonthAndYear","int_d","formatNumber","n","initMonthes","initYears","getHours","getMinutes","currentValue","concat","initPullToRefresh","pageContainer","eventsTarget","touchesStart","refresh","useTranslate","wasScrolled","triggerDistance","dynamicTriggerDistance","done","pullToRefreshDone","destroyPullToRefresh","pullToRefreshTrigger","pullToRefreshContent","handleInfiniteScroll","inf","distance","virtualListContainer","virtualList","onTop","f7VirtualList","reachEnd","attachInfiniteScroll","infiniteContent","detachInfiniteScroll","initInfiniteScroll","detachEvents","noti","timeout","diffX","diffY","touchStart","sqrt","touchEnd","closeNotification","attachEvents","notification","tpl","startTimeout","media","Index","indexListTemplate","render","list","draw","indexList","titles","titleSelector","titleTexts","toArray","indexes","proxy","pageOffsetTop","touching","li","getElementOnTouch","titleTop","result","initIndexList","$input","$btn","allowPanelOpen","openPanel","panel","closePanel","effect","transitionEndTarget","openedTriggered","panelTransitionEnd","activePanel","panelPosition","initSwipePanels","swipePanelCloseOpposite","swipePanelActiveArea","swipePanelThreshold","swipePanelNoFollow","panelOverlay","panelWidth","currentPage","innerWidth","f7PreventPanelSwipe","timeDiff","threshold","action","edge","CustomEvent","initCustomEvent","bubbles","Router","state","sessionStorage","setItem","getItem","stack","extras","init","xhr","location","genRandomID","newCurrentPage","history","genStateID","replaceState","href","setCurrentStateID","self","onpopstate","loadPage","noAnimation","reload","param","getPage","page","extra","pageid","getCurrentStateID","animation","forward","JSON","parse","$page","pageExtra","duplicatePage","insertBefore","forwardStack","animatePages","replacePage","reloadPage","leftPage","rightPage","leftToRight","noTransition","removeClasses","afterAnimation","back","_back","h","popBack","newPage","pushForward","_forward","popForward","pushBack","pushState","dispatch","readyState","onreadystatechange","abort","ajax","success","s","parseXHR","$extra","error","complete","response","responseText","tmp","replaceBack","pop","reloadBack","hasAttribute","initPage","initSwiper","initSwipeout"],"mappings":"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","file":"light7.js","sourcesContent":["/*!\n * =====================================================\n * light7 V0.4.3 - http://light7.org/\n *\n * =====================================================\n */\n/* global $:true */\n+ function($) {\n    \"use strict\";\n\n    //全局配置\n    var defaults = {\n        autoInit: false, //自动初始化页面\n        showPageLoadingIndicator: true, //push.js加载页面的时候显示一个加载提示\n        router: true, //默认使用router\n        swipePanel: \"left\", //滑动打开侧栏\n        swipePanelOnlyClose: false, //只允许滑动关闭，不允许滑动打开侧栏\n        pushAnimationDuration: 400 //不要动这个，这是解决安卓 animationEnd 事件无法触发的bug\n    };\n\n    $.smConfig = $.extend(defaults, $.config);\n\n}($);\n\n/*===========================\nDevice/OS Detection\n===========================*/\n/* global $:true */\n;\n(function($) {\n    \"use strict\";\n    var device = {};\n    var ua = navigator.userAgent;\n\n    var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n    var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n    var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n    var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\n    device.ios = device.android = device.iphone = device.ipad = device.androidChrome = false;\n\n    // Android\n    if (android) {\n        device.os = 'android';\n        device.osVersion = android[2];\n        device.android = true;\n        device.androidChrome = ua.toLowerCase().indexOf('chrome') >= 0;\n    }\n    if (ipad || iphone || ipod) {\n        device.os = 'ios';\n        device.ios = true;\n    }\n    // iOS\n    if (iphone && !ipod) {\n        device.osVersion = iphone[2].replace(/_/g, '.');\n        device.iphone = true;\n    }\n    if (ipad) {\n        device.osVersion = ipad[2].replace(/_/g, '.');\n        device.ipad = true;\n    }\n    if (ipod) {\n        device.osVersion = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n        device.iphone = true;\n    }\n    // iOS 8+ changed UA\n    if (device.ios && device.osVersion && ua.indexOf('Version/') >= 0) {\n        if (device.osVersion.split('.')[0] === '10') {\n            device.osVersion = ua.toLowerCase().split('version/')[1].split(' ')[0];\n        }\n    }\n\n    // Webview\n    device.webView = (iphone || ipad || ipod) && ua.match(/.*AppleWebKit(?!.*Safari)/i);\n\n    // Minimal UI\n    if (device.os && device.os === 'ios') {\n        var osVersionArr = device.osVersion.split('.');\n        device.minimalUi = !device.webView &&\n            (ipod || iphone) &&\n            (osVersionArr[0] * 1 === 7 ? osVersionArr[1] * 1 >= 1 : osVersionArr[0] * 1 > 7) &&\n            $('meta[name=\"viewport\"]').length > 0 && $('meta[name=\"viewport\"]').attr('content').indexOf('minimal-ui') >= 0;\n    }\n\n    // Check for status bar and fullscreen app mode\n    var windowWidth = $(window).width();\n    var windowHeight = $(window).height();\n    device.statusBar = false;\n    if (device.webView && (windowWidth * windowHeight === screen.width * screen.height)) {\n        device.statusBar = true;\n    } else {\n        device.statusBar = false;\n    }\n\n    // Classes\n    var classNames = [];\n\n    // Pixel Ratio\n    device.pixelRatio = window.devicePixelRatio || 1;\n    classNames.push('pixel-ratio-' + Math.floor(device.pixelRatio));\n    if (device.pixelRatio >= 2) {\n        classNames.push('retina');\n    }\n\n    // OS classes\n    if (device.os) {\n        classNames.push(device.os, device.os + '-' + device.osVersion.split('.')[0], device.os + '-' + device.osVersion.replace(/\\./g, '-'));\n        if (device.os === 'ios') {\n            var major = parseInt(device.osVersion.split('.')[0], 10);\n            for (var i = major - 1; i >= 6; i--) {\n                classNames.push('ios-gt-' + i);\n            }\n        }\n\n    }\n    // Status bar classes\n    if (device.statusBar) {\n        classNames.push('with-statusbar-overlay');\n    } else {\n        $('html').removeClass('with-statusbar-overlay');\n    }\n\n    // Add html classes\n    if (classNames.length > 0) $('html').addClass(classNames.join(' '));\n\n    $.device = device;\n})($);\n\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n\n    //比较一个字符串版本号\n    //a > b === 1\n    //a = b === 0\n    //a < b === -1\n    $.compareVersion = function(a, b) {\n        var as = a.split('.');\n        var bs = b.split('.');\n        if (a === b) return 0;\n\n        for (var i = 0; i < as.length; i++) {\n            var x = parseInt(as[i]);\n            if (!bs[i]) return 1;\n            var y = parseInt(bs[i]);\n            if (x < y) return -1;\n            if (x > y) return 1;\n        }\n        return 1;\n    };\n\n    $.getTouchPosition = function(e) {\n        e = e.originalEvent || e; //jquery wrap the originevent\n        if (e.type === 'touchstart' || e.type === 'touchmove' || e.type === 'touchend') {\n            return {\n                x: e.targetTouches[0].pageX,\n                y: e.targetTouches[0].pageY\n            };\n        } else {\n            return {\n                x: e.pageX,\n                y: e.pageY\n            };\n        }\n    };\n\n}($);\n\n//     Zepto.js\n//     (c) 2010-2015 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n+\n\nfunction($) {\n    \"use strict\";\n\n    function detect(ua, platform) {\n        var os = this.os = {}, // jshint ignore:line\n            browser = this.browser = {}, // jshint ignore:line\n            webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/),\n            android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/),\n            osx = !!ua.match(/\\(Macintosh\\; Intel /),\n            ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/),\n            ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/),\n            iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/),\n            webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/),\n            win = /Win\\d{2}|Windows/.test(platform),\n            wp = ua.match(/Windows Phone ([\\d.]+)/),\n            touchpad = webos && ua.match(/TouchPad/),\n            kindle = ua.match(/Kindle\\/([\\d.]+)/),\n            silk = ua.match(/Silk\\/([\\d._]+)/),\n            blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/),\n            bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/),\n            rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/),\n            playbook = ua.match(/PlayBook/),\n            chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/),\n            firefox = ua.match(/Firefox\\/([\\d.]+)/),\n            firefoxos = ua.match(/\\((?:Mobile|Tablet); rv:([\\d.]+)\\).*Firefox\\/[\\d.]+/),\n            ie = ua.match(/MSIE\\s([\\d.]+)/) || ua.match(/Trident\\/[\\d](?=[^\\?]+).*rv:([0-9.].)/),\n            webview = !chrome && ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),\n            safari = webview || ua.match(/Version\\/([\\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);\n\n        // Todo: clean this up with a better OS/browser seperation:\n        // - discern (more) between multiple browsers on android\n        // - decide if kindle fire in silk mode is android or not\n        // - Firefox on Android doesn't specify the Android version\n        // - possibly devide in os, device and browser hashes\n\n        if (browser.webkit = !!webkit) browser.version = webkit[1]; // jshint ignore:line\n\n        if (android) os.android = true, os.version = android[2];\n        if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n        if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n        if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n        if (wp) os.wp = true, os.version = wp[1];\n        if (webos) os.webos = true, os.version = webos[2];\n        if (touchpad) os.touchpad = true;\n        if (blackberry) os.blackberry = true, os.version = blackberry[2];\n        if (bb10) os.bb10 = true, os.version = bb10[2];\n        if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n        if (playbook) browser.playbook = true;\n        if (kindle) os.kindle = true, os.version = kindle[1];\n        if (silk) browser.silk = true, browser.version = silk[1];\n        if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n        if (chrome) browser.chrome = true, browser.version = chrome[1];\n        if (firefox) browser.firefox = true, browser.version = firefox[1];\n        if (firefoxos) os.firefoxos = true, os.version = firefoxos[1];\n        if (ie) browser.ie = true, browser.version = ie[1];\n        if (safari && (osx || os.ios || win)) {\n            browser.safari = true;\n            if (!os.ios) browser.version = safari[1];\n        }\n        if (webview) browser.webview = true;\n\n        os.tablet = !!(ipad || playbook || (android && !ua.match(/Mobile/)) ||\n            (firefox && ua.match(/Tablet/)) || (ie && !ua.match(/Phone/) && ua.match(/Touch/)));\n        os.phone = !!(!os.tablet && !os.ipod && (android || iphone || webos || blackberry || bb10 ||\n            (chrome && ua.match(/Android/)) || (chrome && ua.match(/CriOS\\/([\\d.]+)/)) ||\n            (firefox && ua.match(/Mobile/)) || (ie && ua.match(/Touch/))));\n    }\n\n    detect.call($, navigator.userAgent, navigator.platform);\n    // make available to unit tests\n    $.__detect = detect;\n\n}($); // jshint ignore:line\n\n/* global $:true */\n/* global WebKitCSSMatrix:true */\n\n(function($) {\n    \"use strict\";\n    ['width', 'height'].forEach(function(dimension) {\n        var Dimension = dimension.replace(/./, function(m) {\n            return m[0].toUpperCase();\n        });\n        $.fn['outer' + Dimension] = function(margin) {\n            var elem = this;\n            if (elem) {\n                var size = elem[dimension]();\n                var sides = {\n                    'width': ['left', 'right'],\n                    'height': ['top', 'bottom']\n                };\n                sides[dimension].forEach(function(side) {\n                    if (margin) size += parseInt(elem.css('margin-' + side), 10);\n                });\n                return size;\n            } else {\n                return null;\n            }\n        };\n    });\n\n    $.noop = function() {};\n\n    //support\n    $.support = (function() {\n        var support = {\n            touch: !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch)\n        };\n        return support;\n    })();\n\n    $.touchEvents = {\n        start: $.support.touch ? 'touchstart' : 'mousedown',\n        move: $.support.touch ? 'touchmove' : 'mousemove',\n        end: $.support.touch ? 'touchend' : 'mouseup'\n    };\n\n    $.getTranslate = function(el, axis) {\n        var matrix, curTransform, curStyle, transformMatrix;\n\n        // automatic axis detection\n        if (typeof axis === 'undefined') {\n            axis = 'x';\n        }\n\n        curStyle = window.getComputedStyle(el, null);\n        if (window.WebKitCSSMatrix) {\n            // Some old versions of Webkit choke when 'none' is passed; pass\n            // empty string instead in this case\n            transformMatrix = new WebKitCSSMatrix(curStyle.webkitTransform === 'none' ? '' : curStyle.webkitTransform);\n        } else {\n            transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n            matrix = transformMatrix.toString().split(',');\n        }\n\n        if (axis === 'x') {\n            //Latest Chrome and webkits Fix\n            if (window.WebKitCSSMatrix)\n                curTransform = transformMatrix.m41;\n            //Crazy IE10 Matrix\n            else if (matrix.length === 16)\n                curTransform = parseFloat(matrix[12]);\n            //Normal Browsers\n            else\n                curTransform = parseFloat(matrix[4]);\n        }\n        if (axis === 'y') {\n            //Latest Chrome and webkits Fix\n            if (window.WebKitCSSMatrix)\n                curTransform = transformMatrix.m42;\n            //Crazy IE10 Matrix\n            else if (matrix.length === 16)\n                curTransform = parseFloat(matrix[13]);\n            //Normal Browsers\n            else\n                curTransform = parseFloat(matrix[5]);\n        }\n\n        return curTransform || 0;\n    };\n    $.requestAnimationFrame = function(callback) {\n        if (window.requestAnimationFrame) return window.requestAnimationFrame(callback);\n        else if (window.webkitRequestAnimationFrame) return window.webkitRequestAnimationFrame(callback);\n        else if (window.mozRequestAnimationFrame) return window.mozRequestAnimationFrame(callback);\n        else {\n            return window.setTimeout(callback, 1000 / 60);\n        }\n    };\n\n    $.cancelAnimationFrame = function(id) {\n        if (window.cancelAnimationFrame) return window.cancelAnimationFrame(id);\n        else if (window.webkitCancelAnimationFrame) return window.webkitCancelAnimationFrame(id);\n        else if (window.mozCancelAnimationFrame) return window.mozCancelAnimationFrame(id);\n        else {\n            return window.clearTimeout(id);\n        }\n    };\n\n\n    $.fn.transitionEnd = function(callback) {\n        var events = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'],\n            i, dom = this;\n\n        function fireCallBack(e) {\n            /*jshint validthis:true */\n            if (e.target !== this) return;\n            callback.call(this, e);\n            for (i = 0; i < events.length; i++) {\n                dom.off(events[i], fireCallBack);\n            }\n        }\n        if (callback) {\n            for (i = 0; i < events.length; i++) {\n                dom.on(events[i], fireCallBack);\n            }\n        }\n        return this;\n    };\n    $.fn.dataset = function() {\n        var el = this[0];\n        if (el) {\n            var dataset = {};\n            if (el.dataset) {\n\n                for (var dataKey in el.dataset) { // jshint ignore:line\n                    dataset[dataKey] = el.dataset[dataKey];\n                }\n            } else {\n                for (var i = 0; i < el.attributes.length; i++) {\n                    var attr = el.attributes[i];\n                    if (attr.name.indexOf('data-') >= 0) {\n                        dataset[$.toCamelCase(attr.name.split('data-')[1])] = attr.value;\n                    }\n                }\n            }\n            for (var key in dataset) {\n                if (dataset[key] === 'false') dataset[key] = false;\n                else if (dataset[key] === 'true') dataset[key] = true;\n                else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] = dataset[key] * 1;\n            }\n            return dataset;\n        } else return undefined;\n    };\n    $.fn.data = function(key, value) {\n        if (typeof value === 'undefined') {\n            // Get value\n            if (this[0] && this[0].getAttribute) {\n                var dataKey = this[0].getAttribute('data-' + key);\n\n                if (dataKey) {\n                    return dataKey;\n                } else if (this[0].smElementDataStorage && (key in this[0].smElementDataStorage)) {\n\n\n                    return this[0].smElementDataStorage[key];\n\n                } else {\n                    return undefined;\n                }\n            } else return undefined;\n\n        } else {\n            // Set value\n            for (var i = 0; i < this.length; i++) {\n                var el = this[i];\n                if (!el.smElementDataStorage) el.smElementDataStorage = {};\n                el.smElementDataStorage[key] = value;\n            }\n            return this;\n        }\n    };\n    $.fn.animationEnd = function(callback) {\n        var events = ['webkitAnimationEnd', 'OAnimationEnd', 'MSAnimationEnd', 'animationend'],\n            i, dom = this;\n\n        function fireCallBack(e) {\n            callback(e);\n            for (i = 0; i < events.length; i++) {\n                dom.off(events[i], fireCallBack);\n            }\n        }\n        if (callback) {\n            for (i = 0; i < events.length; i++) {\n                dom.on(events[i], fireCallBack);\n            }\n        }\n        return this;\n    };\n    $.fn.transition = function(duration) {\n        if (typeof duration !== 'string') {\n            duration = duration + 'ms';\n        }\n        for (var i = 0; i < this.length; i++) {\n            var elStyle = this[i].style;\n            elStyle.webkitTransitionDuration = elStyle.MsTransitionDuration = elStyle.msTransitionDuration = elStyle.MozTransitionDuration = elStyle.OTransitionDuration = elStyle.transitionDuration = duration;\n        }\n        return this;\n    };\n    $.fn.transform = function(transform) {\n        for (var i = 0; i < this.length; i++) {\n            var elStyle = this[i].style;\n            elStyle.webkitTransform = elStyle.MsTransform = elStyle.msTransform = elStyle.MozTransform = elStyle.OTransform = elStyle.transform = transform;\n        }\n        return this;\n    };\n    $.fn.prevAll = function(selector) {\n        var prevEls = [];\n        var el = this[0];\n        if (!el) return $([]);\n        while (el.previousElementSibling) {\n            var prev = el.previousElementSibling;\n            if (selector) {\n                if ($(prev).is(selector)) prevEls.push(prev);\n            } else prevEls.push(prev);\n            el = prev;\n        }\n        return $(prevEls);\n    };\n    $.fn.nextAll = function(selector) {\n        var nextEls = [];\n        var el = this[0];\n        if (!el) return $([]);\n        while (el.nextElementSibling) {\n            var next = el.nextElementSibling;\n            if (selector) {\n                if ($(next).is(selector)) nextEls.push(next);\n            } else nextEls.push(next);\n            el = next;\n        }\n        return $(nextEls);\n    };\n\n    //重置zepto的show方法，防止有些人引用的版本中 show 方法操作 opacity 属性影响动画执行\n    $.fn.show = function() {\n        var elementDisplay = {};\n\n        function defaultDisplay(nodeName) {\n            var element, display;\n            if (!elementDisplay[nodeName]) {\n                element = document.createElement(nodeName);\n                document.body.appendChild(element);\n                display = getComputedStyle(element, '').getPropertyValue(\"display\");\n                element.parentNode.removeChild(element);\n                display === \"none\" && (display = \"block\");\n                elementDisplay[nodeName] = display;\n            }\n            return elementDisplay[nodeName];\n        }\n\n        return this.each(function() {\n            this.style.display === \"none\" && (this.style.display = '');\n            if (getComputedStyle(this, '').getPropertyValue(\"display\") === \"none\");\n            this.style.display = defaultDisplay(this.nodeName);\n        });\n    };\n\n    $.fn.scrollHeight = function() {\n        return this[0].scrollHeight;\n    };\n})($);\n\n/* global $:true */\n;\n(function($) {\n    'use strict';\n\n    /**\n     * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\n     *\n     * @codingstandard ftlabs-jsv2\n     * @copyright The Financial Times Limited [All Rights Reserved]\n     * @license MIT License (see LICENSE.txt)\n     */\n\n    /*jslint browser:true, node:true, elision:true*/\n    /*global Event, Node*/\n\n\n    /**\n     * Instantiate fast-clicking listeners on the specified layer.\n     *\n     * @constructor\n     * @param {Element} layer The layer to listen on\n     * @param {Object} [options={}] The options to override the defaults\n     */\n    function FastClick(layer, options) {\n        var oldOnClick;\n\n        options = options || {};\n\n        /**\n         * Whether a click is currently being tracked.\n         *\n         * @type boolean\n         */\n        this.trackingClick = false;\n\n\n        /**\n         * Timestamp for when click tracking started.\n         *\n         * @type number\n         */\n        this.trackingClickStart = 0;\n\n\n        /**\n         * The element being tracked for a click.\n         *\n         * @type EventTarget\n         */\n        this.targetElement = null;\n\n\n        /**\n         * X-coordinate of touch start event.\n         *\n         * @type number\n         */\n        this.touchStartX = 0;\n\n\n        /**\n         * Y-coordinate of touch start event.\n         *\n         * @type number\n         */\n        this.touchStartY = 0;\n\n\n        /**\n         * ID of the last touch, retrieved from Touch.identifier.\n         *\n         * @type number\n         */\n        this.lastTouchIdentifier = 0;\n\n\n        /**\n         * Touchmove boundary, beyond which a click will be cancelled.\n         *\n         * @type number\n         */\n        this.touchBoundary = options.touchBoundary || 10;\n\n\n        /**\n         * The FastClick layer.\n         *\n         * @type Element\n         */\n        this.layer = layer;\n\n        /**\n         * The minimum time between tap(touchstart and touchend) events\n         *\n         * @type number\n         */\n        this.tapDelay = options.tapDelay || 200;\n\n        /**\n         * The maximum time for a tap\n         *\n         * @type number\n         */\n        this.tapTimeout = options.tapTimeout || 700;\n\n        if (FastClick.notNeeded(layer)) {\n            return;\n        }\n\n        // Some old versions of Android don't have Function.prototype.bind\n        function bind(method, context) {\n            return function() { return method.apply(context, arguments); };\n        }\n\n\n        var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];\n        var context = this;\n        for (var i = 0, l = methods.length; i < l; i++) {\n            context[methods[i]] = bind(context[methods[i]], context);\n        }\n\n        // Set up event handlers as required\n        if (deviceIsAndroid) {\n            layer.addEventListener('mouseover', this.onMouse, true);\n            layer.addEventListener('mousedown', this.onMouse, true);\n            layer.addEventListener('mouseup', this.onMouse, true);\n        }\n\n        layer.addEventListener('click', this.onClick, true);\n        layer.addEventListener('touchstart', this.onTouchStart, false);\n        layer.addEventListener('touchmove', this.onTouchMove, false);\n        layer.addEventListener('touchend', this.onTouchEnd, false);\n        layer.addEventListener('touchcancel', this.onTouchCancel, false);\n\n        // Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n        // which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\n        // layer when they are cancelled.\n        if (!Event.prototype.stopImmediatePropagation) {\n            layer.removeEventListener = function(type, callback, capture) {\n                var rmv = Node.prototype.removeEventListener;\n                if (type === 'click') {\n                    rmv.call(layer, type, callback.hijacked || callback, capture);\n                } else {\n                    rmv.call(layer, type, callback, capture);\n                }\n            };\n\n            layer.addEventListener = function(type, callback, capture) {\n                var adv = Node.prototype.addEventListener;\n                if (type === 'click') {\n                    adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {\n                        if (!event.propagationStopped) {\n                            callback(event);\n                        }\n                    }), capture);\n                } else {\n                    adv.call(layer, type, callback, capture);\n                }\n            };\n        }\n\n        // If a handler is already declared in the element's onclick attribute, it will be fired before\n        // FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\n        // adding it as listener.\n        if (typeof layer.onclick === 'function') {\n\n            // Android browser on at least 3.2 requires a new reference to the function in layer.onclick\n            // - the old one won't work if passed to addEventListener directly.\n            oldOnClick = layer.onclick;\n            layer.addEventListener('click', function(event) {\n                oldOnClick(event);\n            }, false);\n            layer.onclick = null;\n        }\n    }\n\n    /**\n     * Windows Phone 8.1 fakes user agent string to look like Android and iPhone.\n     *\n     * @type boolean\n     */\n    var deviceIsWindowsPhone = navigator.userAgent.indexOf(\"Windows Phone\") >= 0;\n\n    /**\n     * Android requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;\n\n\n    /**\n     * iOS requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;\n\n\n    /**\n     * iOS 4 requires an exception for select elements.\n     *\n     * @type boolean\n     */\n    var deviceIsIOS4 = deviceIsIOS && (/OS 4_\\d(_\\d)?/).test(navigator.userAgent);\n\n\n    /**\n     * iOS 6.0-7.* requires the target element to be manually derived\n     *\n     * @type boolean\n     */\n    var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\\d/).test(navigator.userAgent);\n\n    /**\n     * BlackBerry requires exceptions.\n     *\n     * @type boolean\n     */\n    var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;\n\n    /**\n     * Determine whether a given element requires a native click.\n     *\n     * @param {EventTarget|Element} target Target DOM element\n     * @returns {boolean} Returns true if the element needs a native click\n     */\n    FastClick.prototype.needsClick = function(target) {\n\n        switch (target.nodeName.toLowerCase()) {\n\n            // Don't send a synthetic click to disabled inputs (issue #62)\n            case 'button':\n            case 'select':\n            case 'textarea':\n                if (target.disabled) {\n                    return true;\n                }\n\n                break;\n            case 'input':\n\n                // File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\n                if ((deviceIsIOS && target.type === 'file') || target.disabled) {\n                    return true;\n                }\n\n                break;\n            case 'label':\n            case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames\n            case 'video':\n                return true;\n            default:\n        }\n\n\n\n\n        return (/\\bneedsclick\\b/).test(target.className);\n    };\n\n\n    /**\n     * Determine whether a given element requires a call to focus to simulate click into element.\n     *\n     * @param {EventTarget|Element} target Target DOM element\n     * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\n     */\n    FastClick.prototype.needsFocus = function(target) {\n        switch (target.nodeName.toLowerCase()) {\n            case 'textarea':\n                return true;\n            case 'select':\n                return !deviceIsAndroid;\n            case 'input':\n                switch (target.type) {\n                    case 'button':\n                    case 'checkbox':\n                    case 'file':\n                    case 'image':\n                    case 'radio':\n                    case 'submit':\n                        return false;\n                }\n\n                // No point in attempting to focus disabled inputs\n                return !target.disabled && !target.readOnly;\n            default:\n                return (/\\bneedsfocus\\b/).test(target.className);\n        }\n    };\n\n\n    /**\n     * Send a click event to the specified element.\n     *\n     * @param {EventTarget|Element} targetElement\n     * @param {Event} event\n     */\n    FastClick.prototype.sendClick = function(targetElement, event) {\n        var clickEvent, touch;\n\n        // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\n        if (document.activeElement && document.activeElement !== targetElement) {\n            document.activeElement.blur();\n        }\n\n        touch = event.changedTouches[0];\n\n        // Synthesise a click event, with an extra attribute so it can be tracked\n        clickEvent = document.createEvent('MouseEvents');\n        clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n        clickEvent.forwardedTouchEvent = true;\n        targetElement.dispatchEvent(clickEvent);\n    };\n\n    FastClick.prototype.determineEventType = function(targetElement) {\n\n        //Issue #159: Android Chrome Select Box does not open with a synthetic click event\n        if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\n            return 'mousedown';\n        }\n\n        return 'click';\n    };\n\n\n    /**\n     * @param {EventTarget|Element} targetElement\n     */\n    FastClick.prototype.focus = function(targetElement) {\n        var length;\n\n        // Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\n        if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {\n            length = targetElement.value.length;\n            targetElement.setSelectionRange(length, length);\n        } else {\n            targetElement.focus();\n        }\n    };\n\n\n    /**\n     * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\n     *\n     * @param {EventTarget|Element} targetElement\n     */\n    FastClick.prototype.updateScrollParent = function(targetElement) {\n        var scrollParent, parentElement;\n\n        scrollParent = targetElement.fastClickScrollParent;\n\n        // Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\n        // target element was moved to another parent.\n        if (!scrollParent || !scrollParent.contains(targetElement)) {\n            parentElement = targetElement;\n            do {\n                if (parentElement.scrollHeight > parentElement.offsetHeight) {\n                    scrollParent = parentElement;\n                    targetElement.fastClickScrollParent = parentElement;\n                    break;\n                }\n\n                parentElement = parentElement.parentElement;\n            } while (parentElement);\n        }\n\n        // Always update the scroll top tracker if possible.\n        if (scrollParent) {\n            scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\n        }\n    };\n\n\n    /**\n     * @param {EventTarget} targetElement\n     * @returns {Element|EventTarget}\n     */\n    FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {\n\n        // On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\n        if (eventTarget.nodeType === Node.TEXT_NODE) {\n            return eventTarget.parentNode;\n        }\n\n        return eventTarget;\n    };\n\n\n    /**\n     * On touch start, record the position and scroll offset.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchStart = function(event) {\n        var targetElement, touch, selection;\n\n        // Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\n        if (event.targetTouches.length > 1) {\n            return true;\n        }\n\n        targetElement = this.getTargetElementFromEventTarget(event.target);\n        touch = event.targetTouches[0];\n\n        if (deviceIsIOS) {\n\n            // Only trusted events will deselect text on iOS (issue #49)\n            selection = window.getSelection();\n            if (selection.rangeCount && !selection.isCollapsed) {\n                return true;\n            }\n\n            if (!deviceIsIOS4) {\n\n                // Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\n                // when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\n                // with the same identifier as the touch event that previously triggered the click that triggered the alert.\n                // Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\n                // immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.\n                // Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,\n                // which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,\n                // random integers, it's safe to to continue if the identifier is 0 here.\n                if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {\n                    event.preventDefault();\n                    return false;\n                }\n\n                this.lastTouchIdentifier = touch.identifier;\n\n                // If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\n                // 1) the user does a fling scroll on the scrollable layer\n                // 2) the user stops the fling scroll with another tap\n                // then the event.target of the last 'touchend' event will be the element that was under the user's finger\n                // when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\n                // is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\n                this.updateScrollParent(targetElement);\n            }\n        }\n\n        this.trackingClick = true;\n        this.trackingClickStart = event.timeStamp;\n        this.targetElement = targetElement;\n\n        this.touchStartX = touch.pageX;\n        this.touchStartY = touch.pageY;\n\n        // Prevent phantom clicks on fast double-tap (issue #36)\n        if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n            event.preventDefault();\n        }\n\n        return true;\n    };\n\n\n    /**\n     * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.touchHasMoved = function(event) {\n        var touch = event.changedTouches[0],\n            boundary = this.touchBoundary;\n\n        if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\n            return true;\n        }\n\n        return false;\n    };\n\n\n    /**\n     * Update the last position.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchMove = function(event) {\n        if (!this.trackingClick) {\n            return true;\n        }\n\n        // If the touch has moved, cancel the click tracking\n        if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\n            this.trackingClick = false;\n            this.targetElement = null;\n        }\n\n        return true;\n    };\n\n\n    /**\n     * Attempt to find the labelled control for the given label element.\n     *\n     * @param {EventTarget|HTMLLabelElement} labelElement\n     * @returns {Element|null}\n     */\n    FastClick.prototype.findControl = function(labelElement) {\n\n        // Fast path for newer browsers supporting the HTML5 control attribute\n        if (labelElement.control !== undefined) {\n            return labelElement.control;\n        }\n\n        // All browsers under test that support touch events also support the HTML5 htmlFor attribute\n        if (labelElement.htmlFor) {\n            return document.getElementById(labelElement.htmlFor);\n        }\n\n        // If no for attribute exists, attempt to retrieve the first labellable descendant element\n        // the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\n        return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\n    };\n\n\n    /**\n     * On touch end, determine whether to send a click event at once.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onTouchEnd = function(event) {\n        var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;\n\n        if (!this.trackingClick) {\n            return true;\n        }\n\n        // Prevent phantom clicks on fast double-tap (issue #36)\n        if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {\n            this.cancelNextClick = true;\n            return true;\n        }\n\n        if ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {\n            return true;\n        }\n\n        // Reset to prevent wrong click cancel on input (issue #156).\n        this.cancelNextClick = false;\n\n        this.lastClickTime = event.timeStamp;\n\n        trackingClickStart = this.trackingClickStart;\n        this.trackingClick = false;\n        this.trackingClickStart = 0;\n\n        // On some iOS devices, the targetElement supplied with the event is invalid if the layer\n        // is performing a transition or scroll, and has to be re-detected manually. Note that\n        // for this to function correctly, it must be called *after* the event target is checked!\n        // See issue #57; also filed as rdar://13048589 .\n        if (deviceIsIOSWithBadTarget) {\n            touch = event.changedTouches[0];\n\n            // In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\n            targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\n            targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\n        }\n\n        targetTagName = targetElement.tagName.toLowerCase();\n        if (targetTagName === 'label') {\n            forElement = this.findControl(targetElement);\n            if (forElement) {\n                this.focus(targetElement);\n                if (deviceIsAndroid) {\n                    return false;\n                }\n\n                targetElement = forElement;\n            }\n        } else if (this.needsFocus(targetElement)) {\n\n            // Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\n            // Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\n            if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {\n                this.targetElement = null;\n                return false;\n            }\n\n            this.focus(targetElement);\n            this.sendClick(targetElement, event);\n\n            // Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\n            // Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)\n            if (!deviceIsIOS || targetTagName !== 'select') {\n                this.targetElement = null;\n                event.preventDefault();\n            }\n\n            return false;\n        } else {\n            var parent = targetElement;\n            while (parent && (parent.tagName.toUpperCase() !== \"BODY\")) {\n                if (parent.tagName.toUpperCase() === \"LABEL\") {\n                    $(parent).find(\"input\").click();\n                }\n                parent = parent.parentNode;\n            }\n        }\n\n        if (deviceIsIOS && !deviceIsIOS4) {\n\n            // Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\n            // and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\n            scrollParent = targetElement.fastClickScrollParent;\n            if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\n                return true;\n            }\n        }\n\n        // Prevent the actual click from going though - unless the target node is marked as requiring\n        // real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\n        if (!this.needsClick(targetElement)) {\n            event.preventDefault();\n            this.sendClick(targetElement, event);\n        }\n\n        return false;\n    };\n\n\n    /**\n     * On touch cancel, stop tracking the click.\n     *\n     * @returns {void}\n     */\n    FastClick.prototype.onTouchCancel = function() {\n        this.trackingClick = false;\n        this.targetElement = null;\n    };\n\n\n    /**\n     * Determine mouse events which should be permitted.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onMouse = function(event) {\n\n        // If a target element was never set (because a touch event was never fired) allow the event\n        if (!this.targetElement) {\n            return true;\n        }\n\n        if (event.forwardedTouchEvent) {\n            return true;\n        }\n\n        // Programmatically generated events targeting a specific element should be permitted\n        if (!event.cancelable) {\n            return true;\n        }\n\n        // Derive and check the target element to see whether the mouse event needs to be permitted;\n        // unless explicitly enabled, prevent non-touch click events from triggering actions,\n        // to prevent ghost/doubleclicks.\n        if (!this.needsClick(this.targetElement) || this.cancelNextClick) {\n\n            // Prevent any user-added listeners declared on FastClick element from being fired.\n            if (event.stopImmediatePropagation) {\n                event.stopImmediatePropagation();\n            } else {\n\n                // Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n                event.propagationStopped = true;\n            }\n\n            // Cancel the event\n            event.stopPropagation();\n            event.preventDefault();\n\n            return false;\n        }\n\n        // If the mouse event is permitted, return true for the action to go through.\n        return true;\n    };\n\n\n    /**\n     * On actual clicks, determine whether this is a touch-generated click, a click action occurring\n     * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\n     * an actual click which should be permitted.\n     *\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    FastClick.prototype.onClick = function(event) {\n        var permitted;\n\n        // It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\n        if (this.trackingClick) {\n            this.targetElement = null;\n            this.trackingClick = false;\n            return true;\n        }\n\n        // Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\n        if (event.target.type === 'submit' && event.detail === 0) {\n            return true;\n        }\n\n        permitted = this.onMouse(event);\n\n        // Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\n        if (!permitted) {\n            this.targetElement = null;\n        }\n\n        // If clicks are permitted, return true for the action to go through.\n        return permitted;\n    };\n\n\n    /**\n     * Remove all FastClick's event listeners.\n     *\n     * @returns {void}\n     */\n    FastClick.prototype.destroy = function() {\n        var layer = this.layer;\n\n        if (deviceIsAndroid) {\n            layer.removeEventListener('mouseover', this.onMouse, true);\n            layer.removeEventListener('mousedown', this.onMouse, true);\n            layer.removeEventListener('mouseup', this.onMouse, true);\n        }\n\n        layer.removeEventListener('click', this.onClick, true);\n        layer.removeEventListener('touchstart', this.onTouchStart, false);\n        layer.removeEventListener('touchmove', this.onTouchMove, false);\n        layer.removeEventListener('touchend', this.onTouchEnd, false);\n        layer.removeEventListener('touchcancel', this.onTouchCancel, false);\n    };\n\n\n    /**\n     * Check whether FastClick is needed.\n     *\n     * @param {Element} layer The layer to listen on\n     */\n    FastClick.notNeeded = function(layer) {\n        var metaViewport;\n        var chromeVersion;\n        var blackberryVersion;\n        var firefoxVersion;\n\n        // Devices that don't support touch don't need FastClick\n        if (typeof window.ontouchstart === 'undefined') {\n            return true;\n        }\n\n        // Chrome version - zero for other browsers\n        chromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];\n\n        if (chromeVersion) {\n\n            if (deviceIsAndroid) {\n                metaViewport = document.querySelector('meta[name=viewport]');\n\n                if (metaViewport) {\n                    // Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\n                    if (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n                        return true;\n                    }\n                    // Chrome 32 and above with width=device-width or less don't need FastClick\n                    if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {\n                        return true;\n                    }\n                }\n\n                // Chrome desktop doesn't need FastClick (issue #15)\n            } else {\n                return true;\n            }\n        }\n\n        if (deviceIsBlackBerry10) {\n            blackberryVersion = navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/);\n\n            // BlackBerry 10.3+ does not require Fastclick library.\n            // https://github.com/ftlabs/fastclick/issues/251\n            if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {\n                metaViewport = document.querySelector('meta[name=viewport]');\n\n                if (metaViewport) {\n                    // user-scalable=no eliminates click delay.\n                    if (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n                        return true;\n                    }\n                    // width=device-width (or less than device-width) eliminates click delay.\n                    if (document.documentElement.scrollWidth <= window.outerWidth) {\n                        return true;\n                    }\n                }\n            }\n        }\n\n        // IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)\n        if (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {\n            return true;\n        }\n\n        // Firefox version - zero for other browsers\n        firefoxVersion = +(/Firefox\\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];\n\n        if (firefoxVersion >= 27) {\n            // Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896\n\n            metaViewport = document.querySelector('meta[name=viewport]');\n            if (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {\n                return true;\n            }\n        }\n\n        // IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version\n        // http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx\n        if (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {\n            return true;\n        }\n\n        return false;\n    };\n\n\n    /**\n     * Factory method for creating a FastClick object\n     *\n     * @param {Element} layer The layer to listen on\n     * @param {Object} [options={}] The options to override the defaults\n     */\n    FastClick.attach = function(layer, options) {\n        return new FastClick(layer, options);\n    };\n\n    //直接绑定\n    $(function() {\n        FastClick.attach(document.body);\n    });\n}($));\n\n/*===========================\n  Template7 Template engine\n  ===========================*/\n/* global $:true */\n/* jshint unused:false */\n/* jshint forin:false */\n+\n\nfunction($) {\n    \"use strict\";\n    $.Template7 = $.t7 = (function() {\n        function isArray(arr) {\n            return Object.prototype.toString.apply(arr) === '[object Array]';\n        }\n\n        function isObject(obj) {\n            return obj instanceof Object;\n        }\n\n        function isFunction(func) {\n            return typeof func === 'function';\n        }\n        var cache = {};\n\n        function helperToSlices(string) {\n            var helperParts = string.replace(/[{}#}]/g, '').split(' ');\n            var slices = [];\n            var shiftIndex, i, j;\n            for (i = 0; i < helperParts.length; i++) {\n                var part = helperParts[i];\n                if (i === 0) slices.push(part);\n                else {\n                    if (part.indexOf('\"') === 0) {\n                        // Plain String\n                        if (part.match(/\"/g).length === 2) {\n                            // One word string\n                            slices.push(part);\n                        } else {\n                            // Find closed Index\n                            shiftIndex = 0;\n                            for (j = i + 1; j < helperParts.length; j++) {\n                                part += ' ' + helperParts[j];\n                                if (helperParts[j].indexOf('\"') >= 0) {\n                                    shiftIndex = j;\n                                    slices.push(part);\n                                    break;\n                                }\n                            }\n                            if (shiftIndex) i = shiftIndex;\n                        }\n                    } else {\n                        if (part.indexOf('=') > 0) {\n                            // Hash\n                            var hashParts = part.split('=');\n                            var hashName = hashParts[0];\n                            var hashContent = hashParts[1];\n                            if (hashContent.match(/\"/g).length !== 2) {\n                                shiftIndex = 0;\n                                for (j = i + 1; j < helperParts.length; j++) {\n                                    hashContent += ' ' + helperParts[j];\n                                    if (helperParts[j].indexOf('\"') >= 0) {\n                                        shiftIndex = j;\n                                        break;\n                                    }\n                                }\n                                if (shiftIndex) i = shiftIndex;\n                            }\n                            var hash = [hashName, hashContent.replace(/\"/g, '')];\n                            slices.push(hash);\n                        } else {\n                            // Plain variable\n                            slices.push(part);\n                        }\n                    }\n                }\n            }\n            return slices;\n        }\n\n        function stringToBlocks(string) {\n            var blocks = [],\n                i, j, k;\n            if (!string) return [];\n            var _blocks = string.split(/({{[^{^}]*}})/);\n            for (i = 0; i < _blocks.length; i++) {\n                var block = _blocks[i];\n                if (block === '') continue;\n                if (block.indexOf('{{') < 0) {\n                    blocks.push({\n                        type: 'plain',\n                        content: block\n                    });\n                } else {\n                    if (block.indexOf('{/') >= 0) {\n                        continue;\n                    }\n                    if (block.indexOf('{#') < 0 && block.indexOf(' ') < 0 && block.indexOf('else') < 0) {\n                        // Simple variable\n                        blocks.push({\n                            type: 'variable',\n                            contextName: block.replace(/[{}]/g, '')\n                        });\n                        continue;\n                    }\n                    // Helpers\n                    var helperSlices = helperToSlices(block);\n                    var helperName = helperSlices[0];\n                    var helperContext = [];\n                    var helperHash = {};\n                    for (j = 1; j < helperSlices.length; j++) {\n                        var slice = helperSlices[j];\n                        if (isArray(slice)) {\n                            // Hash\n                            helperHash[slice[0]] = slice[1] === 'false' ? false : slice[1];\n                        } else {\n                            helperContext.push(slice);\n                        }\n                    }\n\n                    if (block.indexOf('{#') >= 0) {\n                        // Condition/Helper\n                        var helperStartIndex = i;\n                        var helperContent = '';\n                        var elseContent = '';\n                        var toSkip = 0;\n                        var shiftIndex;\n                        var foundClosed = false,\n                            foundElse = false,\n                            foundClosedElse = false,\n                            depth = 0;\n                        for (j = i + 1; j < _blocks.length; j++) {\n                            if (_blocks[j].indexOf('{{#') >= 0) {\n                                depth++;\n                            }\n                            if (_blocks[j].indexOf('{{/') >= 0) {\n                                depth--;\n                            }\n                            if (_blocks[j].indexOf('{{#' + helperName) >= 0) {\n                                helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                                toSkip++;\n                            } else if (_blocks[j].indexOf('{{/' + helperName) >= 0) {\n                                if (toSkip > 0) {\n                                    toSkip--;\n                                    helperContent += _blocks[j];\n                                    if (foundElse) elseContent += _blocks[j];\n                                } else {\n                                    shiftIndex = j;\n                                    foundClosed = true;\n                                    break;\n                                }\n                            } else if (_blocks[j].indexOf('else') >= 0 && depth === 0) {\n                                foundElse = true;\n                            } else {\n                                if (!foundElse) helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                            }\n\n                        }\n                        if (foundClosed) {\n                            if (shiftIndex) i = shiftIndex;\n                            blocks.push({\n                                type: 'helper',\n                                helperName: helperName,\n                                contextName: helperContext,\n                                content: helperContent,\n                                inverseContent: elseContent,\n                                hash: helperHash\n                            });\n                        }\n                    } else if (block.indexOf(' ') > 0) {\n                        blocks.push({\n                            type: 'helper',\n                            helperName: helperName,\n                            contextName: helperContext,\n                            hash: helperHash\n                        });\n                    }\n                }\n            }\n            return blocks;\n        }\n        var Template7 = function(template) {\n            var t = this;\n            t.template = template;\n\n            function getCompileFn(block, depth) {\n                if (block.content) return compile(block.content, depth);\n                else return function() { return ''; };\n            }\n\n            function getCompileInverse(block, depth) {\n                if (block.inverseContent) return compile(block.inverseContent, depth);\n                else return function() { return ''; };\n            }\n\n            function getCompileVar(name, ctx) {\n                var variable, parts, levelsUp = 0,\n                    initialCtx = ctx;\n                if (name.indexOf('../') === 0) {\n                    levelsUp = name.split('../').length - 1;\n                    var newDepth = ctx.split('_')[1] - levelsUp;\n                    ctx = 'ctx_' + (newDepth >= 1 ? newDepth : 1);\n                    parts = name.split('../')[levelsUp].split('.');\n                } else if (name.indexOf('@global') === 0) {\n                    ctx = '$.Template7.global';\n                    parts = name.split('@global.')[1].split('.');\n                } else if (name.indexOf('@root') === 0) {\n                    ctx = 'ctx_1';\n                    parts = name.split('@root.')[1].split('.');\n                } else {\n                    parts = name.split('.');\n                }\n                variable = ctx;\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    if (part.indexOf('@') === 0) {\n                        if (i > 0) {\n                            variable += '[(data && data.' + part.replace('@', '') + ')]';\n                        } else {\n                            variable = '(data && data.' + name.replace('@', '') + ')';\n                        }\n                    } else {\n                        if (isFinite(part)) {\n                            variable += '[' + part + ']';\n                        } else {\n                            if (part.indexOf('this') === 0) {\n                                variable = part.replace('this', ctx);\n                            } else {\n                                variable += '.' + part;\n                            }\n                        }\n                    }\n                }\n\n                return variable;\n            }\n\n            function getCompiledArguments(contextArray, ctx) {\n                var arr = [];\n                for (var i = 0; i < contextArray.length; i++) {\n                    if (contextArray[i].indexOf('\"') === 0) arr.push(contextArray[i]);\n                    else {\n                        arr.push(getCompileVar(contextArray[i], ctx));\n                    }\n                }\n                return arr.join(', ');\n            }\n\n            function compile(template, depth) {\n                depth = depth || 1;\n                template = template || t.template;\n                if (typeof template !== 'string') {\n                    throw new Error('Template7: Template must be a string');\n                }\n                var blocks = stringToBlocks(template);\n                if (blocks.length === 0) {\n                    return function() { return ''; };\n                }\n                var ctx = 'ctx_' + depth;\n                var resultString = '(function (' + ctx + ', data) {\\n';\n                if (depth === 1) {\n                    resultString += 'function isArray(arr){return Object.prototype.toString.apply(arr) === \\'[object Array]\\';}\\n';\n                    resultString += 'function isFunction(func){return (typeof func === \\'function\\');}\\n';\n                    resultString += 'function c(val, ctx) {if (typeof val !== \"undefined\") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return \"\";}\\n';\n                }\n                resultString += 'var r = \\'\\';\\n';\n                var i, j, context;\n                for (i = 0; i < blocks.length; i++) {\n                    var block = blocks[i];\n                    // Plain block\n                    if (block.type === 'plain') {\n                        resultString += 'r +=\\'' + (block.content).replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/'/g, '\\\\' + '\\'') + '\\';';\n                        continue;\n                    }\n                    var variable, compiledArguments;\n                    // Variable block\n                    if (block.type === 'variable') {\n                        variable = getCompileVar(block.contextName, ctx);\n                        resultString += 'r += c(' + variable + ', ' + ctx + ');';\n                    }\n                    // Helpers block\n                    if (block.type === 'helper') {\n                        if (block.helperName in t.helpers) {\n                            compiledArguments = getCompiledArguments(block.contextName, ctx);\n                            resultString += 'r += ($.Template7.helpers.' + block.helperName + ').call(' + ctx + ', ' + (compiledArguments && (compiledArguments + ', ')) + '{hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                        } else {\n                            if (block.contextName.length > 0) {\n                                throw new Error('Template7: Missing helper: \"' + block.helperName + '\"');\n                            } else {\n                                variable = getCompileVar(block.helperName, ctx);\n                                resultString += 'if (' + variable + ') {';\n                                resultString += 'if (isArray(' + variable + ')) {';\n                                resultString += 'r += ($.Template7.helpers.each).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                                resultString += '}else {';\n                                resultString += 'r += ($.Template7.helpers.with).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: ctx_1});';\n                                resultString += '}}';\n                            }\n                        }\n                    }\n                }\n                resultString += '\\nreturn r;})';\n                return eval.call(window, resultString);\n            }\n            t.compile = function(template) {\n                if (!t.compiled) {\n                    t.compiled = compile(template);\n                }\n                return t.compiled;\n            };\n        };\n        Template7.prototype = {\n            options: {},\n            helpers: {\n                'if': function(context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (context) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'unless': function(context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (!context) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'each': function(context, options) {\n                    var ret = '',\n                        i = 0;\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (isArray(context)) {\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                        for (i = 0; i < context.length; i++) {\n                            ret += options.fn(context[i], { first: i === 0, last: i === context.length - 1, index: i });\n                        }\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                    } else {\n                        for (var key in context) {\n                            i++;\n                            ret += options.fn(context[key], { key: key });\n                        }\n                    }\n                    if (i > 0) return ret;\n                    else return options.inverse(this);\n                },\n                'with': function(context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    return options.fn(context);\n                },\n                'join': function(context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    return context.join(options.hash.delimiter || options.hash.delimeter);\n                },\n                'js': function(expression, options) {\n                    var func;\n                    if (expression.indexOf('return') >= 0) {\n                        func = '(function(){' + expression + '})';\n                    } else {\n                        func = '(function(){return (' + expression + ')})';\n                    }\n                    return eval.call(this, func).call(this);\n                },\n                'js_compare': function(expression, options) {\n                    var func;\n                    if (expression.indexOf('return') >= 0) {\n                        func = '(function(){' + expression + '})';\n                    } else {\n                        func = '(function(){return (' + expression + ')})';\n                    }\n                    var condition = eval.call(this, func).call(this);\n                    if (condition) {\n                        return options.fn(this, options.data);\n                    } else {\n                        return options.inverse(this, options.data);\n                    }\n                }\n            }\n        };\n        var t7 = function(template, data) {\n            if (arguments.length === 2) {\n                var instance = new Template7(template);\n                var rendered = instance.compile()(data);\n                instance = null;\n                return (rendered);\n            } else return new Template7(template);\n        };\n        t7.registerHelper = function(name, fn) {\n            Template7.prototype.helpers[name] = fn;\n        };\n        t7.unregisterHelper = function(name) {\n            Template7.prototype.helpers[name] = undefined;\n            delete Template7.prototype.helpers[name];\n        };\n\n        t7.compile = function(template, options) {\n            var instance = new Template7(template, options);\n            return instance.compile();\n        };\n\n        t7.options = Template7.prototype.options;\n        t7.helpers = Template7.prototype.helpers;\n        return t7;\n    })();\n}($);\n\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n\n    $.getCurrentPage = function() {\n        return $(\".page\")[0] || document.body;\n    };\n}($);\n\n/* ===============================================================================\n************   Tabs   ************\n=============================================================================== */\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n\n    var showTab = function(tab, tabLink, force) {\n        var newTab = $(tab);\n\n        var activeClass = newTab.hasClass(\"page\") ? \"page-current\" : \"active\";\n        if (arguments.length === 2) {\n            if (typeof tabLink === 'boolean') {\n                force = tabLink;\n            }\n        }\n        if (newTab.length === 0) return false;\n        if (newTab.hasClass(activeClass)) {\n            if (force) newTab.trigger('show');\n            return false;\n        }\n        var tabs = newTab.parent('.tabs');\n        if (tabs.length === 0) return false;\n\n        // Animated tabs\n        /*var isAnimatedTabs = tabs.parent().hasClass('tabs-animated-wrap');\n          if (isAnimatedTabs) {\n          tabs.transform('translate3d(' + -newTab.index() * 100 + '%,0,0)');\n          }*/\n\n        // Remove active class from old tabs\n        var oldTab = tabs.children('.tab.' + activeClass).removeClass(activeClass);\n        // Add active class to new tab\n        newTab.addClass(activeClass);\n        // Trigger 'show' event on new tab\n        newTab.trigger('show');\n\n        // Update navbars in new tab\n        /*if (!isAnimatedTabs && newTab.find('.navbar').length > 0) {\n        // Find tab's view\n        var viewContainer;\n        if (newTab.hasClass(app.params.viewClass)) viewContainer = newTab[0];\n        else viewContainer = newTab.parents('.' + app.params.viewClass)[0];\n        app.sizeNavbars(viewContainer);\n        }*/\n\n        // Find related link for new tab\n        if (tabLink) tabLink = $(tabLink);\n        else {\n            // Search by id\n            if (typeof tab === 'string') tabLink = $('.tab-link[href=\"' + tab + '\"]');\n            else tabLink = $('.tab-link[href=\"#' + newTab.attr('id') + '\"]');\n            // Search by data-tab\n            if (!tabLink || tabLink && tabLink.length === 0) {\n                $('[data-tab]').each(function() {\n                    if (newTab.is($(this).attr('data-tab'))) tabLink = $(this);\n                });\n            }\n        }\n        if (tabLink.length === 0) return;\n\n        // Find related link for old tab\n        var oldTabLink;\n        if (oldTab && oldTab.length > 0) {\n            // Search by id\n            var oldTabId = oldTab.attr('id');\n            if (oldTabId) oldTabLink = $('.tab-link[href=\"#' + oldTabId + '\"]');\n            // Search by data-tab\n            if (!oldTabLink || oldTabLink && oldTabLink.length === 0) {\n                $('[data-tab]').each(function() {\n                    if (oldTab.is($(this).attr('data-tab'))) oldTabLink = $(this);\n                });\n            }\n        }\n\n        // Update links' classes\n        if (tabLink && tabLink.length > 0) tabLink.addClass('active');\n        if (oldTabLink && oldTabLink.length > 0) oldTabLink.removeClass('active');\n\n        return true;\n    };\n\n    var old = $.showTab;\n    $.showTab = showTab;\n\n    $.showTab.noConflict = function() {\n        $.showTab = old;\n        return this;\n    };\n\n\n    $(document).on(\"click\", \".tab-link\", function(e) {\n        e.preventDefault();\n        var clicked = $(this);\n        showTab(clicked.data(\"tab\") || clicked.attr('href'), clicked);\n    });\n}($);\n\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n    $(document).on(\"click\", \".tab-item\", function(e) {\n        var $target = $(e.currentTarget);\n        if (!$target.hasClass(\"tab-link\")) {\n            $target.parent().find(\".active\").removeClass(\"active\");\n            $target.addClass(\"active\");\n        }\n    });\n\n    var highlight = function(e, pageId) {\n        var $tab = $(\".bar-tab .tab-item[href='#\" + pageId + \"']\");\n        // $tab.parent().find(\".active\").removeClass(\"active\");\n        // $tab.addClass(\"active\");\n    };\n    $(document).on(\"pageInit\", highlight);\n    $(document).on(\"pageReinit\", highlight);\n\n    $.showToolbar = function(show) {\n        $(document.body)[show ? \"removeClass\" : \"addClass\"](\"tabbar-hidden\");\n    };\n\n}($);\n\n/*======================================================\n************   Modals   ************\n======================================================*/\n/*jshint unused: false*/\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n    var _modalTemplateTempDiv = document.createElement('div');\n\n    $.modalStack = [];\n    var t7 = $.Template7;\n\n    $.modalStackClearQueue = function() {\n        if ($.modalStack.length) {\n            ($.modalStack.shift())();\n        }\n    };\n    $.modal = function(params) {\n        params = params || {};\n        var modalHTML = '';\n        if (defaults.modalTemplate) {\n            if (!$._compiledTemplates.modal) $._compiledTemplates.modal = t7.compile(defaults.modalTemplate);\n            modalHTML = $._compiledTemplates.modal(params);\n        } else {\n            var buttonsHTML = '';\n            if (params.buttons && params.buttons.length > 0) {\n                for (var i = 0; i < params.buttons.length; i++) {\n                    buttonsHTML += '<span class=\"modal-button' + (params.buttons[i].bold ? ' modal-button-bold' : '') + '\">' + params.buttons[i].text + '</span>';\n                }\n            }\n            var titleHTML = params.title ? '<div class=\"modal-title\">' + params.title + '</div>' : '';\n            var textHTML = params.text ? '<div class=\"modal-text\">' + params.text + '</div>' : '';\n            var afterTextHTML = params.afterText ? params.afterText : '';\n            var noButtons = !params.buttons || params.buttons.length === 0 ? 'modal-no-buttons' : '';\n            var verticalButtons = params.verticalButtons ? 'modal-buttons-vertical' : '';\n            modalHTML = '<div class=\"modal ' + noButtons + '\"><div class=\"modal-inner\">' + (titleHTML + textHTML + afterTextHTML) + '</div><div class=\"modal-buttons ' + verticalButtons + '\">' + buttonsHTML + '</div></div>';\n        }\n\n        _modalTemplateTempDiv.innerHTML = modalHTML;\n\n        var modal = $(_modalTemplateTempDiv).children();\n\n        $(defaults.modalContainer).append(modal[0]);\n\n        // Add events on buttons\n        modal.find('.modal-button').each(function(index, el) {\n            $(el).on('click', function(e) {\n                if (params.buttons[index].close !== false) $.closeModal(modal);\n                if (params.buttons[index].onClick) params.buttons[index].onClick(modal, e);\n                if (params.onClick) params.onClick(modal, index);\n            });\n        });\n        $.openModal(modal);\n        return modal[0];\n    };\n    $.alert = function(text, title, callbackOk) {\n        if (typeof title === 'function') {\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            buttons: [{ text: defaults.modalButtonOk, bold: true, onClick: callbackOk }]\n        });\n    };\n    $.confirm = function(text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            buttons: [\n                { text: defaults.modalButtonCancel, onClick: callbackCancel },\n                { text: defaults.modalButtonOk, bold: true, onClick: callbackOk }\n            ]\n        });\n    };\n    $.prompt = function(text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"text\" class=\"modal-text-input\">',\n            buttons: [{\n                    text: defaults.modalButtonCancel\n                },\n                {\n                    text: defaults.modalButtonOk,\n                    bold: true\n                }\n            ],\n            onClick: function(modal, index) {\n                if (index === 0 && callbackCancel) callbackCancel($(modal).find('.modal-text-input').val());\n                if (index === 1 && callbackOk) callbackOk($(modal).find('.modal-text-input').val());\n            }\n        });\n    };\n    $.modalLogin = function(text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"text\" name=\"modal-username\" placeholder=\"' + defaults.modalUsernamePlaceholder + '\" class=\"modal-text-input modal-text-input-double\"><input type=\"password\" name=\"modal-password\" placeholder=\"' + defaults.modalPasswordPlaceholder + '\" class=\"modal-text-input modal-text-input-double\">',\n            buttons: [{\n                    text: defaults.modalButtonCancel\n                },\n                {\n                    text: defaults.modalButtonOk,\n                    bold: true\n                }\n            ],\n            onClick: function(modal, index) {\n                var username = $(modal).find('.modal-text-input[name=\"modal-username\"]').val();\n                var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                if (index === 0 && callbackCancel) callbackCancel(username, password);\n                if (index === 1 && callbackOk) callbackOk(username, password);\n            }\n        });\n    };\n    $.modalPassword = function(text, title, callbackOk, callbackCancel) {\n        if (typeof title === 'function') {\n            callbackCancel = arguments[2];\n            callbackOk = arguments[1];\n            title = undefined;\n        }\n        return $.modal({\n            text: text || '',\n            title: typeof title === 'undefined' ? defaults.modalTitle : title,\n            afterText: '<input type=\"password\" name=\"modal-password\" placeholder=\"' + defaults.modalPasswordPlaceholder + '\" class=\"modal-text-input\">',\n            buttons: [{\n                    text: defaults.modalButtonCancel\n                },\n                {\n                    text: defaults.modalButtonOk,\n                    bold: true\n                }\n            ],\n            onClick: function(modal, index) {\n                var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                if (index === 0 && callbackCancel) callbackCancel(password);\n                if (index === 1 && callbackOk) callbackOk(password);\n            }\n        });\n    };\n    $.showPreloader = function(title) {\n        return $.modal({\n            title: title || defaults.modalPreloaderTitle,\n            text: '<div class=\"preloader\"></div>'\n        });\n    };\n    $.hidePreloader = function() {\n        $.closeModal('.modal.modal-in');\n    };\n    $.showIndicator = function() {\n        $(defaults.modalContainer).append('<div class=\"preloader-indicator-overlay\"></div><div class=\"preloader-indicator-modal\"><span class=\"preloader preloader-white\"></span></div>');\n    };\n    $.hideIndicator = function() {\n        $('.preloader-indicator-overlay, .preloader-indicator-modal').remove();\n    };\n    // Action Sheet\n    $.actions = function(target, params) {\n        var toPopover = false,\n            modal, groupSelector, buttonSelector;\n        if (arguments.length === 1) {\n            // Actions\n            params = target;\n        } else {\n            // Popover\n            if ($.device.ios) {\n                if ($.device.ipad) toPopover = true;\n            } else {\n                if ($(window).width() >= 768) toPopover = true;\n            }\n        }\n        params = params || [];\n\n        if (params.length > 0 && !$.isArray(params[0])) {\n            params = [params];\n        }\n        var modalHTML;\n        if (toPopover) {\n            var actionsToPopoverTemplate = defaults.modalActionsToPopoverTemplate ||\n                '<div class=\"popover actions-popover\">' +\n                '<div class=\"popover-inner\">' +\n                '{{#each this}}' +\n                '<div class=\"list-block\">' +\n                '<ul>' +\n                '{{#each this}}' +\n                '{{#if label}}' +\n                '<li class=\"actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}\">{{text}}</li>' +\n                '{{else}}' +\n                '<li><a href=\"#\" class=\"item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}\">{{text}}</a></li>' +\n                '{{/if}}' +\n                '{{/each}}' +\n                '</ul>' +\n                '</div>' +\n                '{{/each}}' +\n                '</div>' +\n                '</div>';\n            if (!$._compiledTemplates.actionsToPopover) {\n                $._compiledTemplates.actionsToPopover = t7.compile(actionsToPopoverTemplate);\n            }\n            var popoverHTML = $._compiledTemplates.actionsToPopover(params);\n            modal = $($.popover(popoverHTML, target, true));\n            groupSelector = '.list-block ul';\n            buttonSelector = '.list-button';\n        } else {\n            if (defaults.modalActionsTemplate) {\n                if (!$._compiledTemplates.actions) $._compiledTemplates.actions = t7.compile(defaults.modalActionsTemplate);\n                modalHTML = $._compiledTemplates.actions(params);\n            } else {\n                var buttonsHTML = '';\n                for (var i = 0; i < params.length; i++) {\n                    for (var j = 0; j < params[i].length; j++) {\n                        if (j === 0) buttonsHTML += '<div class=\"actions-modal-group\">';\n                        var button = params[i][j];\n                        var buttonClass = button.label ? 'actions-modal-label' : 'actions-modal-button';\n                        if (button.bold) buttonClass += ' actions-modal-button-bold';\n                        if (button.color) buttonClass += ' color-' + button.color;\n                        if (button.bg) buttonClass += ' bg-' + button.bg;\n                        if (button.disabled) buttonClass += ' disabled';\n                        buttonsHTML += '<span class=\"' + buttonClass + '\">' + button.text + '</span>';\n                        if (j === params[i].length - 1) buttonsHTML += '</div>';\n                    }\n                }\n                modalHTML = '<div class=\"actions-modal\">' + buttonsHTML + '</div>';\n            }\n            _modalTemplateTempDiv.innerHTML = modalHTML;\n            modal = $(_modalTemplateTempDiv).children();\n            $(defaults.modalContainer).append(modal[0]);\n            groupSelector = '.actions-modal-group';\n            buttonSelector = '.actions-modal-button';\n        }\n\n        var groups = modal.find(groupSelector);\n        groups.each(function(index, el) {\n            var groupIndex = index;\n            $(el).children().each(function(index, el) {\n                var buttonIndex = index;\n                var buttonParams = params[groupIndex][buttonIndex];\n                var clickTarget;\n                if (!toPopover && $(el).is(buttonSelector)) clickTarget = $(el);\n                if (toPopover && $(el).find(buttonSelector).length > 0) clickTarget = $(el).find(buttonSelector);\n\n                if (clickTarget) {\n                    clickTarget.on('click', function(e) {\n                        if (buttonParams.close !== false) $.closeModal(modal);\n                        if (buttonParams.onClick) buttonParams.onClick(modal, e);\n                    });\n                }\n            });\n        });\n        if (!toPopover) $.openModal(modal);\n        return modal[0];\n    };\n    $.popover = function(modal, target, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n            var _modal = document.createElement('div');\n            _modal.innerHTML = modal.trim();\n            if (_modal.childNodes.length > 0) {\n                modal = _modal.childNodes[0];\n                if (removeOnClose) modal.classList.add('remove-on-close');\n                $(defaults.modalContainer).append(modal);\n            } else return false; //nothing found\n        }\n        modal = $(modal);\n        target = $(target);\n        if (modal.length === 0 || target.length === 0) return false;\n        if (modal.find('.popover-angle').length === 0) {\n            modal.append('<div class=\"popover-angle\"></div>');\n        }\n        modal.show();\n\n        function sizePopover() {\n            modal.css({ left: '', top: '' });\n            var modalWidth = modal.width();\n            var modalHeight = modal.height(); // 13 - height of angle\n            var modalAngle = modal.find('.popover-angle');\n            var modalAngleSize = modalAngle.width() / 2;\n            var modalAngleLeft, modalAngleTop;\n            modalAngle.removeClass('on-left on-right on-top on-bottom').css({ left: '', top: '' });\n\n            var targetWidth = target.outerWidth();\n            var targetHeight = target.outerHeight();\n            var targetOffset = target.offset();\n            var targetParentPage = target.parents('.page');\n            if (targetParentPage.length > 0) {\n                targetOffset.top = targetOffset.top - targetParentPage[0].scrollTop;\n            }\n\n            var windowHeight = $(window).height();\n            var windowWidth = $(window).width();\n\n            var modalTop = 0;\n            var modalLeft = 0;\n            var diff = 0;\n            // Top Position\n            var modalPosition = 'top';\n\n            if ((modalHeight + modalAngleSize) < targetOffset.top) {\n                // On top\n                modalTop = targetOffset.top - modalHeight - modalAngleSize;\n            } else if ((modalHeight + modalAngleSize) < windowHeight - targetOffset.top - targetHeight) {\n                // On bottom\n                modalPosition = 'bottom';\n                modalTop = targetOffset.top + targetHeight + modalAngleSize;\n            } else {\n                // On middle\n                modalPosition = 'middle';\n                modalTop = targetHeight / 2 + targetOffset.top - modalHeight / 2;\n                diff = modalTop;\n                if (modalTop < 0) {\n                    modalTop = 5;\n                } else if (modalTop + modalHeight > windowHeight) {\n                    modalTop = windowHeight - modalHeight - 5;\n                }\n                diff = diff - modalTop;\n            }\n            // Horizontal Position\n            if (modalPosition === 'top' || modalPosition === 'bottom') {\n                modalLeft = targetWidth / 2 + targetOffset.left - modalWidth / 2;\n                diff = modalLeft;\n                if (modalLeft < 5) modalLeft = 5;\n                if (modalLeft + modalWidth > windowWidth) modalLeft = windowWidth - modalWidth - 5;\n                if (modalPosition === 'top') modalAngle.addClass('on-bottom');\n                if (modalPosition === 'bottom') modalAngle.addClass('on-top');\n                diff = diff - modalLeft;\n                modalAngleLeft = (modalWidth / 2 - modalAngleSize + diff);\n                modalAngleLeft = Math.max(Math.min(modalAngleLeft, modalWidth - modalAngleSize * 2 - 6), 6);\n                modalAngle.css({ left: modalAngleLeft + 'px' });\n            } else if (modalPosition === 'middle') {\n                modalLeft = targetOffset.left - modalWidth - modalAngleSize;\n                modalAngle.addClass('on-right');\n                if (modalLeft < 5) {\n                    modalLeft = targetOffset.left + targetWidth + modalAngleSize;\n                    modalAngle.removeClass('on-right').addClass('on-left');\n                }\n                if (modalLeft + modalWidth > windowWidth) {\n                    modalLeft = windowWidth - modalWidth - 5;\n                    modalAngle.removeClass('on-right').addClass('on-left');\n                }\n                modalAngleTop = (modalHeight / 2 - modalAngleSize + diff);\n                modalAngleTop = Math.max(Math.min(modalAngleTop, modalHeight - modalAngleSize * 2 - 6), 6);\n                modalAngle.css({ top: modalAngleTop + 'px' });\n            }\n\n            // Apply Styles\n            modal.css({ top: modalTop + 'px', left: modalLeft + 'px' });\n        }\n        sizePopover();\n\n        $(window).on('resize', sizePopover);\n        modal.on('close', function() {\n            $(window).off('resize', sizePopover);\n        });\n\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n\n        $.openModal(modal);\n        return modal[0];\n    };\n    $.popup = function(modal, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n            var _modal = document.createElement('div');\n            _modal.innerHTML = modal.trim();\n            if (_modal.childNodes.length > 0) {\n                modal = _modal.childNodes[0];\n                if (removeOnClose) modal.classList.add('remove-on-close');\n                $(defaults.modalContainer).append(modal);\n            } else return false; //nothing found\n        }\n        modal = $(modal);\n        if (modal.length === 0) return false;\n        modal.show();\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n        $.openModal(modal);\n\n        return modal[0];\n    };\n    $.pickerModal = function(pickerModal, removeOnClose) {\n        if (typeof removeOnClose === 'undefined') removeOnClose = true;\n        if (typeof pickerModal === 'string' && pickerModal.indexOf('<') >= 0) {\n            pickerModal = $(pickerModal);\n            if (pickerModal.length > 0) {\n                if (removeOnClose) pickerModal.addClass('remove-on-close');\n                $(defaults.modalContainer).append(pickerModal[0]);\n            } else return false; //nothing found\n        }\n        pickerModal = $(pickerModal);\n        if (pickerModal.length === 0) return false;\n        pickerModal.show();\n        $.openModal(pickerModal);\n        return pickerModal[0];\n    };\n    $.loginScreen = function(modal) {\n        if (!modal) modal = '.login-screen';\n        modal = $(modal);\n        if (modal.length === 0) return false;\n        modal.show();\n        if (modal.find('.' + defaults.viewClass).length > 0) {\n            $.sizeNavbars(modal.find('.' + defaults.viewClass)[0]);\n        }\n        $.openModal(modal);\n        return modal[0];\n    };\n    //显示一个消息，会在2秒钟后自动消失\n    $.toast = function(msg, time) {\n        var $toast = $(\"<div class='modal toast'>\" + msg + \"</div>\").appendTo(document.body);\n        $.openModal($toast);\n        setTimeout(function() {\n            $.closeModal($toast);\n        }, time || 2000);\n    };\n    $.openModal = function(modal) {\n        if (defaults.closePrevious) $.closeModal();\n        modal = $(modal);\n        var isModal = modal.hasClass('modal');\n        if ($('.modal.modal-in:not(.modal-out)').length && defaults.modalStack && isModal) {\n            $.modalStack.push(function() {\n                $.openModal(modal);\n            });\n            return;\n        }\n        var isPopover = modal.hasClass('popover');\n        var isPopup = modal.hasClass('popup');\n        var isLoginScreen = modal.hasClass('login-screen');\n        var isPickerModal = modal.hasClass('picker-modal');\n        var isToast = modal.hasClass('toast');\n        if (isModal) {\n            modal.show();\n            modal.css({\n                marginTop: -Math.round(modal.outerHeight() / 2) + 'px'\n            });\n        }\n        if (isToast) {\n            modal.show();\n            modal.css({\n                marginLeft: -Math.round(parseInt(window.getComputedStyle(modal[0]).width) / 2) + 'px' //\n            });\n        }\n\n        var overlay;\n        if (!isLoginScreen && !isPickerModal && !isToast) {\n            if ($('.modal-overlay').length === 0 && !isPopup) {\n                $(defaults.modalContainer).append('<div class=\"modal-overlay\"></div>');\n            }\n            if ($('.popup-overlay').length === 0 && isPopup) {\n                $(defaults.modalContainer).append('<div class=\"popup-overlay\"></div>');\n            }\n            overlay = isPopup ? $('.popup-overlay') : $('.modal-overlay');\n        }\n\n        //Make sure that styles are applied, trigger relayout;\n        var clientLeft = modal[0].clientLeft;\n\n        // Trugger open event\n        modal.trigger('open');\n\n        // Picker modal body class\n        if (isPickerModal) {\n            $(defaults.modalContainer).addClass('with-picker-modal');\n        }\n\n        // Classes for transition in\n        if (!isLoginScreen && !isPickerModal && !isToast) overlay.addClass('modal-overlay-visible');\n        modal.removeClass('modal-out').addClass('modal-in').transitionEnd(function(e) {\n            if (modal.hasClass('modal-out')) modal.trigger('closed');\n            else modal.trigger('opened');\n        });\n        return true;\n    };\n    $.closeModal = function(modal) {\n        modal = $(modal || '.modal-in');\n        if (typeof modal !== 'undefined' && modal.length === 0) {\n            return;\n        }\n        var isModal = modal.hasClass('modal');\n        var isPopover = modal.hasClass('popover');\n        var isPopup = modal.hasClass('popup');\n        var isLoginScreen = modal.hasClass('login-screen');\n        var isPickerModal = modal.hasClass('picker-modal');\n\n        var removeOnClose = modal.hasClass('remove-on-close');\n\n        var overlay = isPopup ? $('.popup-overlay') : $('.modal-overlay');\n        if (isPopup) {\n            if (modal.length === $('.popup.modal-in').length) {\n                overlay.removeClass('modal-overlay-visible');\n            }\n        } else if (!isPickerModal) {\n            overlay.removeClass('modal-overlay-visible');\n        }\n\n        modal.trigger('close');\n\n        // Picker modal body class\n        if (isPickerModal) {\n            $(defaults.modalContainer).removeClass('with-picker-modal');\n            $(defaults.modalContainer).addClass('picker-modal-closing');\n        }\n\n        if (!isPopover) {\n            modal.removeClass('modal-in').addClass('modal-out').transitionEnd(function(e) {\n                if (modal.hasClass('modal-out')) modal.trigger('closed');\n                else modal.trigger('opened');\n\n                if (isPickerModal) {\n                    $(defaults.modalContainer).removeClass('picker-modal-closing');\n                }\n                if (isPopup || isLoginScreen || isPickerModal) {\n                    modal.removeClass('modal-out').hide();\n                    if (removeOnClose && modal.length > 0) {\n                        modal.remove();\n                    }\n                } else {\n                    modal.remove();\n                }\n            });\n            if (isModal && defaults.modalStack) {\n                $.modalStackClearQueue();\n            }\n        } else {\n            modal.removeClass('modal-in modal-out').trigger('closed').hide();\n            if (removeOnClose) {\n                modal.remove();\n            }\n        }\n        return true;\n    };\n\n    function handleClicks(e) {\n        /*jshint validthis:true */\n        var clicked = $(this);\n        var url = clicked.attr('href');\n\n        //Collect Clicked data- attributes\n        var clickedData = clicked.dataset();\n\n        // Popover\n        if (clicked.hasClass('open-popover')) {\n            var popover;\n            if (clickedData.popover) {\n                popover = clickedData.popover;\n            } else popover = '.popover';\n            $.popover(popover, clicked);\n        }\n        if (clicked.hasClass('close-popover')) {\n            $.closeModal('.popover.modal-in');\n        }\n        // Popup\n        var popup;\n        if (clicked.hasClass('open-popup')) {\n            if (clickedData.popup) {\n                popup = clickedData.popup;\n            } else popup = '.popup';\n            $.popup(popup);\n        }\n        if (clicked.hasClass('close-popup')) {\n            if (clickedData.popup) {\n                popup = clickedData.popup;\n            } else popup = '.popup.modal-in';\n            $.closeModal(popup);\n        }\n\n        // Close Modal\n        if (clicked.hasClass('modal-overlay')) {\n            if ($('.modal.modal-in').length > 0 && defaults.modalCloseByOutside)\n                $.closeModal('.modal.modal-in');\n            if ($('.actions-modal.modal-in').length > 0 && defaults.actionsCloseByOutside)\n                $.closeModal('.actions-modal.modal-in');\n\n            if ($('.popover.modal-in').length > 0) $.closeModal('.popover.modal-in');\n        }\n        if (clicked.hasClass('popup-overlay')) {\n            if ($('.popup.modal-in').length > 0 && defaults.popupCloseByOutside)\n                $.closeModal('.popup.modal-in');\n        }\n    }\n\n    var defaults = $.modal.prototype.defaults = {\n        modalButtonOk: 'OK',\n        modalButtonCancel: 'Cancel',\n        modalPreloaderTitle: 'Loading...',\n        modalContainer: document.body,\n        modalCloseByOutside: true,\n        actionsCloseByOutside: false,\n        popupCloseByOutside: true,\n        closePrevious: true //close all previous modal before open\n    };\n\n    $(function() {\n        $(document).on('click', ' .modal-overlay, .popup-overlay, .close-popup, .open-popup, .open-popover, .close-popover, .close-picker', handleClicks);\n        defaults.modalContainer = defaults.modalContainer || document.body; //incase some one include js in head\n    });\n}($);\n\n/*======================================================\n************   Calendar   ************\n======================================================*/\n/* global $:true */\n/*jshint unused: false*/\n+\n\nfunction($) {\n    \"use strict\";\n    var rtl = false;\n    var defaults;\n    var Calendar = function(params) {\n        var p = this;\n        params = params || {};\n        for (var def in defaults) {\n            if (typeof params[def] === 'undefined') {\n                params[def] = defaults[def];\n            }\n        }\n        p.params = params;\n        p.initialized = false;\n\n        // Inline flag\n        p.inline = p.params.container ? true : false;\n\n        // Is horizontal\n        p.isH = p.params.direction === 'horizontal';\n\n        // RTL inverter\n        var inverter = p.isH ? (rtl ? -1 : 1) : 1;\n\n        // Animating flag\n        p.animating = false;\n\n        // Should be converted to popover\n        function isPopover() {\n            var toPopover = false;\n            if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n            if (!p.inline && p.params.input) {\n                if (p.params.onlyInPopover) toPopover = true;\n                else {\n                    if ($.device.ios) {\n                        toPopover = $.device.ipad ? true : false;\n                    } else {\n                        if ($(window).width() >= 768) toPopover = true;\n                    }\n                }\n            }\n            return toPopover;\n        }\n\n        function inPopover() {\n            if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;\n            else return false;\n        }\n\n        // Format date\n        function formatDate(date) {\n            date = new Date(date);\n            var year = date.getFullYear();\n            var month = date.getMonth();\n            var month1 = month + 1;\n            var day = date.getDate();\n            var weekDay = date.getDay();\n            return p.params.dateFormat\n                .replace(/yyyy/g, year)\n                .replace(/yy/g, (year + '').substring(2))\n                .replace(/mm/g, month1 < 10 ? '0' + month1 : month1)\n                .replace(/m/g, month1)\n                .replace(/MM/g, p.params.monthNames[month])\n                .replace(/M/g, p.params.monthNamesShort[month])\n                .replace(/dd/g, day < 10 ? '0' + day : day)\n                .replace(/d/g, day)\n                .replace(/DD/g, p.params.dayNames[weekDay])\n                .replace(/D/g, p.params.dayNamesShort[weekDay]);\n        }\n\n\n        // Value\n        p.addValue = function(value) {\n            if (p.params.multiple) {\n                if (!p.value) p.value = [];\n                var inValuesIndex;\n                for (var i = 0; i < p.value.length; i++) {\n                    if (new Date(value).getTime() === new Date(p.value[i]).getTime()) {\n                        inValuesIndex = i;\n                    }\n                }\n                if (typeof inValuesIndex === 'undefined') {\n                    p.value.push(value);\n                } else {\n                    p.value.splice(inValuesIndex, 1);\n                }\n                p.updateValue();\n            } else {\n                p.value = [value];\n                p.updateValue();\n            }\n        };\n        p.setValue = function(arrValues) {\n            p.value = arrValues;\n            p.updateValue();\n        };\n        p.updateValue = function() {\n            p.wrapper.find('.picker-calendar-day-selected').removeClass('picker-calendar-day-selected');\n            var i, inputValue;\n            for (i = 0; i < p.value.length; i++) {\n                var valueDate = new Date(p.value[i]);\n                p.wrapper.find('.picker-calendar-day[data-date=\"' + valueDate.getFullYear() + '-' + valueDate.getMonth() + '-' + valueDate.getDate() + '\"]').addClass('picker-calendar-day-selected');\n            }\n            if (p.params.onChange) {\n                p.params.onChange(p, p.value, p.value.map(formatDate));\n            }\n            if (p.input && p.input.length > 0) {\n                if (p.params.formatValue) inputValue = p.params.formatValue(p, p.value);\n                else {\n                    inputValue = [];\n                    for (i = 0; i < p.value.length; i++) {\n                        inputValue.push(formatDate(p.value[i]));\n                    }\n                    inputValue = inputValue.join(', ');\n                }\n                $(p.input).val(inputValue);\n                $(p.input).trigger('change');\n            }\n        };\n\n        // Columns Handlers\n        p.initCalendarEvents = function() {\n            var col;\n            var allowItemClick = true;\n            var isTouched, isMoved, touchStartX, touchStartY, touchCurrentX, touchCurrentY, touchStartTime, touchEndTime, startTranslate, currentTranslate, wrapperWidth, wrapperHeight, percentage, touchesDiff, isScrolling;\n\n            function handleTouchStart(e) {\n                if (isMoved || isTouched) return;\n                // e.preventDefault();\n                isTouched = true;\n                var position = $.getTouchPosition(e);\n                touchStartX = touchCurrentY = position.x;\n                touchStartY = touchCurrentY = position.y;\n                touchStartTime = (new Date()).getTime();\n                percentage = 0;\n                allowItemClick = true;\n                isScrolling = undefined;\n                startTranslate = currentTranslate = p.monthsTranslate;\n            }\n\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                var position = $.getTouchPosition(e);\n                touchCurrentX = position.x;\n                touchCurrentY = position.y;\n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n                }\n                if (p.isH && isScrolling) {\n                    isTouched = false;\n                    return;\n                }\n                e.preventDefault();\n                if (p.animating) {\n                    isTouched = false;\n                    return;\n                }\n                allowItemClick = false;\n                if (!isMoved) {\n                    // First move\n                    isMoved = true;\n                    wrapperWidth = p.wrapper[0].offsetWidth;\n                    wrapperHeight = p.wrapper[0].offsetHeight;\n                    p.wrapper.transition(0);\n                }\n                e.preventDefault();\n\n                touchesDiff = p.isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n                percentage = touchesDiff / (p.isH ? wrapperWidth : wrapperHeight);\n                currentTranslate = (p.monthsTranslate * inverter + percentage) * 100;\n\n                // Transform wrapper\n                p.wrapper.transform('translate3d(' + (p.isH ? currentTranslate : 0) + '%, ' + (p.isH ? 0 : currentTranslate) + '%, 0)');\n\n            }\n\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = isMoved = false;\n                    return;\n                }\n                isTouched = isMoved = false;\n\n                touchEndTime = new Date().getTime();\n                if (touchEndTime - touchStartTime < 300) {\n                    if (Math.abs(touchesDiff) < 10) {\n                        p.resetMonth();\n                    } else if (touchesDiff >= 10) {\n                        if (rtl) p.nextMonth();\n                        else p.prevMonth();\n                    } else {\n                        if (rtl) p.prevMonth();\n                        else p.nextMonth();\n                    }\n                } else {\n                    if (percentage <= -0.5) {\n                        if (rtl) p.prevMonth();\n                        else p.nextMonth();\n                    } else if (percentage >= 0.5) {\n                        if (rtl) p.nextMonth();\n                        else p.prevMonth();\n                    } else {\n                        p.resetMonth();\n                    }\n                }\n\n                // Allow click\n                setTimeout(function() {\n                    allowItemClick = true;\n                }, 100);\n            }\n\n            function handleDayClick(e) {\n                if (!allowItemClick) return;\n                var day = $(e.target).parents('.picker-calendar-day');\n                if (day.length === 0 && $(e.target).hasClass('picker-calendar-day')) {\n                    day = $(e.target);\n                }\n                if (day.length === 0) return;\n                if (day.hasClass('picker-calendar-day-selected') && !p.params.multiple) return;\n                if (day.hasClass('picker-calendar-day-disabled')) return;\n                if (day.hasClass('picker-calendar-day-next')) p.nextMonth();\n                if (day.hasClass('picker-calendar-day-prev')) p.prevMonth();\n                var dateYear = day.attr('data-year');\n                var dateMonth = day.attr('data-month');\n                var dateDay = day.attr('data-day');\n                if (p.params.onDayClick) {\n                    p.params.onDayClick(p, day[0], dateYear, dateMonth, dateDay);\n                }\n                p.addValue(new Date(dateYear, dateMonth, dateDay).getTime());\n                if (p.params.closeOnSelect) p.close();\n            }\n\n            p.container.find('.picker-calendar-prev-month').on('click', p.prevMonth);\n            p.container.find('.picker-calendar-next-month').on('click', p.nextMonth);\n            p.container.find('.picker-calendar-prev-year').on('click', p.prevYear);\n            p.container.find('.picker-calendar-next-year').on('click', p.nextYear);\n            p.wrapper.on('click', handleDayClick);\n            if (p.params.touchMove) {\n                p.wrapper.on($.touchEvents.start, handleTouchStart);\n                p.wrapper.on($.touchEvents.move, handleTouchMove);\n                p.wrapper.on($.touchEvents.end, handleTouchEnd);\n            }\n\n            p.container[0].f7DestroyCalendarEvents = function() {\n                p.container.find('.picker-calendar-prev-month').off('click', p.prevMonth);\n                p.container.find('.picker-calendar-next-month').off('click', p.nextMonth);\n                p.container.find('.picker-calendar-prev-year').off('click', p.prevYear);\n                p.container.find('.picker-calendar-next-year').off('click', p.nextYear);\n                p.wrapper.off('click', handleDayClick);\n                if (p.params.touchMove) {\n                    p.wrapper.off($.touchEvents.start, handleTouchStart);\n                    p.wrapper.off($.touchEvents.move, handleTouchMove);\n                    p.wrapper.off($.touchEvents.end, handleTouchEnd);\n                }\n            };\n\n\n        };\n        p.destroyCalendarEvents = function(colContainer) {\n            if ('f7DestroyCalendarEvents' in p.container[0]) p.container[0].f7DestroyCalendarEvents();\n        };\n\n        // Calendar Methods\n        p.daysInMonth = function(date) {\n            var d = new Date(date);\n            return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n        };\n        p.monthHTML = function(date, offset) {\n            date = new Date(date);\n            var year = date.getFullYear(),\n                month = date.getMonth(),\n                day = date.getDate();\n            if (offset === 'next') {\n                if (month === 11) date = new Date(year + 1, 0);\n                else date = new Date(year, month + 1, 1);\n            }\n            if (offset === 'prev') {\n                if (month === 0) date = new Date(year - 1, 11);\n                else date = new Date(year, month - 1, 1);\n            }\n            if (offset === 'next' || offset === 'prev') {\n                month = date.getMonth();\n                year = date.getFullYear();\n            }\n            var daysInPrevMonth = p.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000),\n                daysInMonth = p.daysInMonth(date),\n                firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n            if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n            var dayDate, currentValues = [],\n                i, j,\n                rows = 6,\n                cols = 7,\n                monthHTML = '',\n                dayIndex = 0 + (p.params.firstDay - 1),\n                today = new Date().setHours(0, 0, 0, 0),\n                minDate = p.params.minDate ? new Date(p.params.minDate).getTime() : null,\n                maxDate = p.params.maxDate ? new Date(p.params.maxDate).getTime() : null;\n\n            if (p.value && p.value.length) {\n                for (i = 0; i < p.value.length; i++) {\n                    currentValues.push(new Date(p.value[i]).setHours(0, 0, 0, 0));\n                }\n            }\n\n            for (i = 1; i <= rows; i++) {\n                var rowHTML = '';\n                var row = i;\n                for (j = 1; j <= cols; j++) {\n                    var col = j;\n                    dayIndex++;\n                    var dayNumber = dayIndex - firstDayOfMonthIndex;\n                    var addClass = '';\n                    if (dayNumber < 0) {\n                        dayNumber = daysInPrevMonth + dayNumber + 1;\n                        addClass += ' picker-calendar-day-prev';\n                        dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n                    } else {\n                        dayNumber = dayNumber + 1;\n                        if (dayNumber > daysInMonth) {\n                            dayNumber = dayNumber - daysInMonth;\n                            addClass += ' picker-calendar-day-next';\n                            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n                        } else {\n                            dayDate = new Date(year, month, dayNumber).getTime();\n                        }\n                    }\n                    // Today\n                    if (dayDate === today) addClass += ' picker-calendar-day-today';\n                    // Selected\n                    if (currentValues.indexOf(dayDate) >= 0) addClass += ' picker-calendar-day-selected';\n                    // Weekend\n                    if (p.params.weekendDays.indexOf(col - 1) >= 0) {\n                        addClass += ' picker-calendar-day-weekend';\n                    }\n                    // Disabled\n                    if ((minDate && dayDate < minDate) || (maxDate && dayDate > maxDate)) {\n                        addClass += ' picker-calendar-day-disabled';\n                    }\n\n                    dayDate = new Date(dayDate);\n                    var dayYear = dayDate.getFullYear();\n                    var dayMonth = dayDate.getMonth();\n                    rowHTML += '<div data-year=\"' + dayYear + '\" data-month=\"' + dayMonth + '\" data-day=\"' + dayNumber + '\" class=\"picker-calendar-day' + (addClass) + '\" data-date=\"' + (dayYear + '-' + dayMonth + '-' + dayNumber) + '\"><span>' + dayNumber + '</span></div>';\n                }\n                monthHTML += '<div class=\"picker-calendar-row\">' + rowHTML + '</div>';\n            }\n            monthHTML = '<div class=\"picker-calendar-month\" data-year=\"' + year + '\" data-month=\"' + month + '\">' + monthHTML + '</div>';\n            return monthHTML;\n        };\n        p.animating = false;\n        p.updateCurrentMonthYear = function(dir) {\n            if (typeof dir === 'undefined') {\n                p.currentMonth = parseInt(p.months.eq(1).attr('data-month'), 10);\n                p.currentYear = parseInt(p.months.eq(1).attr('data-year'), 10);\n            } else {\n                p.currentMonth = parseInt(p.months.eq(dir === 'next' ? (p.months.length - 1) : 0).attr('data-month'), 10);\n                p.currentYear = parseInt(p.months.eq(dir === 'next' ? (p.months.length - 1) : 0).attr('data-year'), 10);\n            }\n            p.container.find('.current-month-value').text(p.params.monthNames[p.currentMonth]);\n            p.container.find('.current-year-value').text(p.currentYear);\n\n        };\n        p.onMonthChangeStart = function(dir) {\n            p.updateCurrentMonthYear(dir);\n            p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n            var currentIndex = dir === 'next' ? p.months.length - 1 : 0;\n\n            p.months.eq(currentIndex).addClass('picker-calendar-month-current');\n            p.months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'picker-calendar-month-prev' : 'picker-calendar-month-next');\n\n            if (p.params.onMonthYearChangeStart) {\n                p.params.onMonthYearChangeStart(p, p.currentYear, p.currentMonth);\n            }\n        };\n        p.onMonthChangeEnd = function(dir, rebuildBoth) {\n            p.animating = false;\n            var nextMonthHTML, prevMonthHTML, newMonthHTML;\n            p.wrapper.find('.picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)').remove();\n\n            if (typeof dir === 'undefined') {\n                dir = 'next';\n                rebuildBoth = true;\n            }\n            if (!rebuildBoth) {\n                newMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), dir);\n            } else {\n                p.wrapper.find('.picker-calendar-month-next, .picker-calendar-month-prev').remove();\n                prevMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'prev');\n                nextMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'next');\n            }\n            if (dir === 'next' || rebuildBoth) {\n                p.wrapper.append(newMonthHTML || nextMonthHTML);\n            }\n            if (dir === 'prev' || rebuildBoth) {\n                p.wrapper.prepend(newMonthHTML || prevMonthHTML);\n            }\n            p.months = p.wrapper.find('.picker-calendar-month');\n            p.setMonthsTranslate(p.monthsTranslate);\n            if (p.params.onMonthAdd) {\n                p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n            }\n            if (p.params.onMonthYearChangeEnd) {\n                p.params.onMonthYearChangeEnd(p, p.currentYear, p.currentMonth);\n            }\n        };\n        p.setMonthsTranslate = function(translate) {\n            translate = translate || p.monthsTranslate || 0;\n            if (typeof p.monthsTranslate === 'undefined') p.monthsTranslate = translate;\n            p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n            var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n            var currentMonthTranslate = -translate * 100 * inverter;\n            var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n            p.months.eq(0).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n            p.months.eq(1).transform('translate3d(' + (p.isH ? currentMonthTranslate : 0) + '%, ' + (p.isH ? 0 : currentMonthTranslate) + '%, 0)').addClass('picker-calendar-month-current');\n            p.months.eq(2).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n        };\n        p.nextMonth = function(transition) {\n            if (typeof transition === 'undefined' || typeof transition === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var nextMonth = parseInt(p.months.eq(p.months.length - 1).attr('data-month'), 10);\n            var nextYear = parseInt(p.months.eq(p.months.length - 1).attr('data-year'), 10);\n            var nextDate = new Date(nextYear, nextMonth);\n            var nextDateTime = nextDate.getTime();\n            var transitionEndCallback = p.animating ? false : true;\n            if (p.params.maxDate) {\n                if (nextDateTime > new Date(p.params.maxDate).getTime()) {\n                    return p.resetMonth();\n                }\n            }\n            p.monthsTranslate--;\n            if (nextMonth === p.currentMonth) {\n                var nextMonthTranslate = -(p.monthsTranslate) * 100 * inverter;\n                var nextMonthHTML = $(p.monthHTML(nextDateTime, 'next')).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n                p.wrapper.append(nextMonthHTML[0]);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, p.months.eq(p.months.length - 1)[0]);\n                }\n            }\n            p.animating = true;\n            p.onMonthChangeStart('next');\n            var translate = (p.monthsTranslate * 100) * inverter;\n\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function() {\n                    p.onMonthChangeEnd('next');\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd('next');\n            }\n        };\n        p.prevMonth = function(transition) {\n            if (typeof transition === 'undefined' || typeof transition === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var prevMonth = parseInt(p.months.eq(0).attr('data-month'), 10);\n            var prevYear = parseInt(p.months.eq(0).attr('data-year'), 10);\n            var prevDate = new Date(prevYear, prevMonth + 1, -1);\n            var prevDateTime = prevDate.getTime();\n            var transitionEndCallback = p.animating ? false : true;\n            if (p.params.minDate) {\n                if (prevDateTime < new Date(p.params.minDate).getTime()) {\n                    return p.resetMonth();\n                }\n            }\n            p.monthsTranslate++;\n            if (prevMonth === p.currentMonth) {\n                var prevMonthTranslate = -(p.monthsTranslate) * 100 * inverter;\n                var prevMonthHTML = $(p.monthHTML(prevDateTime, 'prev')).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n                p.wrapper.prepend(prevMonthHTML[0]);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, p.months.eq(0)[0]);\n                }\n            }\n            p.animating = true;\n            p.onMonthChangeStart('prev');\n            var translate = (p.monthsTranslate * 100) * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function() {\n                    p.onMonthChangeEnd('prev');\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd('prev');\n            }\n        };\n        p.resetMonth = function(transition) {\n            if (typeof transition === 'undefined') transition = '';\n            var translate = (p.monthsTranslate * 100) * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n        };\n        p.setYearMonth = function(year, month, transition) {\n            if (typeof year === 'undefined') year = p.currentYear;\n            if (typeof month === 'undefined') month = p.currentMonth;\n            if (typeof transition === 'undefined' || typeof transition === 'object') {\n                transition = '';\n                if (!p.params.animate) transition = 0;\n            }\n            var targetDate;\n            if (year < p.currentYear) {\n                targetDate = new Date(year, month + 1, -1).getTime();\n            } else {\n                targetDate = new Date(year, month).getTime();\n            }\n            if (p.params.maxDate && targetDate > new Date(p.params.maxDate).getTime()) {\n                return false;\n            }\n            if (p.params.minDate && targetDate < new Date(p.params.minDate).getTime()) {\n                return false;\n            }\n            var currentDate = new Date(p.currentYear, p.currentMonth).getTime();\n            var dir = targetDate > currentDate ? 'next' : 'prev';\n            var newMonthHTML = p.monthHTML(new Date(year, month));\n            p.monthsTranslate = p.monthsTranslate || 0;\n            var prevTranslate = p.monthsTranslate;\n            var monthTranslate, wrapperTranslate;\n            var transitionEndCallback = p.animating ? false : true;\n            if (targetDate > currentDate) {\n                // To next\n                p.monthsTranslate--;\n                if (!p.animating) p.months.eq(p.months.length - 1).remove();\n                p.wrapper.append(newMonthHTML);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n                p.months.eq(p.months.length - 1).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n            } else {\n                // To prev\n                p.monthsTranslate++;\n                if (!p.animating) p.months.eq(0).remove();\n                p.wrapper.prepend(newMonthHTML);\n                p.months = p.wrapper.find('.picker-calendar-month');\n                monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n                p.months.eq(0).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n            }\n            if (p.params.onMonthAdd) {\n                p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n            }\n            p.animating = true;\n            p.onMonthChangeStart(dir);\n            wrapperTranslate = (p.monthsTranslate * 100) * inverter;\n            p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? wrapperTranslate : 0) + '%, ' + (p.isH ? 0 : wrapperTranslate) + '%, 0)');\n            if (transitionEndCallback) {\n                p.wrapper.transitionEnd(function() {\n                    p.onMonthChangeEnd(dir, true);\n                });\n            }\n            if (!p.params.animate) {\n                p.onMonthChangeEnd(dir);\n            }\n        };\n        p.nextYear = function() {\n            p.setYearMonth(p.currentYear + 1);\n        };\n        p.prevYear = function() {\n            p.setYearMonth(p.currentYear - 1);\n        };\n\n\n        // HTML Layout\n        p.layout = function() {\n            var pickerHTML = '';\n            var pickerClass = '';\n            var i;\n\n            var layoutDate = p.value && p.value.length ? p.value[0] : new Date().setHours(0, 0, 0, 0);\n            var prevMonthHTML = p.monthHTML(layoutDate, 'prev');\n            var currentMonthHTML = p.monthHTML(layoutDate);\n            var nextMonthHTML = p.monthHTML(layoutDate, 'next');\n            var monthsHTML = '<div class=\"picker-calendar-months\"><div class=\"picker-calendar-months-wrapper\">' + (prevMonthHTML + currentMonthHTML + nextMonthHTML) + '</div></div>';\n            // Week days header\n            var weekHeaderHTML = '';\n            if (p.params.weekHeader) {\n                for (i = 0; i < 7; i++) {\n                    var weekDayIndex = (i + p.params.firstDay > 6) ? (i - 7 + p.params.firstDay) : (i + p.params.firstDay);\n                    var dayName = p.params.dayNamesShort[weekDayIndex];\n                    weekHeaderHTML += '<div class=\"picker-calendar-week-day ' + ((p.params.weekendDays.indexOf(weekDayIndex) >= 0) ? 'picker-calendar-week-day-weekend' : '') + '\"> ' + dayName + '</div>';\n\n                }\n                weekHeaderHTML = '<div class=\"picker-calendar-week-days\">' + weekHeaderHTML + '</div>';\n            }\n            pickerClass = 'picker-modal picker-calendar ' + (p.params.cssClass || '');\n            var toolbarHTML = p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '';\n            if (p.params.toolbar) {\n                toolbarHTML = p.params.toolbarTemplate\n                    .replace(/{{closeText}}/g, p.params.toolbarCloseText)\n                    .replace(/{{monthPicker}}/g, (p.params.monthPicker ? p.params.monthPickerTemplate : ''))\n                    .replace(/{{yearPicker}}/g, (p.params.yearPicker ? p.params.yearPickerTemplate : ''));\n            }\n\n            pickerHTML =\n                '<div class=\"' + (pickerClass) + '\">' +\n                toolbarHTML +\n                '<div class=\"picker-modal-inner\">' +\n                weekHeaderHTML +\n                monthsHTML +\n                '</div>' +\n                '</div>';\n\n\n            p.pickerHTML = pickerHTML;\n        };\n\n        // Input Events\n        function openOnInput(e) {\n            e.preventDefault();\n            if (p.opened) return;\n            p.open();\n            if (p.params.scrollToInput && !isPopover()) {\n                var pageContent = p.input.parents('.page-content');\n                if (pageContent.length === 0) return;\n\n                var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                    paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                    pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                    pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                    newPaddingBottom;\n\n                var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                if (inputTop > pageHeight) {\n                    var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                    if (scrollTop + pageHeight > pageScrollHeight) {\n                        newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                        if (pageHeight === pageScrollHeight) {\n                            newPaddingBottom = p.container.height();\n                        }\n                        pageContent.css({ 'padding-bottom': (newPaddingBottom) + 'px' });\n                    }\n                    pageContent.scrollTop(scrollTop, 300);\n                }\n            }\n        }\n\n        function closeOnHTMLClick(e) {\n            if (inPopover()) return;\n            if (p.input && p.input.length > 0) {\n                if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n            } else {\n                if ($(e.target).parents('.picker-modal').length === 0) p.close();\n            }\n        }\n\n        if (p.params.input) {\n            p.input = $(p.params.input);\n            if (p.input.length > 0) {\n                if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                if (!p.inline) {\n                    p.input.on(\"click\", function(e) {\n                        openOnInput(e);\n                        //修复部分安卓系统下，即使设置了readonly依然会弹出系统键盘的bug\n                        if (p.params.inputReadOnly) {\n                            this.focus();\n                            this.blur();\n                        }\n                    });\n                }\n                if (p.params.inputReadOnly) {\n                    p.input.on('focus mousedown', function(e) {\n                        e.preventDefault();\n                    });\n                }\n            }\n        }\n\n        if (!p.inline) $('html').on('click', closeOnHTMLClick);\n\n        // Open\n        function onPickerClose() {\n            p.opened = false;\n            if (p.input && p.input.length > 0) p.input.parents('.page-content').css({ 'padding-bottom': '' });\n            if (p.params.onClose) p.params.onClose(p);\n\n            // Destroy events\n            p.destroyCalendarEvents();\n        }\n\n        p.opened = false;\n        p.open = function() {\n            var toPopover = isPopover();\n            var updateValue = false;\n            if (!p.opened) {\n                // Set date value\n                if (!p.value) {\n                    if (p.params.value) {\n                        p.value = p.params.value;\n                        updateValue = true;\n                    }\n                }\n\n                // Layout\n                p.layout();\n\n                // Append\n                if (toPopover) {\n                    p.pickerHTML = '<div class=\"popover popover-picker-calendar\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                    p.popover = $.popover(p.pickerHTML, p.params.input, true);\n                    p.container = $(p.popover).find('.picker-modal');\n                    $(p.popover).on('close', function() {\n                        onPickerClose();\n                    });\n                } else if (p.inline) {\n                    p.container = $(p.pickerHTML);\n                    p.container.addClass('picker-modal-inline');\n                    $(p.params.container).append(p.container);\n                } else {\n                    p.container = $($.pickerModal(p.pickerHTML));\n                    $(p.container)\n                        .on('close', function() {\n                            onPickerClose();\n                        });\n                }\n\n                // Store calendar instance\n                p.container[0].f7Calendar = p;\n                p.wrapper = p.container.find('.picker-calendar-months-wrapper');\n\n                // Months\n                p.months = p.wrapper.find('.picker-calendar-month');\n\n                // Update current month and year\n                p.updateCurrentMonthYear();\n\n                // Set initial translate\n                p.monthsTranslate = 0;\n                p.setMonthsTranslate();\n\n                // Init events\n                p.initCalendarEvents();\n\n                // Update input value\n                if (updateValue) p.updateValue();\n\n            }\n\n            // Set flag\n            p.opened = true;\n            p.initialized = true;\n            if (p.params.onMonthAdd) {\n                p.months.each(function() {\n                    p.params.onMonthAdd(p, this);\n                });\n            }\n            if (p.params.onOpen) p.params.onOpen(p);\n        };\n\n        // Close\n        p.close = function() {\n            if (!p.opened || p.inline) return;\n            if (inPopover()) {\n                $.closeModal(p.popover);\n                return;\n            } else {\n                $.closeModal(p.container);\n                return;\n            }\n        };\n\n        // Destroy\n        p.destroy = function() {\n            p.close();\n            if (p.params.input && p.input.length > 0) {\n                p.input.off('click focus', openOnInput);\n            }\n            $('html').off('click', closeOnHTMLClick);\n        };\n\n        if (p.inline) {\n            p.open();\n        }\n\n        return p;\n    };\n    $.fn.calendar = function(params) {\n        return this.each(function() {\n            var $this = $(this);\n            if (!$this[0]) return;\n            var calendar = $this.data(\"calendar\");\n            if (!calendar) {\n                var p = {};\n                if ($this[0].tagName.toUpperCase() === \"INPUT\") {\n                    p.input = $this;\n                } else {\n                    p.container = $this;\n                }\n                $this.data(\"calendar\", new Calendar($.extend(p, params)));\n            }\n        });\n    };\n\n    defaults = $.fn.calendar.prototype.defaults = {\n        monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n        monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n        firstDay: 1, // First day of the week, Monday\n        weekendDays: [0, 6], // Sunday and Saturday\n        multiple: false,\n        dateFormat: 'yyyy-mm-dd',\n        direction: 'horizontal', // or 'vertical'\n        minDate: null,\n        maxDate: null,\n        touchMove: true,\n        animate: true,\n        closeOnSelect: true,\n        monthPicker: true,\n        monthPickerTemplate: '<div class=\"picker-calendar-month-picker\">' +\n            '<a href=\"#\" class=\"link icon-only picker-calendar-prev-month\"><i class=\"icon icon-prev\"></i></a>' +\n            '<div class=\"current-month-value\"></div>' +\n            '<a href=\"#\" class=\"link icon-only picker-calendar-next-month\"><i class=\"icon icon-next\"></i></a>' +\n            '</div>',\n        yearPicker: true,\n        yearPickerTemplate: '<div class=\"picker-calendar-year-picker\">' +\n            '<a href=\"#\" class=\"link icon-only picker-calendar-prev-year\"><i class=\"icon icon-prev\"></i></a>' +\n            '<span class=\"current-year-value\"></span>' +\n            '<a href=\"#\" class=\"link icon-only picker-calendar-next-year\"><i class=\"icon icon-next\"></i></a>' +\n            '</div>',\n        weekHeader: true,\n        // Common settings\n        scrollToInput: true,\n        inputReadOnly: true,\n        convertToPopover: true,\n        onlyInPopover: false,\n        toolbar: true,\n        toolbarCloseText: 'Done',\n        toolbarTemplate: '<div class=\"toolbar\">' +\n            '<div class=\"toolbar-inner\">' +\n            '{{monthPicker}}' +\n            '{{yearPicker}}' +\n            // '<a href=\"#\" class=\"link close-picker\">{{closeText}}</a>' +\n            '</div>' +\n            '</div>',\n        /* Callbacks\n        onMonthAdd\n        onChange\n        onOpen\n        onClose\n        onDayClick\n        onMonthYearChangeStart\n        onMonthYearChangeEnd\n        */\n    };\n\n    $.initCalendar = function(content) {\n        var $content = content ? $(content) : $(document.body);\n        $content.find(\"[data-toggle='date']\").each(function() {\n            $(this).calendar();\n        });\n    };\n}($);\n\n/*======================================================\n************   Picker   ************\n======================================================*/\n/* global $:true */\n/* jshint unused:false */\n/* jshint multistr:true */\n+\n\nfunction($) {\n    \"use strict\";\n    var Picker = function(params) {\n        var p = this;\n        var defaults = {\n            updateValuesOnMomentum: false,\n            updateValuesOnTouchmove: true,\n            rotateEffect: false,\n            momentumRatio: 7,\n            freeMode: false,\n            // Common settings\n            scrollToInput: true,\n            inputReadOnly: true,\n            convertToPopover: true,\n            onlyInPopover: false,\n            toolbar: true,\n            toolbarCloseText: 'OK',\n            toolbarTemplate: '<header class=\"bar bar-nav\">\\\n          <button class=\"button button-link pull-right close-picker\">OK</button>\\\n          <h1 class=\"title\"></h1>\\\n          </header>',\n        };\n        params = params || {};\n        for (var def in defaults) {\n            if (typeof params[def] === 'undefined') {\n                params[def] = defaults[def];\n            }\n        }\n        p.params = params;\n        p.cols = [];\n        p.initialized = false;\n\n        // Inline flag\n        p.inline = p.params.container ? true : false;\n\n        // 3D Transforms origin bug, only on safari\n        var originBug = $.device.ios || (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') < 0) && !$.device.android;\n\n        // Should be converted to popover\n        function isPopover() {\n            var toPopover = false;\n            if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n            if (!p.inline && p.params.input) {\n                if (p.params.onlyInPopover) toPopover = true;\n                else {\n                    if ($.device.ios) {\n                        toPopover = $.device.ipad ? true : false;\n                    } else {\n                        if ($(window).width() >= 768) toPopover = true;\n                    }\n                }\n            }\n            return toPopover;\n        }\n\n        function inPopover() {\n            if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;\n            else return false;\n        }\n\n        // Value\n        p.setValue = function(arrValues, transition) {\n            var valueIndex = 0;\n            for (var i = 0; i < p.cols.length; i++) {\n                if (p.cols[i] && !p.cols[i].divider) {\n                    p.cols[i].setValue(arrValues[valueIndex], transition);\n                    valueIndex++;\n                }\n            }\n        };\n        p.updateValue = function() {\n            var newValue = [];\n            var newDisplayValue = [];\n            for (var i = 0; i < p.cols.length; i++) {\n                if (!p.cols[i].divider) {\n                    newValue.push(p.cols[i].value);\n                    newDisplayValue.push(p.cols[i].displayValue);\n                }\n            }\n            if (newValue.indexOf(undefined) >= 0) {\n                return;\n            }\n            p.value = newValue;\n            p.displayValue = newDisplayValue;\n            if (p.params.onChange) {\n                p.params.onChange(p, p.value, p.displayValue);\n            }\n            if (p.input && p.input.length > 0) {\n                $(p.input).val(p.params.formatValue ? p.params.formatValue(p, p.value, p.displayValue) : p.value.join(' '));\n                $(p.input).trigger('change');\n            }\n        };\n\n        // Columns Handlers\n        p.initPickerCol = function(colElement, updateItems) {\n            var colContainer = $(colElement);\n            var colIndex = colContainer.index();\n            var col = p.cols[colIndex];\n            if (col.divider) return;\n            col.container = colContainer;\n            col.wrapper = col.container.find('.picker-items-col-wrapper');\n            col.items = col.wrapper.find('.picker-item');\n\n            var i, j;\n            var wrapperHeight, itemHeight, itemsHeight, minTranslate, maxTranslate;\n            col.replaceValues = function(values, displayValues) {\n                col.destroyEvents();\n                col.values = values;\n                col.displayValues = displayValues;\n                var newItemsHTML = p.columnHTML(col, true);\n                col.wrapper.html(newItemsHTML);\n                col.items = col.wrapper.find('.picker-item');\n                col.calcSize();\n                col.setValue(col.values[0], 0, true);\n                col.initEvents();\n            };\n            col.calcSize = function() {\n                if (p.params.rotateEffect) {\n                    col.container.removeClass('picker-items-col-absolute');\n                    if (!col.width) col.container.css({ width: '' });\n                }\n                var colWidth, colHeight;\n                colWidth = 0;\n                colHeight = col.container[0].offsetHeight;\n                wrapperHeight = col.wrapper[0].offsetHeight;\n                itemHeight = col.items[0].offsetHeight;\n                itemsHeight = itemHeight * col.items.length;\n                minTranslate = colHeight / 2 - itemsHeight + itemHeight / 2;\n                maxTranslate = colHeight / 2 - itemHeight / 2;\n                if (col.width) {\n                    colWidth = col.width;\n                    if (parseInt(colWidth, 10) === colWidth) colWidth = colWidth + 'px';\n                    col.container.css({ width: colWidth });\n                }\n                if (p.params.rotateEffect) {\n                    if (!col.width) {\n                        col.items.each(function() {\n                            var item = $(this);\n                            item.css({ width: 'auto' });\n                            colWidth = Math.max(colWidth, item[0].offsetWidth);\n                            item.css({ width: '' });\n                        });\n                        col.container.css({ width: (colWidth + 2) + 'px' });\n                    }\n                    col.container.addClass('picker-items-col-absolute');\n                }\n            };\n            col.calcSize();\n\n            col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)').transition(0);\n\n\n            var activeIndex = 0;\n            var animationFrameId;\n\n            // Set Value Function\n            col.setValue = function(newValue, transition, valueCallbacks) {\n                if (typeof transition === 'undefined') transition = '';\n                var newActiveIndex = col.wrapper.find('.picker-item[data-picker-value=\"' + newValue + '\"]').index();\n                if (typeof newActiveIndex === 'undefined' || newActiveIndex === -1) {\n                    return;\n                }\n                var newTranslate = -newActiveIndex * itemHeight + maxTranslate;\n                // Update wrapper\n                col.wrapper.transition(transition);\n                col.wrapper.transform('translate3d(0,' + (newTranslate) + 'px,0)');\n\n                // Watch items\n                if (p.params.updateValuesOnMomentum && col.activeIndex && col.activeIndex !== newActiveIndex) {\n                    $.cancelAnimationFrame(animationFrameId);\n                    col.wrapper.transitionEnd(function() {\n                        $.cancelAnimationFrame(animationFrameId);\n                    });\n                    updateDuringScroll();\n                }\n\n                // Update items\n                col.updateItems(newActiveIndex, newTranslate, transition, valueCallbacks);\n            };\n\n            col.updateItems = function(activeIndex, translate, transition, valueCallbacks) {\n                if (typeof translate === 'undefined') {\n                    translate = $.getTranslate(col.wrapper[0], 'y');\n                }\n                if (typeof activeIndex === 'undefined') activeIndex = -Math.round((translate - maxTranslate) / itemHeight);\n                if (activeIndex < 0) activeIndex = 0;\n                if (activeIndex >= col.items.length) activeIndex = col.items.length - 1;\n                var previousActiveIndex = col.activeIndex;\n                col.activeIndex = activeIndex;\n                /*\n                col.wrapper.find('.picker-selected, .picker-after-selected, .picker-before-selected').removeClass('picker-selected picker-after-selected picker-before-selected');\n\n                col.items.transition(transition);\n                var selectedItem = col.items.eq(activeIndex).addClass('picker-selected').transform('');\n                var prevItems = selectedItem.prevAll().addClass('picker-before-selected');\n                var nextItems = selectedItem.nextAll().addClass('picker-after-selected');\n                */\n                //去掉 .picker-after-selected, .picker-before-selected 以提高性能\n                col.wrapper.find('.picker-selected').removeClass('picker-selected');\n                if (p.params.rotateEffect) {\n                    col.items.transition(transition);\n                }\n                var selectedItem = col.items.eq(activeIndex).addClass('picker-selected').transform('');\n\n                if (valueCallbacks || typeof valueCallbacks === 'undefined') {\n                    // Update values\n                    col.value = selectedItem.attr('data-picker-value');\n                    col.displayValue = col.displayValues ? col.displayValues[activeIndex] : col.value;\n                    // On change callback\n                    if (previousActiveIndex !== activeIndex) {\n                        if (col.onChange) {\n                            col.onChange(p, col.value, col.displayValue);\n                        }\n                        p.updateValue();\n                    }\n                }\n\n                // Set 3D rotate effect\n                if (!p.params.rotateEffect) {\n                    return;\n                }\n                var percentage = (translate - (Math.floor((translate - maxTranslate) / itemHeight) * itemHeight + maxTranslate)) / itemHeight;\n\n                col.items.each(function() {\n                    var item = $(this);\n                    var itemOffsetTop = item.index() * itemHeight;\n                    var translateOffset = maxTranslate - translate;\n                    var itemOffset = itemOffsetTop - translateOffset;\n                    var percentage = itemOffset / itemHeight;\n\n                    var itemsFit = Math.ceil(col.height / itemHeight / 2) + 1;\n\n                    var angle = (-18 * percentage);\n                    if (angle > 180) angle = 180;\n                    if (angle < -180) angle = -180;\n                    // Far class\n                    if (Math.abs(percentage) > itemsFit) item.addClass('picker-item-far');\n                    else item.removeClass('picker-item-far');\n                    // Set transform\n                    item.transform('translate3d(0, ' + (-translate + maxTranslate) + 'px, ' + (originBug ? -110 : 0) + 'px) rotateX(' + angle + 'deg)');\n                });\n            };\n\n            function updateDuringScroll() {\n                animationFrameId = $.requestAnimationFrame(function() {\n                    col.updateItems(undefined, undefined, 0);\n                    updateDuringScroll();\n                });\n            }\n\n            // Update items on init\n            if (updateItems) col.updateItems(0, maxTranslate, 0);\n\n            var allowItemClick = true;\n            var isTouched, isMoved, touchStartY, touchCurrentY, touchStartTime, touchEndTime, startTranslate, returnTo, currentTranslate, prevTranslate, velocityTranslate, velocityTime;\n\n            function handleTouchStart(e) {\n                if (isMoved || isTouched) return;\n                e.preventDefault();\n                isTouched = true;\n                var position = $.getTouchPosition(e);\n                touchStartY = touchCurrentY = position.y;\n                touchStartTime = (new Date()).getTime();\n\n                allowItemClick = true;\n                startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n            }\n\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                e.preventDefault();\n                allowItemClick = false;\n                var position = $.getTouchPosition(e);\n                touchCurrentY = position.y;\n                if (!isMoved) {\n                    // First move\n                    $.cancelAnimationFrame(animationFrameId);\n                    isMoved = true;\n                    startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n                    col.wrapper.transition(0);\n                }\n                e.preventDefault();\n\n                var diff = touchCurrentY - touchStartY;\n                currentTranslate = startTranslate + diff;\n                returnTo = undefined;\n\n                // Normalize translate\n                if (currentTranslate < minTranslate) {\n                    currentTranslate = minTranslate - Math.pow(minTranslate - currentTranslate, 0.8);\n                    returnTo = 'min';\n                }\n                if (currentTranslate > maxTranslate) {\n                    currentTranslate = maxTranslate + Math.pow(currentTranslate - maxTranslate, 0.8);\n                    returnTo = 'max';\n                }\n                // Transform wrapper\n                col.wrapper.transform('translate3d(0,' + currentTranslate + 'px,0)');\n\n                // Update items\n                col.updateItems(undefined, currentTranslate, 0, p.params.updateValuesOnTouchmove);\n\n                // Calc velocity\n                velocityTranslate = currentTranslate - prevTranslate || currentTranslate;\n                velocityTime = (new Date()).getTime();\n                prevTranslate = currentTranslate;\n            }\n\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = isMoved = false;\n                    return;\n                }\n                isTouched = isMoved = false;\n                col.wrapper.transition('');\n                if (returnTo) {\n                    if (returnTo === 'min') {\n                        col.wrapper.transform('translate3d(0,' + minTranslate + 'px,0)');\n                    } else col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)');\n                }\n                touchEndTime = new Date().getTime();\n                var velocity, newTranslate;\n                if (touchEndTime - touchStartTime > 300) {\n                    newTranslate = currentTranslate;\n                } else {\n                    velocity = Math.abs(velocityTranslate / (touchEndTime - velocityTime));\n                    newTranslate = currentTranslate + velocityTranslate * p.params.momentumRatio;\n                }\n\n                newTranslate = Math.max(Math.min(newTranslate, maxTranslate), minTranslate);\n\n                // Active Index\n                var activeIndex = -Math.floor((newTranslate - maxTranslate) / itemHeight);\n\n                // Normalize translate\n                if (!p.params.freeMode) newTranslate = -activeIndex * itemHeight + maxTranslate;\n\n                // Transform wrapper\n                col.wrapper.transform('translate3d(0,' + (parseInt(newTranslate, 10)) + 'px,0)');\n\n                // Update items\n                col.updateItems(activeIndex, newTranslate, '', true);\n\n                // Watch items\n                if (p.params.updateValuesOnMomentum) {\n                    updateDuringScroll();\n                    col.wrapper.transitionEnd(function() {\n                        $.cancelAnimationFrame(animationFrameId);\n                    });\n                }\n\n                // Allow click\n                setTimeout(function() {\n                    allowItemClick = true;\n                }, 100);\n            }\n\n            function handleClick(e) {\n                if (!allowItemClick) return;\n                $.cancelAnimationFrame(animationFrameId);\n                /*jshint validthis:true */\n                var value = $(this).attr('data-picker-value');\n                col.setValue(value);\n            }\n\n            col.initEvents = function(detach) {\n                var method = detach ? 'off' : 'on';\n                col.container[method]($.touchEvents.start, handleTouchStart);\n                col.container[method]($.touchEvents.move, handleTouchMove);\n                col.container[method]($.touchEvents.end, handleTouchEnd);\n                col.items[method]('click', handleClick);\n            };\n            col.destroyEvents = function() {\n                col.initEvents(true);\n            };\n\n            col.container[0].f7DestroyPickerCol = function() {\n                col.destroyEvents();\n            };\n\n            col.initEvents();\n\n        };\n        p.destroyPickerCol = function(colContainer) {\n            colContainer = $(colContainer);\n            if ('f7DestroyPickerCol' in colContainer[0]) colContainer[0].f7DestroyPickerCol();\n        };\n        // Resize cols\n        function resizeCols() {\n            if (!p.opened) return;\n            for (var i = 0; i < p.cols.length; i++) {\n                if (!p.cols[i].divider) {\n                    p.cols[i].calcSize();\n                    p.cols[i].setValue(p.cols[i].value, 0, false);\n                }\n            }\n        }\n        $(window).on('resize', resizeCols);\n\n        // HTML Layout\n        p.columnHTML = function(col, onlyItems) {\n            var columnItemsHTML = '';\n            var columnHTML = '';\n            if (col.divider) {\n                columnHTML += '<div class=\"picker-items-col picker-items-col-divider ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\">' + col.content + '</div>';\n            } else {\n                for (var j = 0; j < col.values.length; j++) {\n                    columnItemsHTML += '<div class=\"picker-item\" data-picker-value=\"' + col.values[j] + '\">' + (col.displayValues ? col.displayValues[j] : col.values[j]) + '</div>';\n                }\n                columnHTML += '<div class=\"picker-items-col ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\"><div class=\"picker-items-col-wrapper\">' + columnItemsHTML + '</div></div>';\n            }\n            return onlyItems ? columnItemsHTML : columnHTML;\n        };\n        p.layout = function() {\n            var pickerHTML = '';\n            var pickerClass = '';\n            var i;\n            p.cols = [];\n            var colsHTML = '';\n            for (i = 0; i < p.params.cols.length; i++) {\n                var col = p.params.cols[i];\n                colsHTML += p.columnHTML(p.params.cols[i]);\n                p.cols.push(col);\n            }\n            pickerClass = 'picker-modal picker-columns ' + (p.params.cssClass || '') + (p.params.rotateEffect ? ' picker-3d' : '');\n            pickerHTML =\n                '<div class=\"' + (pickerClass) + '\">' +\n                (p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '') +\n                '<div class=\"picker-modal-inner picker-items\">' +\n                colsHTML +\n                '<div class=\"picker-center-highlight\"></div>' +\n                '</div>' +\n                '</div>';\n\n            p.pickerHTML = pickerHTML;\n        };\n\n        // Input Events\n        function openOnInput(e) {\n            e.preventDefault();\n            if (p.opened) return;\n            p.open();\n            if (p.params.scrollToInput && !isPopover()) {\n                var pageContent = p.input.parents('.content');\n                if (pageContent.length === 0) return;\n\n                var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                    paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                    pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                    pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                    newPaddingBottom;\n                var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                if (inputTop > pageHeight) {\n                    var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                    if (scrollTop + pageHeight > pageScrollHeight) {\n                        newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                        if (pageHeight === pageScrollHeight) {\n                            newPaddingBottom = p.container.height();\n                        }\n                        pageContent.css({ 'padding-bottom': (newPaddingBottom) + 'px' });\n                    }\n                    pageContent.scrollTop(scrollTop, 300);\n                }\n            }\n        }\n\n        function closeOnHTMLClick(e) {\n            if (inPopover()) return;\n            if (p.input && p.input.length > 0) {\n                if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n            } else {\n                if ($(e.target).parents('.picker-modal').length === 0) p.close();\n            }\n        }\n\n        if (p.params.input) {\n            p.input = $(p.params.input);\n            if (p.input.length > 0) {\n                if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                if (!p.inline) {\n                    p.input.on(\"click\", function(e) {\n                        openOnInput(e);\n                        //修复部分安卓系统下，即使设置了readonly依然会弹出系统键盘的bug\n                        if (p.params.inputReadOnly) {\n                            this.focus();\n                            this.blur();\n                        }\n                    });\n                }\n                if (p.params.inputReadOnly) {\n                    p.input.on('focus mousedown', function(e) {\n                        e.preventDefault();\n                    });\n                }\n            }\n\n        }\n\n        if (!p.inline) $('html').on('click', closeOnHTMLClick);\n\n        // Open\n        function onPickerClose() {\n            p.opened = false;\n            if (p.input && p.input.length > 0) p.input.parents('.page-content').css({ 'padding-bottom': '' });\n            if (p.params.onClose) p.params.onClose(p);\n\n            // Destroy events\n            p.container.find('.picker-items-col').each(function() {\n                p.destroyPickerCol(this);\n            });\n        }\n\n        p.opened = false;\n        p.open = function() {\n            var toPopover = isPopover();\n\n            if (!p.opened) {\n\n                // Layout\n                p.layout();\n\n                // Append\n                if (toPopover) {\n                    p.pickerHTML = '<div class=\"popover popover-picker-columns\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                    p.popover = $.popover(p.pickerHTML, p.params.input, true);\n                    p.container = $(p.popover).find('.picker-modal');\n                    $(p.popover).on('close', function() {\n                        onPickerClose();\n                    });\n                } else if (p.inline) {\n                    p.container = $(p.pickerHTML);\n                    p.container.addClass('picker-modal-inline');\n                    $(p.params.container).append(p.container);\n                } else {\n                    p.container = $($.pickerModal(p.pickerHTML));\n                    $(p.container)\n                        .on('close', function() {\n                            onPickerClose();\n                        });\n                }\n\n                // Store picker instance\n                p.container[0].f7Picker = p;\n\n                // Init Events\n                p.container.find('.picker-items-col').each(function() {\n                    var updateItems = true;\n                    if ((!p.initialized && p.params.value) || (p.initialized && p.value)) updateItems = false;\n                    p.initPickerCol(this, updateItems);\n                });\n\n                // Set value\n                if (!p.initialized) {\n                    if (p.params.value) {\n                        p.setValue(p.params.value, 0);\n                    }\n                } else {\n                    if (p.value) p.setValue(p.value, 0);\n                }\n            }\n\n            // Set flag\n            p.opened = true;\n            p.initialized = true;\n\n            if (p.params.onOpen) p.params.onOpen(p);\n        };\n\n        // Close\n        p.close = function() {\n            if (!p.opened || p.inline) return;\n            if (inPopover()) {\n                $.closeModal(p.popover);\n                return;\n            } else {\n                $.closeModal(p.container);\n                return;\n            }\n        };\n\n        // Destroy\n        p.destroy = function() {\n            p.close();\n            if (p.params.input && p.input.length > 0) {\n                p.input.off('click focus', openOnInput);\n            }\n            $('html').off('click', closeOnHTMLClick);\n            $(window).off('resize', resizeCols);\n        };\n\n        if (p.inline) {\n            p.open();\n        }\n\n        return p;\n    };\n\n    $(document).on(\"click\", \".close-picker\", function() {\n        var pickerToClose = $('.picker-modal.modal-in');\n        if (pickerToClose.length > 0) {\n            $.closeModal(pickerToClose);\n        } else {\n            pickerToClose = $('.popover.modal-in .picker-modal');\n            if (pickerToClose.length > 0) {\n                $.closeModal(pickerToClose.parents('.popover'));\n            }\n        }\n    });\n\n    //修复picker会滚动页面的bug\n    $(document).on($.touchEvents.move, \".picker-modal-inner\", function(e) {\n        e.preventDefault();\n    });\n\n    $.fn.picker = function(params) {\n        var args = arguments;\n        return this.each(function() {\n            if (!this) return;\n            var $this = $(this);\n\n            var picker = $this.data(\"picker\");\n            if (!picker) {\n                params = params || {};\n                var inputValue = $this.val();\n                if (params.value === undefined && inputValue !== \"\") {\n                    params.value = params.cols.length > 1 ? inputValue.split(\" \") : [inputValue];\n                }\n                var p = $.extend({ input: this }, params);\n                picker = new Picker(p);\n                $this.data(\"picker\", picker);\n            }\n            if (typeof params === typeof \"a\") {\n                picker[params].apply(picker, Array.prototype.slice.call(args, 1));\n            }\n        });\n    };\n}($);\n\n/* global $:true */\n/* jshint unused:false*/\n\n+\n\nfunction($) {\n    \"use strict\";\n\n\n    $.fn.datetimePicker = function(params) {\n        return this.each(function() {\n\n            if (!this) return;\n\n            var today = new Date();\n\n            var getDays = function(max) {\n                var days = [];\n                for (var i = 1; i <= (max || 31); i++) {\n                    days.push(i < 10 ? \"0\" + i : i);\n                }\n                return days;\n            };\n\n            var getDaysByMonthAndYear = function(month, year) {\n                var int_d = new Date(year, parseInt(month) + 1 - 1, 1);\n                var d = new Date(int_d - 1);\n                return getDays(d.getDate());\n            };\n\n            var formatNumber = function(n) {\n                return n < 10 ? \"0\" + n : n;\n            };\n\n            var initMonthes = ('01 02 03 04 05 06 07 08 09 10 11 12').split(' ');\n\n            var initYears = (function() {\n                var arr = [];\n                for (var i = 1950; i <= 2030; i++) { arr.push(i); }\n                return arr;\n            })();\n\n\n            var defaults = {\n\n                rotateEffect: false, //为了性能\n\n                value: [today.getFullYear(), formatNumber(today.getMonth() + 1), today.getDate(), formatNumber(today.getHours()), formatNumber(today.getMinutes())],\n\n                onChange: function(picker, values, displayValues) {\n                    var days = getDaysByMonthAndYear(picker.cols[1].value, picker.cols[0].value);\n                    var currentValue = picker.cols[2].value;\n                    if (currentValue > days.length) currentValue = days.length;\n                    picker.cols[2].setValue(currentValue);\n                },\n\n                formatValue: function(p, values, displayValues) {\n                    return displayValues[0] + '-' + values[1] + '-' + values[2] + ' ' + values[3] + ':' + values[4];\n                },\n\n                cols: [\n                    // Years\n                    {\n                        values: initYears\n                    },\n                    // Months\n                    {\n                        values: initMonthes\n                    },\n                    // Days\n                    {\n                        values: getDays()\n                    },\n\n                    // Space divider\n                    {\n                        divider: true,\n                        content: '  '\n                    },\n                    // Hours\n                    {\n                        values: (function() {\n                            var arr = [];\n                            for (var i = 0; i <= 23; i++) { arr.push(formatNumber(i)); }\n                            return arr;\n                        })(),\n                    },\n                    // Divider\n                    {\n                        divider: true,\n                        content: ':'\n                    },\n                    // Minutes\n                    {\n                        values: (function() {\n                            var arr = [];\n                            for (var i = 0; i <= 59; i++) { arr.push(formatNumber(i)); }\n                            return arr;\n                        })(),\n                    }\n                ]\n            };\n\n            params = params || {};\n            var inputValue = $(this).val();\n            if (params.value === undefined && inputValue !== \"\") {\n                params.value = [].concat(inputValue.split(\" \")[0].split(\"-\"), inputValue.split(\" \")[1].split(\":\"));\n            }\n\n            var p = $.extend(defaults, params);\n            $(this).picker(p);\n        });\n    };\n\n}($);\n\n+\n\nfunction($) {\n    'use strict';\n\n    $.initPullToRefresh = function(pageContainer) {\n        var eventsTarget = $(pageContainer);\n        if (!eventsTarget.hasClass('pull-to-refresh-content')) {\n            eventsTarget = eventsTarget.find('.pull-to-refresh-content');\n        }\n        if (!eventsTarget || eventsTarget.length === 0) return;\n\n        var isTouched, isMoved, touchesStart = {},\n            isScrolling, touchesDiff, touchStartTime, container, refresh = false,\n            useTranslate = false,\n            startTranslate = 0,\n            translate, scrollTop, wasScrolled, triggerDistance, dynamicTriggerDistance;\n\n        container = eventsTarget;\n\n        // Define trigger distance\n        if (container.attr('data-ptr-distance')) {\n            dynamicTriggerDistance = true;\n        } else {\n            triggerDistance = 44;\n        }\n\n        function handleTouchStart(e) {\n            if (isTouched) {\n                if ($.os.android) {\n                    if ('targetTouches' in e && e.targetTouches.length > 1) return;\n                } else return;\n            }\n            isMoved = false;\n            isTouched = true;\n            isScrolling = undefined;\n            wasScrolled = undefined;\n            var position = $.getTouchPosition(e);\n            touchesStart.x = position.x;\n            touchesStart.y = position.y;\n            touchStartTime = (new Date()).getTime();\n            /*jshint validthis:true */\n            container = $(this);\n        }\n\n        function handleTouchMove(e) {\n            if (!isTouched) return;\n            var position = $.getTouchPosition(e);\n            var pageX = position.x;\n            var pageY = position.y;\n            if (typeof isScrolling === 'undefined') {\n                isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n            }\n            if (!isScrolling) {\n                isTouched = false;\n                return;\n            }\n\n            scrollTop = container[0].scrollTop;\n            if (typeof wasScrolled === 'undefined' && scrollTop !== 0) wasScrolled = true;\n\n            if (!isMoved) {\n                /*jshint validthis:true */\n                container.removeClass('transitioning');\n                if (scrollTop > container[0].offsetHeight) {\n                    isTouched = false;\n                    return;\n                }\n                if (dynamicTriggerDistance) {\n                    triggerDistance = container.attr('data-ptr-distance');\n                    if (triggerDistance.indexOf('%') >= 0) triggerDistance = container[0].offsetHeight * parseInt(triggerDistance, 10) / 100;\n                }\n                startTranslate = container.hasClass('refreshing') ? triggerDistance : 0;\n                if (container[0].scrollHeight === container[0].offsetHeight || !$.os.ios) {\n                    useTranslate = true;\n                } else {\n                    useTranslate = false;\n                }\n                useTranslate = true;\n            }\n            isMoved = true;\n            touchesDiff = pageY - touchesStart.y;\n\n            if (touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0) {\n                // iOS 8 fix\n                if ($.os.ios && parseInt($.os.version.split('.')[0], 10) > 7 && scrollTop === 0 && !wasScrolled) useTranslate = true;\n\n                if (useTranslate) {\n                    e.preventDefault();\n                    translate = (Math.pow(touchesDiff, 0.85) + startTranslate);\n                    container.transform('translate3d(0,' + translate + 'px,0)');\n                } else {}\n                if ((useTranslate && Math.pow(touchesDiff, 0.85) > triggerDistance) || (!useTranslate && touchesDiff >= triggerDistance * 2)) {\n                    refresh = true;\n                    container.addClass('pull-up').removeClass('pull-down');\n                } else {\n                    refresh = false;\n                    container.removeClass('pull-up').addClass('pull-down');\n                }\n            } else {\n\n                container.removeClass('pull-up pull-down');\n                refresh = false;\n                return;\n            }\n        }\n\n        function handleTouchEnd() {\n            if (!isTouched || !isMoved) {\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n            if (translate) {\n                container.addClass('transitioning');\n                translate = 0;\n            }\n            container.transform('');\n            if (refresh) {\n                container.addClass('refreshing');\n                container.trigger('refresh', {\n                    done: function() {\n                        $.pullToRefreshDone(container);\n                    }\n                });\n            } else {\n                container.removeClass('pull-down');\n            }\n            isTouched = false;\n            isMoved = false;\n        }\n\n        // Attach Events\n        eventsTarget.on($.touchEvents.start, handleTouchStart);\n        eventsTarget.on($.touchEvents.move, handleTouchMove);\n        eventsTarget.on($.touchEvents.end, handleTouchEnd);\n\n\n        function destroyPullToRefresh() {\n            eventsTarget.off($.touchEvents.start, handleTouchStart);\n            eventsTarget.off($.touchEvents.move, handleTouchMove);\n            eventsTarget.off($.touchEvents.end, handleTouchEnd);\n        }\n        eventsTarget[0].destroyPullToRefresh = destroyPullToRefresh;\n\n    };\n    $.pullToRefreshDone = function(container) {\n        container = $(container);\n        if (container.length === 0) container = $('.pull-to-refresh-content.refreshing');\n        container.removeClass('refreshing').addClass('transitioning');\n        container.transitionEnd(function() {\n            container.removeClass('transitioning pull-up pull-down');\n        });\n    };\n    $.pullToRefreshTrigger = function(container) {\n        container = $(container);\n        if (container.length === 0) container = $('.pull-to-refresh-content');\n        if (container.hasClass('refreshing')) return;\n        container.addClass('transitioning refreshing');\n        container.trigger('refresh', {\n            done: function() {\n                $.pullToRefreshDone(container);\n            }\n        });\n    };\n\n    $.destroyPullToRefresh = function(pageContainer) {\n        pageContainer = $(pageContainer);\n        var pullToRefreshContent = pageContainer.hasClass('pull-to-refresh-content') ? pageContainer : pageContainer.find('.pull-to-refresh-content');\n        if (pullToRefreshContent.length === 0) return;\n        if (pullToRefreshContent[0].destroyPullToRefresh) pullToRefreshContent[0].destroyPullToRefresh();\n    };\n\n}($); //jshint ignore:line\n\n/* global $:true */\n+\n\nfunction($) {\n    'use strict';\n\n    function handleInfiniteScroll() {\n        /*jshint validthis:true */\n        var inf = $(this);\n        var scrollTop = inf.scrollTop();\n        var scrollHeight = inf.scrollHeight();\n        var height = inf[0].offsetHeight;\n        var distance = inf[0].getAttribute('data-distance');\n        var virtualListContainer = inf.find('.virtual-list');\n        var virtualList;\n        var onTop = inf.hasClass('infinite-scroll-top');\n        if (!distance) distance = 50;\n        if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n            distance = parseInt(distance, 10) / 100 * height;\n        }\n        if (distance > height) distance = height;\n        if (onTop) {\n            if (scrollTop < distance) {\n                inf.trigger('infinite');\n            }\n        } else {\n            if (scrollTop + height >= scrollHeight - distance) {\n                if (virtualListContainer.length > 0) {\n                    virtualList = virtualListContainer[0].f7VirtualList;\n                    if (virtualList && !virtualList.reachEnd) return;\n                }\n                inf.trigger('infinite');\n            }\n        }\n\n    }\n    $.attachInfiniteScroll = function(infiniteContent) {\n        $(infiniteContent).on('scroll', handleInfiniteScroll);\n    };\n    $.detachInfiniteScroll = function(infiniteContent) {\n        $(infiniteContent).off('scroll', handleInfiniteScroll);\n    };\n\n    $.initInfiniteScroll = function(pageContainer) {\n        pageContainer = $(pageContainer);\n        var infiniteContent = pageContainer.hasClass('infinite-scroll') ? pageContainer : pageContainer.find('.infinite-scroll');\n        if (infiniteContent.length === 0) return;\n        $.attachInfiniteScroll(infiniteContent);\n\n        function detachEvents() {\n            $.detachInfiniteScroll(infiniteContent);\n            pageContainer.off('pageBeforeRemove', detachEvents);\n        }\n        pageContainer.on('pageBeforeRemove', detachEvents);\n    };\n}($);\n\n/* ===============================================================================\n************   Notification ************\n=============================================================================== */\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n\n    var noti, defaults, timeout, start, diffX, diffY;\n\n    var touchStart = function(e) {\n        var p = $.getTouchPosition(e);\n        start = p;\n        diffX = diffY = 0;\n        noti.addClass(\"touching\");\n    };\n    var touchMove = function(e) {\n        if (!start) return false;\n        e.preventDefault();\n        e.stopPropagation();\n        var p = $.getTouchPosition(e);\n        diffX = p.x - start.x;\n        diffY = p.y - start.y;\n        if (diffY > 0) {\n            diffY = Math.sqrt(diffY);\n        }\n\n        noti.css(\"transform\", \"translate3d(0, \" + diffY + \"px, 0)\");\n    };\n    var touchEnd = function() {\n        noti.removeClass(\"touching\");\n        noti.attr(\"style\", \"\");\n        if (diffY < 0 && (Math.abs(diffY) > noti.height() * 0.38)) {\n            $.closeNotification();\n        }\n\n        if (Math.abs(diffX) <= 1 && Math.abs(diffY) <= 1) {\n            noti.trigger(\"noti-click\");\n        }\n\n        start = false;\n    };\n\n    var attachEvents = function(el) {\n        el.on($.touchEvents.start, touchStart);\n        el.on($.touchEvents.move, touchMove);\n        el.on($.touchEvents.end, touchEnd);\n    };\n\n    $.notification = $.noti = function(params) {\n        params = $.extend({}, defaults, params);\n        noti = $(\".notification\");\n        if (!noti[0]) { // create a new notification\n            noti = $('<div class=\"notification\"></div>').appendTo(document.body);\n            attachEvents(noti);\n        }\n\n        noti.off(\"noti-click\"); //the click event is not correct sometime: it will trigger when user is draging.\n        if (params.onClick) noti.on(\"noti-click\", function() {\n            params.onClick(params.data);\n        });\n\n        noti.html($.t7.compile(params.tpl)(params));\n\n        noti.show();\n\n        noti.addClass(\"notification-in\");\n        noti.data(\"params\", params);\n\n        var startTimeout = function() {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n\n            timeout = setTimeout(function() {\n                if (noti.hasClass(\"touching\")) {\n                    startTimeout();\n                } else {\n                    $.closeNotification();\n                }\n            }, params.time);\n        };\n\n        startTimeout();\n\n    };\n\n    $.closeNotification = function() {\n        timeout && clearTimeout(timeout);\n        timeout = null;\n        var noti = $(\".notification\").removeClass(\"notification-in\").transitionEnd(function() {\n            $(this).remove();\n        });\n\n        if (noti[0]) {\n            var params = $(\".notification\").data(\"params\");\n            if (params && params.onClose) {\n                params.onClose(params.data);\n            }\n        }\n    };\n\n    defaults = $.noti.prototype.defaults = {\n        title: undefined,\n        text: undefined,\n        media: undefined,\n        time: 4000,\n        onClick: undefined,\n        onClose: undefined,\n        data: undefined,\n        tpl: '<div class=\"notification-inner\">' +\n            '{{#if media}}<div class=\"notification-media\">{{media}}</div>{{/if}}' +\n            '<div class=\"notification-content\">' +\n            '{{#if title}}<div class=\"notification-title\">{{title}}</div>{{/if}}' +\n            '{{#if text}}<div class=\"notification-text\">{{text}}</div>{{/if}}' +\n            '</div>' +\n            '<div class=\"notification-handle-bar\"></div>' +\n            '</div>'\n    };\n\n}($);\n\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n\n    var Index = function(params) {\n        this.params = params;\n        this.tpl = $.t7(this.params.indexListTemplate).compile();\n    };\n\n    Index.prototype.render = function(list) {\n        this.list = $(list || \".list\");\n        this.draw();\n    };\n\n    Index.prototype.draw = function() {\n        if (this.indexList) this.indexList.remove();\n        this.titles = this.list.find(this.params.titleSelector);\n        var titleTexts = this.titles.map(function(i, t) {\n            return $(t).data(\"index\") || $(t).text();\n        }).toArray();\n\n        this.indexList = $(\"<ul class='index-list-bar'></ul>\").appendTo(this.list.parents(\".page\"));\n        this.indexList.html(this.tpl({ indexes: titleTexts }));\n        this.indexList.on($.touchEvents.start, $.proxy(this.touchStart, this));\n        this.indexList.on($.touchEvents.start + \" \" + $.touchEvents.move, $.proxy(this.touchMove, this));\n        this.indexList.on($.touchEvents.end, $.proxy(this.touchEnd, this));\n\n        this.content = this.list.parents(\".content\");\n    };\n\n    Index.prototype.touchStart = function() {\n        this.pageOffsetTop = this.content.offset().top;\n        this.touching = true;\n    };\n\n    Index.prototype.touchMove = function(e) {\n        if (!this.touching) return;\n        e.preventDefault();\n        var li = this.getElementOnTouch($.getTouchPosition(e));\n        if (!li) return;\n        var title = this.titles.eq(li.data(\"index\"));\n        var titleTop = title.parent().offset().top; // if a element has class list-group-title, it will be sticky in safari, so it's offset is not correct\n        var top = titleTop - this.pageOffsetTop + this.content.scrollTop();\n        this.content.scrollTop(top);\n    };\n\n    Index.prototype.touchEnd = function() {\n        this.touching = false;\n    };\n\n    Index.prototype.getElementOnTouch = function(position) {\n        var result = null;\n        this.indexList.find(\"li\").each(function() {\n            if (result) return;\n            var $this = $(this);\n            var offset = $this.offset();\n            if (offset.top < position.y && offset.top + $this.outerHeight() > position.y) {\n                result = $this;\n            }\n        });\n        return result;\n    };\n\n    $.fn.indexList = function(params) {\n        return this.each(function() {\n            if (!this) return;\n\n            var list = $(this);\n\n            var index = list.data(\"index\");\n\n            if (!index) {\n                params = $.extend({}, $.fn.indexList.prototype.defaults, params);\n                index = new Index(params).render(list);\n                list.data(\"index\", index);\n            }\n\n            return index;\n\n        });\n    };\n\n\n    $.fn.indexList.prototype.defaults = {\n        titleSelector: \".list-group-title\",\n        indexListTemplate: \"{{#indexes}}<li data-index={{@index}}><strong>{{this}}</strong></li>{{/indexes}}\"\n    };\n\n    $.initIndexList = function(selector) {\n        var container = $(selector);\n        if (container.hasClass(\".contacts-block\")) {\n            container.indexList();\n        } else {\n            container.find(\".contacts-block\").indexList();\n        }\n    };\n\n}($);\n\n/* global $:true */\n+\n\nfunction($) {\n    \"use strict\";\n    $(function() {\n        $(document).on(\"focus\", \".searchbar input\", function(e) {\n            var $input = $(e.target);\n            $input.parents(\".searchbar\").addClass(\"searchbar-active\");\n        });\n        $(document).on(\"click\", \".searchbar-cancel\", function(e) {\n            var $btn = $(e.target);\n            $btn.parents(\".searchbar\").removeClass(\"searchbar-active\");\n        });\n        $(document).on(\"blur\", \".searchbar input\", function(e) {\n            var $input = $(e.target);\n            $input.parents(\".searchbar\").removeClass(\"searchbar-active\");\n        });\n    });\n}($);\n\n/*======================================================\n************   Panels   ************\n======================================================*/\n/* global $:true */\n/*jshint unused: false*/\n+\n\nfunction($) {\n    \"use strict\";\n    $.allowPanelOpen = true;\n    $.openPanel = function(panel) {\n        if (!$.allowPanelOpen) return false;\n        if (panel === 'left' || panel === 'right') panel = \".panel-\" + panel; //可以传入一个方向\n        panel = panel ? $(panel) : $(\".panel\").eq(0);\n        var direction = panel.hasClass(\"panel-right\") ? \"right\" : \"left\";\n        if (panel.length === 0 || panel.hasClass('active')) return false;\n        $.closePanel(); // Close if some panel is opened\n        $.allowPanelOpen = false;\n        var effect = panel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n        panel.css({ display: 'block' }).addClass('active');\n        panel.trigger('open');\n\n        // Trigger reLayout\n        var clientLeft = panel[0].clientLeft;\n\n        // Transition End;\n        var transitionEndTarget = effect === 'reveal' ? $($.getCurrentPage()) : panel;\n        var openedTriggered = false;\n\n        function panelTransitionEnd() {\n            transitionEndTarget.transitionEnd(function(e) {\n                if (e.target === transitionEndTarget[0]) {\n                    if (panel.hasClass('active')) {\n                        panel.trigger('opened');\n                    } else {\n                        panel.trigger('closed');\n                    }\n                    $.allowPanelOpen = true;\n                } else panelTransitionEnd();\n            });\n        }\n        panelTransitionEnd();\n\n        $(document.body).addClass('with-panel-' + direction + '-' + effect);\n        return true;\n    };\n    $.closePanel = function() {\n        var activePanel = $('.panel.active');\n        if (activePanel.length === 0) return false;\n        var effect = activePanel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n        var panelPosition = activePanel.hasClass('panel-left') ? 'left' : 'right';\n        activePanel.removeClass('active');\n        var transitionEndTarget = effect === 'reveal' ? $('.page') : activePanel;\n        activePanel.trigger('close');\n        $.allowPanelOpen = false;\n\n        transitionEndTarget.transitionEnd(function() {\n            if (activePanel.hasClass('active')) return;\n            activePanel.css({ display: '' });\n            activePanel.trigger('closed');\n            $('body').removeClass('panel-closing');\n            $.allowPanelOpen = true;\n        });\n\n        $('body').addClass('panel-closing').removeClass('with-panel-' + panelPosition + '-' + effect);\n    };\n\n    $(document).on(\"click\", \".open-panel\", function(e) {\n        var panel = $(e.target).data(panel);\n        $.openPanel(panel);\n    });\n    $(document).on(\"click\", \".close-panel, .panel-overlay\", function(e) {\n        $.closePanel();\n    });\n    /*======================================================\n    ************   Swipe panels   ************\n    ======================================================*/\n    $.initSwipePanels = function() {\n        var panel, side;\n        var swipePanel = $.smConfig.swipePanel;\n        var swipePanelOnlyClose = $.smConfig.swipePanelOnlyClose;\n        var swipePanelCloseOpposite = true;\n        var swipePanelActiveArea = false;\n        var swipePanelThreshold = 2;\n        var swipePanelNoFollow = false;\n\n        if (!(swipePanel || swipePanelOnlyClose)) return;\n\n        var panelOverlay = $('.panel-overlay');\n        var isTouched, isMoved, isScrolling, touchesStart = {},\n            touchStartTime, touchesDiff, translate, opened, panelWidth, effect, direction;\n        var currentPage = $($.getCurrentPage());\n\n        function handleTouchStart(e) {\n            currentPage = $($.getCurrentPage()); //page may changed\n            if (!$.allowPanelOpen || (!swipePanel && !swipePanelOnlyClose) || isTouched) return;\n            if ($('.modal-in, .photo-browser-in').length > 0) return;\n            if (!(swipePanelCloseOpposite || swipePanelOnlyClose)) {\n                if ($('.panel.active').length > 0 && !panel.hasClass('active')) return;\n            }\n            var position = $.getTouchPosition(e);\n            touchesStart.x = position.x;\n            touchesStart.y = position.y;\n            if (swipePanelCloseOpposite || swipePanelOnlyClose) {\n                if ($('.panel.active').length > 0) {\n                    side = $('.panel.active').hasClass('panel-left') ? 'left' : 'right';\n                } else {\n                    if (swipePanelOnlyClose) return;\n                    side = swipePanel;\n                }\n                if (!side) return;\n            }\n            panel = $('.panel.panel-' + side);\n            if (!panel[0]) return;\n            opened = panel.hasClass('active');\n            if (swipePanelActiveArea && !opened) {\n                if (side === 'left') {\n                    if (touchesStart.x > swipePanelActiveArea) return;\n                }\n                if (side === 'right') {\n                    if (touchesStart.x < window.innerWidth - swipePanelActiveArea) return;\n                }\n            }\n            isMoved = false;\n            isTouched = true;\n            isScrolling = undefined;\n\n            touchStartTime = (new Date()).getTime();\n            direction = undefined;\n        }\n\n        function handleTouchMove(e) {\n            if (!isTouched) return;\n            if (!panel[0]) return;\n            if (e.f7PreventPanelSwipe) return;\n            var position = $.getTouchPosition(e);\n            var pageX = position.x;\n            var pageY = position.y;\n            if (typeof isScrolling === 'undefined') {\n                isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n            }\n            if (isScrolling) {\n                isTouched = false;\n                return;\n            }\n            if (!direction) {\n                if (pageX > touchesStart.x) {\n                    direction = 'to-right';\n                } else {\n                    direction = 'to-left';\n                }\n\n                if (\n                    side === 'left' &&\n                    (\n                        direction === 'to-left' && !panel.hasClass('active')\n                    ) ||\n                    side === 'right' &&\n                    (\n                        direction === 'to-right' && !panel.hasClass('active')\n                    )\n                ) {\n                    isTouched = false;\n                    return;\n                }\n            }\n\n            if (swipePanelNoFollow) {\n                var timeDiff = (new Date()).getTime() - touchStartTime;\n                if (timeDiff < 300) {\n                    if (direction === 'to-left') {\n                        if (side === 'right') $.openPanel(side);\n                        if (side === 'left' && panel.hasClass('active')) $.closePanel();\n                    }\n                    if (direction === 'to-right') {\n                        if (side === 'left') $.openPanel(side);\n                        if (side === 'right' && panel.hasClass('active')) $.closePanel();\n                    }\n                }\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n\n            if (!isMoved) {\n                effect = panel.hasClass('panel-cover') ? 'cover' : 'reveal';\n                if (!opened) {\n                    panel.show();\n                    panelOverlay.show();\n                }\n                panelWidth = panel[0].offsetWidth;\n                panel.transition(0);\n                /*\n                if (panel.find('.' + app.params.viewClass).length > 0) {\n                    if (app.sizeNavbars) app.sizeNavbars(panel.find('.' + app.params.viewClass)[0]);\n                }\n                */\n            }\n\n            isMoved = true;\n\n            e.preventDefault();\n            var threshold = opened ? 0 : -swipePanelThreshold;\n            if (side === 'right') threshold = -threshold;\n\n            touchesDiff = pageX - touchesStart.x + threshold;\n\n            if (side === 'right') {\n                translate = touchesDiff - (opened ? panelWidth : 0);\n                if (translate > 0) translate = 0;\n                if (translate < -panelWidth) {\n                    translate = -panelWidth;\n                }\n            } else {\n                translate = touchesDiff + (opened ? panelWidth : 0);\n                if (translate < 0) translate = 0;\n                if (translate > panelWidth) {\n                    translate = panelWidth;\n                }\n            }\n            if (effect === 'reveal') {\n                currentPage.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                panelOverlay.transform('translate3d(' + translate + 'px,0,0)');\n                //app.pluginHook('swipePanelSetTransform', currentPage[0], panel[0], Math.abs(translate / panelWidth));\n            } else {\n                panel.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                //app.pluginHook('swipePanelSetTransform', currentPage[0], panel[0], Math.abs(translate / panelWidth));\n            }\n        }\n\n        function handleTouchEnd(e) {\n            if (!isTouched || !isMoved) {\n                isTouched = false;\n                isMoved = false;\n                return;\n            }\n            isTouched = false;\n            isMoved = false;\n            var timeDiff = (new Date()).getTime() - touchStartTime;\n            var action;\n            var edge = (translate === 0 || Math.abs(translate) === panelWidth);\n\n            if (!opened) {\n                if (translate === 0) {\n                    action = 'reset';\n                } else if (\n                    timeDiff < 300 && Math.abs(translate) > 0 ||\n                    timeDiff >= 300 && (Math.abs(translate) >= panelWidth / 2)\n                ) {\n                    action = 'swap';\n                } else {\n                    action = 'reset';\n                }\n            } else {\n                if (translate === -panelWidth) {\n                    action = 'reset';\n                } else if (\n                    timeDiff < 300 && Math.abs(translate) >= 0 ||\n                    timeDiff >= 300 && (Math.abs(translate) <= panelWidth / 2)\n                ) {\n                    if (side === 'left' && translate === panelWidth) action = 'reset';\n                    else action = 'swap';\n                } else {\n                    action = 'reset';\n                }\n            }\n            if (action === 'swap') {\n                $.allowPanelOpen = true;\n                if (opened) {\n                    $.closePanel();\n                    if (edge) {\n                        panel.css({ display: '' });\n                        $('body').removeClass('panel-closing');\n                    }\n                } else {\n                    $.openPanel(side);\n                }\n                if (edge) $.allowPanelOpen = true;\n            }\n            if (action === 'reset') {\n                if (opened) {\n                    $.allowPanelOpen = true;\n                    $.openPanel(side);\n                } else {\n                    $.closePanel();\n                    if (edge) {\n                        $.allowPanelOpen = true;\n                        panel.css({ display: '' });\n                    } else {\n                        var target = effect === 'reveal' ? currentPage : panel;\n                        $('body').addClass('panel-closing');\n                        target.transitionEnd(function() {\n                            $.allowPanelOpen = true;\n                            panel.css({ display: '' });\n                            $('body').removeClass('panel-closing');\n                        });\n                    }\n                }\n            }\n            if (effect === 'reveal') {\n                currentPage.transition('');\n                currentPage.transform('');\n            }\n            panel.transition('').transform('');\n            panelOverlay.css({ display: '' }).transform('');\n        }\n        $(document).on($.touchEvents.start, handleTouchStart);\n        $(document).on($.touchEvents.move, handleTouchMove);\n        $(document).on($.touchEvents.end, handleTouchEnd);\n    };\n\n    $.initSwipePanels();\n}($);\n\n// jshint ignore: start\n/*\n * 路由器\n */\n+\n\nfunction($) {\n    \"use strict\";\n\n    if (!window.CustomEvent) {\n        window.CustomEvent = function(type, config) {\n            var e = document.createEvent('CustomEvent');\n            e.initCustomEvent(type, config.bubbles, config.cancelable, config.detail, config.id);\n            return e;\n        };\n    }\n\n    var Router = function() {\n        this.state = sessionStorage;\n        this.state.setItem(\"stateid\", parseInt(this.state.getItem(\"stateid\") || 1) + 1);\n        this.state.setItem(\"currentStateID\", this.state.getItem(\"stateid\"));\n        this.stack = sessionStorage;\n        this.stack.setItem(\"back\", \"[]\"); //返回栈, {url, pageid, stateid}\n        this.stack.setItem(\"forward\", \"[]\"); //前进栈, {url, pageid, stateid}\n        this.extras = {}; //page extra: popup, panel...\n        this.init();\n        this.xhr = null;\n    }\n\n    Router.prototype.defaults = {\n        transition: true\n    };\n\n    Router.prototype.init = function() {\n        var currentPage = this.getCurrentPage();\n        if (!currentPage[0]) currentPage = $(\".page\").eq(0).addClass(\"page-current\");\n        var hash = location.hash;\n        if (currentPage[0] && !currentPage[0].id) currentPage[0].id = (hash ? hash.slice(1) : this.genRandomID());\n\n        if (!currentPage[0]) throw new Error(\"can't find .page element\");\n        var newCurrentPage = $(hash);\n\n\n        if (newCurrentPage[0] && (!currentPage[0] || hash.slice(1) !== currentPage[0].id)) {\n            currentPage.removeClass(\"page-current\");\n            newCurrentPage.addClass(\"page-current\");\n            currentPage = newCurrentPage;\n        }\n\n        //第一次加载的时候，初识话当前页面的state\n        var state = history.state;\n        if (!state) {\n            var id = this.genStateID();\n            this.replaceState(location.href, id);\n            this.setCurrentStateID(id);\n        }\n\n\n        var self = this;\n        window.addEventListener('load', function() {\n            //解决safari的一个bug，safari会在首次加载页面的时候触发 popstate 事件，通过setTimeout 做延迟来忽略这个错误的事件。\n            //参考 https://github.com/visionmedia/page.js/pull/239/files\n            setTimeout(function() {\n                window.addEventListener('popstate', $.proxy(self.onpopstate, self));\n            }, 0);\n        }, false);\n    }\n\n    //load new page, and push to history\n    Router.prototype.loadPage = function(url, noAnimation, replace, reload) {\n\n        var param = url;\n\n        if (noAnimation === undefined) {\n            noAnimation = !this.defaults.transition;\n        }\n\n        if (typeof url === typeof \"a\") {\n            param = {\n                url: url,\n                noAnimation: noAnimation,\n                replace: replace\n            }\n        }\n\n        var url = param.url,\n            noAnimation = param.noAnimation,\n            replace = param.replace;\n\n        this.getPage(url, function(page, extra) {\n\n            var currentPage = this.getCurrentPage();\n\n            var pageid = currentPage[0].id;\n\n            var action = \"pushBack\";\n            if (replace) action = \"replaceBack\";\n            if (reload) action = \"reloadBack\";\n            this[action]({\n                url: location.href,\n                pageid: \"#\" + pageid,\n                id: this.getCurrentStateID(),\n                animation: !noAnimation\n            });\n\n            //remove all forward page\n            var forward = JSON.parse(this.state.getItem(\"forward\") || \"[]\");\n            var self = this;\n            for (var i = 0; i < forward.length; i++) {\n                $(forward[i].pageid).each(function() {\n                    var $page = $(this);\n                    if ($page.data(\"page-remote\")) {\n                        var pageExtra = self.extras[$page[0].id];\n                        pageExtra && pageExtra.remove();\n                        self.extras[$page[0].id] = undefined;\n                        $page.remove();\n                    }\n                });\n            }\n            this.state.setItem(\"forward\", \"[]\"); //clearforward\n\n            var duplicatePage = $(\"#\" + $(page)[0].id);\n\n            page.insertBefore($(\".page\")[0]);\n\n            if (duplicatePage[0] !== page[0]) duplicatePage.remove(); //if inline mod, the duplicate page is current page\n\n            if (extra) self.extras[page[0].id] = extra.appendTo(document.body);\n\n            var id = this.genStateID();\n            this.setCurrentStateID(id);\n\n            this[replace || reload ? \"replaceState\" : \"pushState\"](url, id);\n\n            this.forwardStack = []; //clear forward stack\n\n            this.animatePages(this.getCurrentPage(), page, null, noAnimation);\n        });\n    }\n\n    //load new page and replace current page inhistory\n    Router.prototype.replacePage = function(url, noAnimation) {\n        return this.loadPage(url, noAnimation, true);\n    }\n\n    //reload current page\n    Router.prototype.reloadPage = function() {\n        return this.loadPage(location.href, true, false, true);\n    }\n\n    Router.prototype.animatePages = function(leftPage, rightPage, leftToRight, noTransition) {\n        var removeClasses = 'page-left page-right page-from-center-to-left page-from-center-to-right page-from-right-to-center page-from-left-to-center';\n        if (noTransition) {\n            if (!leftToRight) {\n                rightPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                leftPage.removeClass(removeClasses).removeClass('page-current');\n                rightPage.removeClass(removeClasses).addClass(\"page-current\");\n                rightPage.trigger(\"pageInitInternal\", [rightPage[0].id, rightPage]);\n\n                if (rightPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n            } else {\n                leftPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                rightPage.removeClass(removeClasses).removeClass('page-current');\n                leftPage.removeClass(removeClasses).addClass(\"page-current\");\n\n                if (leftPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [leftPage[0].id, leftPage]);\n            }\n        } else {\n            if (!leftToRight) {\n                rightPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                leftPage.removeClass(removeClasses).addClass(\"page-from-center-to-left\").removeClass('page-current');\n                rightPage.removeClass(removeClasses).addClass(\"page-from-right-to-center page-current\");\n\n                leftPage.animationEnd(function() {\n                    leftPage.removeClass(removeClasses);\n                });\n                rightPage.animationEnd(function() {\n                    afterAnimation(rightPage);\n                });\n\n                if (rightPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [rightPage[0].id, rightPage]);\n            } else {\n                leftPage.trigger(\"pageAnimationStart\", [rightPage[0].id, rightPage]);\n                rightPage.removeClass(removeClasses).addClass(\"page-from-center-to-right\").removeClass('page-current');\n                leftPage.removeClass(removeClasses).addClass(\"page-from-left-to-center page-current\");\n\n                leftPage.animationEnd(function() {\n                    afterAnimation(leftPage);\n                });\n                rightPage.animationEnd(function() {\n                    rightPage.removeClass(removeClasses);\n                });\n                if (leftPage.hasClass(\"no-tabbar\")) {\n                    $(document.body).addClass(\"tabbar-hidden\");\n                } else {\n                    $(document.body).removeClass(\"tabbar-hidden\");\n                }\n                rightPage.trigger(\"pageInitInternal\", [leftPage[0].id, leftPage]);\n            }\n        }\n\n        function afterAnimation(page) {\n            page.removeClass(removeClasses);\n            page.trigger(\"pageAnimationEnd\", [page[0].id, page]);\n        }\n\n    }\n    Router.prototype.getCurrentPage = function() {\n            return $(\".page-current\");\n        }\n        //如果无法前进，则加载对应的url\n    Router.prototype.forward = function(url) {\n            var stack = JSON.parse(this.stack.getItem(\"forward\"));\n            if (stack.length) {\n                history.forward();\n            } else {\n                location.href = url;\n            }\n        }\n        //如果无法后退，则加载对应的url\n    Router.prototype.back = function(url) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        if (stack.length) {\n            history.back();\n        } else if (url) {\n            location.href = url;\n        } else {\n            history.back();\n        }\n    }\n\n    //后退\n    Router.prototype._back = function() {\n        var h = this.popBack();\n        if (!h) return;\n        var currentPage = this.getCurrentPage();\n        var newPage = $(h.pageid);\n        if (!newPage[0]) return;\n        this.pushForward({ url: location.href, pageid: \"#\" + currentPage[0].id, id: this.getCurrentStateID(), animation: h.animation });\n        this.setCurrentStateID(h.id);\n        this.animatePages(newPage, currentPage, true, !h.animation);\n    }\n\n    //前进\n    Router.prototype._forward = function() {\n        var h = this.popForward();\n        if (!h) return;\n        var currentPage = this.getCurrentPage();\n        var newPage = $(h.pageid);\n        if (!newPage[0]) return;\n        this.pushBack({ url: location.href, pageid: \"#\" + currentPage[0].id, id: this.getCurrentStateID(), animation: h.animation });\n        this.setCurrentStateID(h.id);\n        this.animatePages(currentPage, newPage, false, !h.animation);\n    }\n\n    Router.prototype.pushState = function(url, id) {\n        history.pushState({ url: url, id: id }, '', url);\n    }\n\n    Router.prototype.replaceState = function(url, id) {\n        history.replaceState({ url: url, id: id }, '', url);\n    }\n\n    Router.prototype.onpopstate = function(d) {\n        var state = d.state;\n        if (!state) {\n            return true;\n        }\n\n        if (state.id === this.getCurrentStateID()) {\n            return false;\n        }\n        var forward = state.id > this.getCurrentStateID();\n        if (forward) this._forward();\n        else this._back();\n    }\n\n\n    //根据url获取页面的DOM，如果是一个内联页面，则直接返回，否则用ajax加载\n    Router.prototype.getPage = function(url, callback) {\n        if (url[0] === \"#\") return callback.apply(this, [$(url)]);\n\n        this.dispatch(\"pageLoadStart\");\n\n        if (this.xhr && this.xhr.readyState < 4) {\n            this.xhr.onreadystatechange = $.noop;\n            this.xhr.abort();\n            this.dispatch(\"pageLoadCancel\");\n        }\n\n        var self = this;\n\n        this.xhr = $.ajax({\n            url: url,\n            success: $.proxy(function(data, s, xhr) {\n                var html = this.parseXHR(xhr);\n                var $page = html[0];\n                var $extra = html[1];\n                if (!$page[0].id) $page[0].id = this.genRandomID();\n                $page.data(\"page-remote\", 1);\n                callback.apply(this, [$page, $extra]);\n            }, this),\n            error: function() {\n                self.dispatch(\"pageLoadError\");\n            },\n            complete: function() {\n                self.dispatch(\"pageLoadComplete\");\n            }\n        });\n    }\n    Router.prototype.parseXHR = function(xhr) {\n        var response = xhr.responseText;\n        var body = response.match(/<body[^>]*>([\\s\\S.]*)<\\/body>/i);\n        var html = body ? body[1] : response;\n        html = \"<div>\" + html + \"</div>\";\n        var tmp = $(html);\n\n        var $extra = tmp.find(\".popup, .popover, .panel, .panel-overlay\");\n\n        var $page = tmp.find(\".page\");\n        if (!$page[0]) $page = tmp.addClass(\"page\");\n        return [$page, $extra];\n    }\n\n    Router.prototype.genStateID = function() {\n        var id = parseInt(this.state.getItem(\"stateid\")) + 1;\n        this.state.setItem(\"stateid\", id);\n        return id;\n    }\n    Router.prototype.getCurrentStateID = function() {\n        return parseInt(this.state.getItem(\"currentStateID\"));\n    }\n    Router.prototype.setCurrentStateID = function(id) {\n        this.state.setItem(\"currentStateID\", id);\n    }\n    Router.prototype.genRandomID = function() {\n        return \"page-\" + (+new Date());\n    }\n\n    Router.prototype.popBack = function() {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        if (!stack.length) return null;\n        var h = stack.splice(stack.length - 1, 1)[0];\n        this.stack.setItem(\"back\", JSON.stringify(stack));\n        return h;\n    }\n    Router.prototype.pushBack = function(h) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        stack.push(h);\n        this.stack.setItem(\"back\", JSON.stringify(stack));\n    }\n    Router.prototype.replaceBack = function(h) {\n        var stack = JSON.parse(this.stack.getItem(\"back\"));\n        stack.pop();\n        stack.push(h);\n        this.stack.setItem(\"back\", JSON.stringify(stack));\n    }\n    Router.prototype.reloadBack = function(h) {\n        //do nothing;\n        return;\n    }\n    Router.prototype.popForward = function() {\n        var stack = JSON.parse(this.stack.getItem(\"forward\"));\n        if (!stack.length) return null;\n        var h = stack.splice(stack.length - 1, 1)[0];\n        this.stack.setItem(\"forward\", JSON.stringify(stack));\n        return h;\n    }\n    Router.prototype.pushForward = function(h) {\n        var stack = JSON.parse(this.stack.getItem(\"forward\"));\n        stack.push(h);\n        this.stack.setItem(\"forward\", JSON.stringify(stack));\n    }\n\n    Router.prototype.dispatch = function(event) {\n        var e = new CustomEvent(event, {\n            bubbles: true,\n            cancelable: true\n        });\n\n        window.dispatchEvent(e);\n    };\n\n\n    $(function() {\n        if (!$.smConfig.router) return;\n\n        var router = $.router = new Router();\n        router.defaults = Router.prototype.defaults;\n\n        $(document).on(\"click\", \"a\", function(e) {\n            var $target = $(e.currentTarget);\n            if ($target.hasClass(\"external\") ||\n                $target[0].hasAttribute(\"external\") ||\n                $target.hasClass(\"tab-link\") ||\n                $target.hasClass(\"open-popup\") ||\n                $target.hasClass(\"open-panel\")\n            ) return;\n            e.preventDefault();\n            var url = $target.attr(\"href\");\n            if ($target.hasClass(\"back\")) {\n                router.back(url);\n                return;\n            }\n\n            if (!url || url === \"#\" || /javascript:.*;/.test(url)) return;\n            router.loadPage(url, $target.hasClass(\"no-transition\") ? true : undefined, $target.hasClass(\"replace\") ? true : undefined); //undefined is different to false\n        })\n    });\n}($);\n// jshint ignore: end\n\n/* global $:true */\n/*jshint unused: false*/\n+\n\nfunction($) {\n    \"use strict\";\n\n    var getPage = function() {\n        var $page = $(\".page-current\");\n        if (!$page[0]) $page = $(\".page\").addClass(\"page-current\");\n        return $page;\n    };\n\n    //初始化页面中的JS组件\n    $.initPage = function(page) {\n        var $page = page ? $(page) : getPage();\n        if (!$page[0]) $page = $(document.body);\n        var $content = $page.hasClass(\"content\") ? $page : $page.find(\".content\");\n\n        $.initPullToRefresh($content);\n        $.initInfiniteScroll($content);\n        $.initCalendar($content);\n        $.initIndexList($content);\n\n        //extend\n        if ($.initSwiper) $.initSwiper($content);\n        if ($.initSwipeout) $.initSwipeout(); // don't pass $content because the swipeout element is not $content\n    };\n\n\n    if ($.smConfig.showPageLoadingIndicator) {\n        //这里的 以 push 开头的是私有事件，不要用\n        $(window).on(\"pageLoadStart\", function() {\n            $.showIndicator();\n        });\n        $(document).on(\"pageAnimationStart\", function() {\n            $.hideIndicator();\n        });\n        $(window).on(\"pageLoadCancel\", function() {\n            $.hideIndicator();\n        });\n        $(window).on(\"pageLoadError\", function() {\n            $.hideIndicator();\n            $.toast(\"加载失败\");\n        });\n    }\n\n\n\n    $.init = function() {\n        var $page = getPage();\n        var id = $page[0].id;\n        if ($page.hasClass(\"page-inited\")) {\n            $page.trigger(\"pageReinit\", [id, $page]);\n        } else {\n            $.initPage();\n            $page.addClass(\"page-inited\");\n            $page.trigger(\"pageInit\", [id, $page]);\n        }\n    };\n\n    $(function() {\n        if ($.smConfig.autoInit) {\n            $.init();\n        }\n\n        $(document).on(\"pageInitInternal\", function(e, id, $page) {\n            $.init();\n        });\n    });\n\n\n}($);"]}
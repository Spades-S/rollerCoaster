{"version":3,"sources":["../../../../src/home/model/user.js"],"names":["args","tableName","articleid","field","where","id","select","data","newLikes","likes","likedata","Array","push","oldLikes","JSON","parse","index","indexOf","splice","update","lines","think","model","base"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAGkB;AAAA;;AAAA,8CAANA,IAAM;AAANA,oBAAM;AAAA;;AACV,sKAAcA,IAAd;AACA,iBAAKC,SAAL,GAAiB,MAAjB;AACH;;;;mGAEiBC,S;;;;;;;uCACG,KAAKC,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B,EAACC,IAAI,CAAL,EAA1B,EAAmCC,MAAnC,E;;;AAAbC,oC;AACAC,wC;;AACJ,oCAAID,KAAK,CAAL,EAAQE,KAAR,IAAiB,EAArB,EAAyB;AACjBC,4CADiB,GACN,IAAIC,KAAJ,EADM;;AAErBD,6CAASE,IAAT,CAAcV,SAAd;AACAM,+CAAW,yBAAeE,QAAf,CAAX;AACH,iCAJD,MAIO;AACCG,4CADD,GACYC,KAAKC,KAAL,CAAWR,KAAK,CAAL,EAAQE,KAAnB,CADZ;AAECO,yCAFD,GAESH,SAASI,OAAT,CAAiBf,SAAjB,CAFT;;AAGH,wCAAIc,SAAS,CAAb,EAAgB;AACZH,iDAASK,MAAT,CAAgBF,KAAhB,EAAuB,CAAvB;AACH,qCAFD,MAEO;AACHH,iDAASD,IAAT,CAAcV,SAAd;AACH;AACDM,+CAAW,yBAAeK,QAAf,CAAX;AACH;;uCACiB,KAAKT,KAAL,CAAW,EAACC,IAAI,CAAL,EAAX,EAAoBc,MAApB,CAA2B,EAACV,OAAOD,QAAR,EAA3B,C;;;AAAdY,qC;iEACGA,K;;;;;;;;;;;;;;;;;;;;;;;;;;uCAIU,KAAKjB,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B,EAACC,IAAI,CAAL,EAA1B,EAAmCC,MAAnC,E;;;AAAbC,oC;kEACGA,I;;;;;;;;;;;;;;;;;;;qGAGiBF,E;;;;;;;uCACP,KAAKF,KAAL,CAAW,kBAAX,EAA+BC,KAA/B,CAAqC,EAACC,IAAIA,EAAL,EAArC,EAA+CC,MAA/C,E;;;AAAbC,oC;kEACGA,I;;;;;;;;;;;;;;;;;;EAlCcc,MAAMC,KAAN,CAAYC,I","file":"user.js","sourcesContent":["'use strict'\n\nexport default class extends think.model.base {\n    init(...args) {\n        super.init(...args);\n        this.tableName = 'user';\n    }\n\n    async updateLikes(articleid) {\n        let data = await this.field('likes').where({id: 1}).select();\n        let newLikes;\n        if (data[0].likes == \"\") {\n            let likedata = new Array();\n            likedata.push(articleid);\n            newLikes = JSON.stringify(likedata);\n        } else {\n            let oldLikes = JSON.parse(data[0].likes);\n            let index = oldLikes.indexOf(articleid);\n            if (index >= 0) {\n                oldLikes.splice(index, 1);\n            } else {\n                oldLikes.push(articleid);\n            }\n            newLikes = JSON.stringify(oldLikes);\n        }\n        let lines = await this.where({id: 1}).update({likes: newLikes});\n        return lines;\n    }\n\n    async getLikes() {\n        let data = await this.field('likes').where({id: 1}).select();\n        return data;\n    }\n\n    async getAvatarInfoByUserId(id) {\n        let data = await this.field('avatar, nickname').where({id: id}).select();\n        return data;\n\n    }\n}"]}